
> frontend@0.1.0 test
> vitest --no-color


 DEV  v4.0.14 /Users/isak/Downloads/iso-doc-platform/frontend

 âœ“ app/app/dashboard/page.test.tsx (2 tests) 39ms
 âœ“ app/app/page.test.tsx (1 test) 60ms

 Test Files  2 passed (2)
      Tests  3 passed (3)
   Start at  22:09:43
   Duration  707ms (transform 63ms, setup 152ms, import 280ms, tests 99ms, environment 704ms)

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts x1 

 âœ“ app/app/dashboard/page.test.tsx (2 tests) 41ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  22:24:05
   Duration  200ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.test.ts x1 

 âœ“ lib/api.test.ts (4 tests) 4ms

 Test Files  1 passed (1)
      Tests  4 passed (4)
   Start at  22:24:07
   Duration  67ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 âœ“ lib/api.test.ts (4 tests) 5ms
 âœ“ app/app/dashboard/page.test.tsx (2 tests) 37ms

 Test Files  2 passed (2)
      Tests  6 passed (6)
   Start at  22:50:18
   Duration  418ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/reports/[id]/page.test.tsx x1 

 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 42ms

 Test Files  1 passed (1)
      Tests  3 passed (3)
   Start at  22:51:02
   Duration  267ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/reports/[id]/page.test.tsx x2 

 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 42ms

 Test Files  1 passed (1)
      Tests  3 passed (3)
   Start at  22:51:02
   Duration  154ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 âœ“ lib/api.test.ts (4 tests) 4ms
 âœ“ app/app/dashboard/page.test.tsx (2 tests) 54ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 56ms

 Test Files  3 passed (3)
      Tests  9 passed (9)
   Start at  23:05:52
   Duration  1.03s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x4 

 â¯ app/app/dashboard/page.test.tsx (2 tests | 2 failed) 10ms
     Ã— renders the dashboard and loads documents 8ms
     Ã— shows empty state when no documents 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard > renders the dashboard and loads documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard > shows empty state when no documents
Error: invariant expected app router to be mounted
 â¯ useRouter node_modules/next/dist/client/components/navigation.js:136:37
 â¯ Dashboard app/app/dashboard/page.tsx:21:20
     19| 
     20| export default function Dashboard() {
     21|     const router = useRouter();
       |                    ^
     22|     const [documents, setDocuments] = useState<Document[]>([]);
     23|     const [standards, setStandards] = useState<IsoStandard[]>([]);
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  1 failed (1)
      Tests  2 failed (2)
   Start at  23:06:33
   Duration  204ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x5 


â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 1 error:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.test.tsx:10:11: ERROR: Expected identifier but found "<"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.test.tsx:10:11
  
  Expected identifier but found "<"
  8  |      fetchDocuments: vi.fn(),
  9  |      uploadDocument: vi.fn(),
  10 |      render(<Dashboard />);
     |             ^
  11 |  
  12 |  await waitFor(() => {
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  no tests
   Start at  23:06:58
   Duration  75ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x6 

 âœ“ app/app/dashboard/page.test.tsx (2 tests) 106ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  23:07:13
   Duration  292ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 âœ“ lib/api.test.ts (4 tests) 15ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 93ms
 âœ“ app/app/dashboard/page.test.tsx (2 tests) 156ms

 Test Files  3 passed (3)
      Tests  9 passed (9)
   Start at  23:21:09
   Duration  2.90s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 âœ“ lib/api.test.ts (4 tests) 18ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 59ms
 âœ“ app/app/dashboard/page.test.tsx (2 tests) 159ms

 Test Files  3 passed (3)
      Tests  9 passed (9)
   Start at  23:22:00
   Duration  3.03s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.test.tsx x1 

 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 129ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  23:22:26
   Duration  450ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 âœ“ lib/api.test.ts (4 tests) 20ms
 âœ“ app/app/dashboard/page.test.tsx (2 tests) 223ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 163ms
 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 250ms

 Test Files  4 passed (4)
      Tests  11 passed (11)
   Start at  23:30:13
   Duration  5.81s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/gap-analysis/page.test.tsx x1 

 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 46ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  23:30:43
   Duration  302ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/gap-analysis/page.test.tsx x2 

 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 49ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  23:30:43
   Duration  208ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 âœ“ lib/api.test.ts (4 tests) 386ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 1380ms
     âœ“ renders loading state initially  399ms
     âœ“ renders report data successfully  594ms
     âœ“ renders error state on failure  379ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 277ms
 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 1383ms
     âœ“ renders document details and download button  1293ms
 âœ“ app/app/dashboard/page.test.tsx (2 tests) 1466ms
     âœ“ renders documents and standards  907ms
     âœ“ opens analysis modal and runs check  553ms

 Test Files  5 passed (5)
      Tests  13 passed (13)
   Start at  23:41:11
   Duration  23.71s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x11 


â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 2 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:190:0: ERROR: The character "}" is not valid inside a JSX element
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:191:0: ERROR: Unexpected end of file before a closing "div" tag
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:190:0
  
  The character "}" is not valid inside a JSX element
  188 |                  </div>
  189 |                  );
  190 |  }
      |  ^
  191 |  
  
  Unexpected end of file before a closing "div" tag
  189 |                  );
  190 |  }
  191 |  
      |  ^
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  no tests
   Start at  23:41:49
   Duration  69ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x12 


â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 3 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:150:18: ERROR: Unexpected closing "div" tag does not match opening "main" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:158:10: ERROR: Unexpected closing "main" tag does not match opening "div" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:160:8: ERROR: Expected ")" but found "{"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:150:18
  
  Unexpected closing "div" tag does not match opening "main" tag
  148 |                              </div>
  149 |                          </div>
  150 |                  </div>
      |                    ^
  151 |              </div>
  152 |  
  
  Unexpected closing "main" tag does not match opening "div" tag
  156 |              </div>
  157 |          </div>
  158 |          </main >
      |            ^
  159 |  
  160 |          {/* Analysis Modal */ }
  
  Expected ")" but found "{"
  158 |          </main >
  159 |  
  160 |          {/* Analysis Modal */ }
      |          ^
  161 |      {
  162 |          selectedDocId && (
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  no tests
   Start at  23:41:51
   Duration  60ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x13 


â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 3 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:162:18: ERROR: Unexpected closing "div" tag does not match opening "main" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:170:10: ERROR: Unexpected closing "main" tag does not match opening "div" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:172:8: ERROR: Expected ")" but found "{"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:162:18
  
  Unexpected closing "div" tag does not match opening "main" tag
  160 |                              </div>
  161 |                          </div>
  162 |                  </div>
      |                    ^
  163 |              </div>
  164 |  
  
  Unexpected closing "main" tag does not match opening "div" tag
  168 |              </div>
  169 |          </div>
  170 |          </main >
      |            ^
  171 |  
  172 |          {/* Analysis Modal */ }
  
  Expected ")" but found "{"
  170 |          </main >
  171 |  
  172 |          {/* Analysis Modal */ }
      |          ^
  173 |      {
  174 |          selectedDocId && (
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  no tests
   Start at  23:41:53
   Duration  90ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x14 


â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 3 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:164:18: ERROR: Unexpected closing "div" tag does not match opening "main" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:172:10: ERROR: Unexpected closing "main" tag does not match opening "div" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:174:8: ERROR: Expected ")" but found "{"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:164:18
  
  Unexpected closing "div" tag does not match opening "main" tag
  162 |                              </div>
  163 |                          </div>
  164 |                  </div>
      |                    ^
  165 |              </div>
  166 |  
  
  Unexpected closing "main" tag does not match opening "div" tag
  170 |              </div>
  171 |          </div>
  172 |          </main >
      |            ^
  173 |  
  174 |          {/* Analysis Modal */ }
  
  Expected ")" but found "{"
  172 |          </main >
  173 |  
  174 |          {/* Analysis Modal */ }
      |          ^
  175 |      {
  176 |          selectedDocId && (
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  no tests
   Start at  23:41:54
   Duration  59ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x15 


â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 3 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:164:18: ERROR: Unexpected closing "div" tag does not match opening "main" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:172:10: ERROR: Unexpected closing "main" tag does not match opening "div" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:174:8: ERROR: Expected ")" but found "{"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:164:18
  
  Unexpected closing "div" tag does not match opening "main" tag
  162 |                              </div>
  163 |                          </div>
  164 |                  </div>
      |                    ^
  165 |              </div>
  166 |  
  
  Unexpected closing "main" tag does not match opening "div" tag
  170 |              </div>
  171 |          </div>
  172 |          </main >
      |            ^
  173 |  
  174 |          {/* Analysis Modal */ }
  
  Expected ")" but found "{"
  172 |          </main >
  173 |  
  174 |          {/* Analysis Modal */ }
      |          ^
  175 |      {
  176 |          selectedDocId && (
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  no tests
   Start at  23:41:55
   Duration  35ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x16 

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Error: [vitest] No "fetchDashboardStats" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadStats [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/dashboard/page.tsx:41:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/dashboard/page.tsx:36:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Error: [vitest] No "fetchDashboardStats" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadStats [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/dashboard/page.tsx:41:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/dashboard/page.tsx:36:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

 âœ“ app/app/dashboard/page.test.tsx (2 tests) 126ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  23:42:43
   Duration  426ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x17 

 âœ“ app/app/dashboard/page.test.tsx (2 tests) 132ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  23:43:05
   Duration  402ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x18 

 âœ“ app/app/dashboard/page.test.tsx (2 tests) 151ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  23:43:08
   Duration  364ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x19 

 âœ“ app/app/dashboard/page.test.tsx (3 tests) 148ms

 Test Files  1 passed (1)
      Tests  3 passed (3)
   Start at  23:43:10
   Duration  402ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x4 

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
An error occurred in the <DocumentView> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
An error occurred in the <DocumentView> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 2034ms
     Ã— renders document details and download button 1029ms
     Ã— triggers export on button click 1004ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
TestingLibraryElementError: Unable to find an element with the text: Test Document. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:34:15

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
TestingLibraryElementError: Unable to find an element with the text: â¬‡ï¸ Download JSON. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:54:15

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 2 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
ReferenceError: DocumentPreview is not defined
 â¯ DocumentView app/app/documents/[id]/page.tsx:110:30
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/documents/[id]/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "renders document details and download button". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
ReferenceError: DocumentPreview is not defined
 â¯ DocumentView app/app/documents/[id]/page.tsx:110:30
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/documents/[id]/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "triggers export on button click". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  1 failed (1)
      Tests  2 failed (2)
     Errors  2 errors
   Start at  23:55:44
   Duration  2.58s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x5 

 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 1 failed) 1040ms
     Ã— renders document details and download button 1028ms
     âœ“ triggers export on button click 11ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
TestingLibraryElementError: Found multiple elements with the text: Test Document

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h1[39m
  [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h1>[39m

Ignored nodes: comments, script, style
[36m<h3[39m
  [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
  [33mtitle[39m=[32m"Test Document"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h3>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
            [36m>[39m
              [0mTest Document[0m
            [36m</h1>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
            [36m>[39m
              [36m<span>[39m
                [0mUploaded: [0m
                [0m1/1/2023[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
              [36m>[39m
                [0mANALYZED[0m
              [36m</span>[39m
              [36m<button[39m
                [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
              [36m>[39m
                [0mâ¬‡ï¸ Download JSON[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<a[39m
            [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
            [33mhref[39m=[32m"/dashboard"[39m
          [36m>[39m
            [0mâ† Back to Dashboard[0m
          [36m</a>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-[600px]"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                    [33mtitle[39m=[32m"Test Document"[39m
                  [36m>[39m
                    [0mTest Document[0m
                  [36m</h3>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                    [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mrel[39m=[32m"noopener noreferrer"[39m
                    [33mtarget[39m=[32m"_blank"[39m
                  [36m>[39m
                    [0mOpen in new tab[0m
                  [36m</a>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                [36m>[39m
                  [36m<iframe[39m
                    [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                    [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mtitle[39m=[32m"Preview of Test Document"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
              [36m>[39m
                [0mMetadata (JSON)[0m
              [36m</h2>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
              [36m>[39m
                [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-2xl"[39m
                [36m>[39m
                  [0mğŸ›¡ï¸[0m
                [36m</span>[39m
                [0m Compliance Analyst[0m
              [36m</h2>[39m
              [36m<div[39m
                [33mclass[39m=[32m"mb-6"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                [36m>[39m
                  [0mSelect ISO Standard[0m
                [36m</label>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex gap-2"[39m
                [36m>[39m
                  [36m<select[39m
                    [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                  [36m>[39m
                    [36m<option[39m
                      [33mvalue[39m=[32m""[39m
                    [36m>[39m
                      [0m-- Select Standard --[0m
                    [36m</option>[39m
                  [36m</select>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                    [33mdisabled[39m=[32m""[39m
                  [36m>[39m
                    [0mRun Check[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
              [36m>[39m
                [0mTest Document[0m
              [36m</h1>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
              [36m>[39m
                [36m<span>[39m
                  [0mUploaded: [0m
                  [0m1/1/2023[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
                [36m>[39m
                  [0mANALYZED[0m
                [36m</span>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
                [36m>[39m
                  [0mâ¬‡ï¸ Download JSON[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<a[39m
              [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
              [33mhref[39m=[32m"/dashboard"[39m
            [36m>[39m
              [0mâ† Back to Dashboard[0m
            [36m</a>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-[600px]"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                      [33mtitle[39m=[32m"Test Document"[39m
                    [36m>[39m
                      [0mTest Document[0m
                    [36m</h3>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                      [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mrel[39m=[32m"noopener noreferrer"[39m
                      [33mtarget[39m=[32m"_blank"[39m
                    [36m>[39m
                      [0mOpen in new tab[0m
                    [36m</a>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                  [36m>[39m
                    [36m<iframe[39m
                      [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                      [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mtitle[39m=[32m"Preview of Test Document"[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
                [36m>[39m
                  [0mMetadata (JSON)[0m
                [36m</h2>[39m
                [36m<pre[39m
                  [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
                [36m>[39m
                  [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
                [36m</pre>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-2xl"[39m
                  [36m>[39m
                    [0mğŸ›¡ï¸[0m
                  [36m</span>[39m
                  [0m Compliance Analyst[0m
                [36m</h2>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-6"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                  [36m>[39m
                    [0mSelect ISO Standard[0m
                  [36m</label>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex gap-2"[39m
                  [36m>[39m
                    [36m<select[39m
                      [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                    [36m>[39m
                      [36m<option[39m
                        [33mvalue[39m=[32m""[39m
                      [36m>[39m
                        [0m-- Select Standard --[0m
                      [36m</option>[39m
                    [36m</select>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                      [33mdisabled[39m=[32m""[39m
                    [36m>[39m
                      [0mRun Check[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:34:15
     32|         render(<DocumentView />);
     33| 
     34|         await waitFor(() => {
       |               ^
     35|             expect(screen.getByText('Test Document')).toBeDefined();
     36|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  1 failed | 1 passed (2)
   Start at  23:55:47
   Duration  1.32s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.test.tsx x6 

 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 1 failed) 1132ms
     Ã— renders document details and download button 1104ms
     âœ“ triggers export on button click 26ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
TestingLibraryElementError: Found multiple elements with the text: Test Document

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h1[39m
  [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h1>[39m

Ignored nodes: comments, script, style
[36m<h3[39m
  [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
  [33mtitle[39m=[32m"Test Document"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h3>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
            [36m>[39m
              [0mTest Document[0m
            [36m</h1>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
            [36m>[39m
              [36m<span>[39m
                [0mUploaded: [0m
                [0m1/1/2023[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
              [36m>[39m
                [0mANALYZED[0m
              [36m</span>[39m
              [36m<button[39m
                [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
              [36m>[39m
                [0mâ¬‡ï¸ Download JSON[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<a[39m
            [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
            [33mhref[39m=[32m"/dashboard"[39m
          [36m>[39m
            [0mâ† Back to Dashboard[0m
          [36m</a>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-[600px]"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                    [33mtitle[39m=[32m"Test Document"[39m
                  [36m>[39m
                    [0mTest Document[0m
                  [36m</h3>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                    [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mrel[39m=[32m"noopener noreferrer"[39m
                    [33mtarget[39m=[32m"_blank"[39m
                  [36m>[39m
                    [0mOpen in new tab[0m
                  [36m</a>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                [36m>[39m
                  [36m<iframe[39m
                    [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                    [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mtitle[39m=[32m"Preview of Test Document"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
              [36m>[39m
                [0mMetadata (JSON)[0m
              [36m</h2>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
              [36m>[39m
                [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-2xl"[39m
                [36m>[39m
                  [0mğŸ›¡ï¸[0m
                [36m</span>[39m
                [0m Compliance Analyst[0m
              [36m</h2>[39m
              [36m<div[39m
                [33mclass[39m=[32m"mb-6"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                [36m>[39m
                  [0mSelect ISO Standard[0m
                [36m</label>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex gap-2"[39m
                [36m>[39m
                  [36m<select[39m
                    [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                  [36m>[39m
                    [36m<option[39m
                      [33mvalue[39m=[32m""[39m
                    [36m>[39m
                      [0m-- Select Standard --[0m
                    [36m</option>[39m
                  [36m</select>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                    [33mdisabled[39m=[32m""[39m
                  [36m>[39m
                    [0mRun Check[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
              [36m>[39m
                [0mTest Document[0m
              [36m</h1>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
              [36m>[39m
                [36m<span>[39m
                  [0mUploaded: [0m
                  [0m1/1/2023[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
                [36m>[39m
                  [0mANALYZED[0m
                [36m</span>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
                [36m>[39m
                  [0mâ¬‡ï¸ Download JSON[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<a[39m
              [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
              [33mhref[39m=[32m"/dashboard"[39m
            [36m>[39m
              [0mâ† Back to Dashboard[0m
            [36m</a>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-[600px]"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                      [33mtitle[39m=[32m"Test Document"[39m
                    [36m>[39m
                      [0mTest Document[0m
                    [36m</h3>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                      [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mrel[39m=[32m"noopener noreferrer"[39m
                      [33mtarget[39m=[32m"_blank"[39m
                    [36m>[39m
                      [0mOpen in new tab[0m
                    [36m</a>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                  [36m>[39m
                    [36m<iframe[39m
                      [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                      [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mtitle[39m=[32m"Preview of Test Document"[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
                [36m>[39m
                  [0mMetadata (JSON)[0m
                [36m</h2>[39m
                [36m<pre[39m
                  [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
                [36m>[39m
                  [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
                [36m</pre>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-2xl"[39m
                  [36m>[39m
                    [0mğŸ›¡ï¸[0m
                  [36m</span>[39m
                  [0m Compliance Analyst[0m
                [36m</h2>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-6"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                  [36m>[39m
                    [0mSelect ISO Standard[0m
                  [36m</label>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex gap-2"[39m
                  [36m>[39m
                    [36m<select[39m
                      [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                    [36m>[39m
                      [36m<option[39m
                        [33mvalue[39m=[32m""[39m
                      [36m>[39m
                        [0m-- Select Standard --[0m
                      [36m</option>[39m
                    [36m</select>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                      [33mdisabled[39m=[32m""[39m
                    [36m>[39m
                      [0mRun Check[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:34:15
     32|         render(<DocumentView />);
     33| 
     34|         await waitFor(() => {
       |               ^
     35|             expect(screen.getByText('Test Document')).toBeDefined();
     36|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  1 failed | 1 passed (2)
   Start at  23:56:01
   Duration  1.52s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x7 

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
Failed to fetch standards ReferenceError: fetchIsoStandards is not defined
    at loadStandards [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:46:26[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:29:13
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15519:11[90m)[39m
    at flushPassiveEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:18432:9[90m)[39m

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
An error occurred in the <DocumentView> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Failed to fetch standards ReferenceError: fetchIsoStandards is not defined
    at loadStandards [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:46:26[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:29:13
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15519:11[90m)[39m
    at flushPassiveEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:18432:9[90m)[39m

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
An error occurred in the <DocumentView> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 2051ms
     Ã— renders document details and download button 1047ms
     Ã— triggers export on button click 1004ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
TestingLibraryElementError: Unable to find an element with the text: Test Document. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:34:15

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
TestingLibraryElementError: Unable to find an element with the text: â¬‡ï¸ Download JSON. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:55:15

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 2 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
ReferenceError: runComplianceCheck is not defined
 â¯ DocumentView app/app/documents/[id]/page.tsx:136:50
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/documents/[id]/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "renders document details and download button". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
ReferenceError: runComplianceCheck is not defined
 â¯ DocumentView app/app/documents/[id]/page.tsx:136:50
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/documents/[id]/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "triggers export on button click". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  1 failed (1)
      Tests  2 failed (2)
     Errors  2 errors
   Start at  23:57:00
   Duration  2.46s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x8 

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
Failed to fetch standards Error: [vitest] No "fetchIsoStandards" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadStandards [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:46:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:29:13
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
Failed to fetch standards Error: [vitest] No "fetchIsoStandards" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadStandards [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:46:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:29:13
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Failed to fetch standards Error: [vitest] No "fetchIsoStandards" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadStandards [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:46:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:29:13
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Failed to fetch standards Error: [vitest] No "fetchIsoStandards" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadStandards [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:46:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mapp/app/documents/[id]/page.tsx:29:13
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 1 failed) 1037ms
     Ã— renders document details and download button 1024ms
     âœ“ triggers export on button click 11ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
TestingLibraryElementError: Found multiple elements with the text: Test Document

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h1[39m
  [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h1>[39m

Ignored nodes: comments, script, style
[36m<h3[39m
  [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
  [33mtitle[39m=[32m"Test Document"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h3>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
            [36m>[39m
              [0mTest Document[0m
            [36m</h1>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
            [36m>[39m
              [36m<span>[39m
                [0mUploaded: [0m
                [0m1/1/2023[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
              [36m>[39m
                [0mANALYZED[0m
              [36m</span>[39m
              [36m<button[39m
                [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
              [36m>[39m
                [0mâ¬‡ï¸ Download JSON[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<a[39m
            [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
            [33mhref[39m=[32m"/dashboard"[39m
          [36m>[39m
            [0mâ† Back to Dashboard[0m
          [36m</a>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-[600px]"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                    [33mtitle[39m=[32m"Test Document"[39m
                  [36m>[39m
                    [0mTest Document[0m
                  [36m</h3>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                    [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mrel[39m=[32m"noopener noreferrer"[39m
                    [33mtarget[39m=[32m"_blank"[39m
                  [36m>[39m
                    [0mOpen in new tab[0m
                  [36m</a>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                [36m>[39m
                  [36m<iframe[39m
                    [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                    [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mtitle[39m=[32m"Preview of Test Document"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
              [36m>[39m
                [0mMetadata (JSON)[0m
              [36m</h2>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
              [36m>[39m
                [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-2xl"[39m
                [36m>[39m
                  [0mğŸ›¡ï¸[0m
                [36m</span>[39m
                [0m Compliance Analyst[0m
              [36m</h2>[39m
              [36m<div[39m
                [33mclass[39m=[32m"mb-6"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                [36m>[39m
                  [0mSelect ISO Standard[0m
                [36m</label>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex gap-2"[39m
                [36m>[39m
                  [36m<select[39m
                    [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                  [36m>[39m
                    [36m<option[39m
                      [33mvalue[39m=[32m""[39m
                    [36m>[39m
                      [0m-- Select Standard --[0m
                    [36m</option>[39m
                  [36m</select>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                    [33mdisabled[39m=[32m""[39m
                  [36m>[39m
                    [0mRun Check[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
              [36m>[39m
                [0mTest Document[0m
              [36m</h1>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
              [36m>[39m
                [36m<span>[39m
                  [0mUploaded: [0m
                  [0m1/1/2023[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
                [36m>[39m
                  [0mANALYZED[0m
                [36m</span>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
                [36m>[39m
                  [0mâ¬‡ï¸ Download JSON[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<a[39m
              [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
              [33mhref[39m=[32m"/dashboard"[39m
            [36m>[39m
              [0mâ† Back to Dashboard[0m
            [36m</a>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-[600px]"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                      [33mtitle[39m=[32m"Test Document"[39m
                    [36m>[39m
                      [0mTest Document[0m
                    [36m</h3>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                      [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mrel[39m=[32m"noopener noreferrer"[39m
                      [33mtarget[39m=[32m"_blank"[39m
                    [36m>[39m
                      [0mOpen in new tab[0m
                    [36m</a>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                  [36m>[39m
                    [36m<iframe[39m
                      [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                      [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mtitle[39m=[32m"Preview of Test Document"[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
                [36m>[39m
                  [0mMetadata (JSON)[0m
                [36m</h2>[39m
                [36m<pre[39m
                  [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
                [36m>[39m
                  [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
                [36m</pre>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-2xl"[39m
                  [36m>[39m
                    [0mğŸ›¡ï¸[0m
                  [36m</span>[39m
                  [0m Compliance Analyst[0m
                [36m</h2>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-6"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                  [36m>[39m
                    [0mSelect ISO Standard[0m
                  [36m</label>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex gap-2"[39m
                  [36m>[39m
                    [36m<select[39m
                      [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                    [36m>[39m
                      [36m<option[39m
                        [33mvalue[39m=[32m""[39m
                      [36m>[39m
                        [0m-- Select Standard --[0m
                      [36m</option>[39m
                    [36m</select>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                      [33mdisabled[39m=[32m""[39m
                    [36m>[39m
                      [0mRun Check[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:34:15
     32|         render(<DocumentView />);
     33| 
     34|         await waitFor(() => {
       |               ^
     35|             expect(screen.getByText('Test Document')).toBeDefined();
     36|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  1 failed | 1 passed (2)
   Start at  23:57:03
   Duration  1.31s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.test.tsx x9 

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
An error occurred in the <DocumentView> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
An error occurred in the <DocumentView> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 2020ms
     Ã— renders document details and download button 1013ms
     Ã— triggers export on button click 1003ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
TestingLibraryElementError: Unable to find an element with the text: Test Document. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:36:15

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
TestingLibraryElementError: Unable to find an element with the text: â¬‡ï¸ Download JSON. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:57:15

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 2 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'map')
 â¯ DocumentView app/app/documents/[id]/page.tsx:131:52
    129|                                     >
    130|                                         <option value="">-- Select Staâ€¦
    131|                                         {standards.map(std => (
       |                                                    ^
    132|                                             <option key={std.id} valueâ€¦
    133|                                         ))}
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/documents/[id]/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "renders document details and download button". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'map')
 â¯ DocumentView app/app/documents/[id]/page.tsx:131:52
    129|                                     >
    130|                                         <option value="">-- Select Staâ€¦
    131|                                         {standards.map(std => (
       |                                                    ^
    132|                                             <option key={std.id} valueâ€¦
    133|                                         ))}
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/documents/[id]/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "triggers export on button click". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  1 failed (1)
      Tests  2 failed (2)
     Errors  2 errors
   Start at  23:57:15
   Duration  2.36s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.test.tsx x10 

stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
An error occurred in the <DocumentView> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
An error occurred in the <DocumentView> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 2020ms
     Ã— renders document details and download button 1017ms
     Ã— triggers export on button click 1002ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
TestingLibraryElementError: Unable to find an element with the text: Test Document. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:36:15
     34|         render(<DocumentView />);
     35| 
     36|         await waitFor(() => {
       |               ^
     37|             expect(screen.getByText('Test Document')).toBeDefined();
     38|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
TestingLibraryElementError: Unable to find an element with the text: â¬‡ï¸ Download JSON. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:57:15
     55|         render(<DocumentView />);
     56| 
     57|         await waitFor(() => {
       |               ^
     58|             expect(screen.getByText('â¬‡ï¸ Download JSON')).toBeDefined();
     59|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 2 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'map')
 â¯ DocumentView app/app/documents/[id]/page.tsx:131:52
    129|                                     >
    130|                                         <option value="">-- Select Staâ€¦
    131|                                         {standards.map(std => (
       |                                                    ^
    132|                                             <option key={std.id} valueâ€¦
    133|                                         ))}
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/documents/[id]/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "renders document details and download button". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'map')
 â¯ DocumentView app/app/documents/[id]/page.tsx:131:52
    129|                                     >
    130|                                         <option value="">-- Select Staâ€¦
    131|                                         {standards.map(std => (
       |                                                    ^
    132|                                             <option key={std.id} valueâ€¦
    133|                                         ))}
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/documents/[id]/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "triggers export on button click". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  1 failed (1)
      Tests  2 failed (2)
     Errors  2 errors
   Start at  23:57:18
   Duration  2.29s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.test.tsx x11 

 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 1 failed) 1058ms
     Ã— renders document details and download button 1043ms
     âœ“ triggers export on button click 10ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
TestingLibraryElementError: Found multiple elements with the text: Test Document

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h1[39m
  [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h1>[39m

Ignored nodes: comments, script, style
[36m<h3[39m
  [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
  [33mtitle[39m=[32m"Test Document"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h3>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
            [36m>[39m
              [0mTest Document[0m
            [36m</h1>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
            [36m>[39m
              [36m<span>[39m
                [0mUploaded: [0m
                [0m1/1/2023[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
              [36m>[39m
                [0mANALYZED[0m
              [36m</span>[39m
              [36m<button[39m
                [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
              [36m>[39m
                [0mâ¬‡ï¸ Download JSON[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<a[39m
            [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
            [33mhref[39m=[32m"/dashboard"[39m
          [36m>[39m
            [0mâ† Back to Dashboard[0m
          [36m</a>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-[600px]"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                    [33mtitle[39m=[32m"Test Document"[39m
                  [36m>[39m
                    [0mTest Document[0m
                  [36m</h3>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                    [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mrel[39m=[32m"noopener noreferrer"[39m
                    [33mtarget[39m=[32m"_blank"[39m
                  [36m>[39m
                    [0mOpen in new tab[0m
                  [36m</a>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                [36m>[39m
                  [36m<iframe[39m
                    [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                    [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mtitle[39m=[32m"Preview of Test Document"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
              [36m>[39m
                [0mMetadata (JSON)[0m
              [36m</h2>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
              [36m>[39m
                [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-2xl"[39m
                [36m>[39m
                  [0mğŸ›¡ï¸[0m
                [36m</span>[39m
                [0m Compliance Analyst[0m
              [36m</h2>[39m
              [36m<div[39m
                [33mclass[39m=[32m"mb-6"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                [36m>[39m
                  [0mSelect ISO Standard[0m
                [36m</label>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex gap-2"[39m
                [36m>[39m
                  [36m<select[39m
                    [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                  [36m>[39m
                    [36m<option[39m
                      [33mvalue[39m=[32m""[39m
                    [36m>[39m
                      [0m-- Select Standard --[0m
                    [36m</option>[39m
                  [36m</select>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                    [33mdisabled[39m=[32m""[39m
                  [36m>[39m
                    [0mRun Check[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
              [36m>[39m
                [0mTest Document[0m
              [36m</h1>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
              [36m>[39m
                [36m<span>[39m
                  [0mUploaded: [0m
                  [0m1/1/2023[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
                [36m>[39m
                  [0mANALYZED[0m
                [36m</span>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
                [36m>[39m
                  [0mâ¬‡ï¸ Download JSON[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<a[39m
              [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
              [33mhref[39m=[32m"/dashboard"[39m
            [36m>[39m
              [0mâ† Back to Dashboard[0m
            [36m</a>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-[600px]"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                      [33mtitle[39m=[32m"Test Document"[39m
                    [36m>[39m
                      [0mTest Document[0m
                    [36m</h3>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                      [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mrel[39m=[32m"noopener noreferrer"[39m
                      [33mtarget[39m=[32m"_blank"[39m
                    [36m>[39m
                      [0mOpen in new tab[0m
                    [36m</a>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                  [36m>[39m
                    [36m<iframe[39m
                      [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                      [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mtitle[39m=[32m"Preview of Test Document"[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
                [36m>[39m
                  [0mMetadata (JSON)[0m
                [36m</h2>[39m
                [36m<pre[39m
                  [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
                [36m>[39m
                  [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
                [36m</pre>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-2xl"[39m
                  [36m>[39m
                    [0mğŸ›¡ï¸[0m
                  [36m</span>[39m
                  [0m Compliance Analyst[0m
                [36m</h2>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-6"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                  [36m>[39m
                    [0mSelect ISO Standard[0m
                  [36m</label>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex gap-2"[39m
                  [36m>[39m
                    [36m<select[39m
                      [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                    [36m>[39m
                      [36m<option[39m
                        [33mvalue[39m=[32m""[39m
                      [36m>[39m
                        [0m-- Select Standard --[0m
                      [36m</option>[39m
                    [36m</select>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                      [33mdisabled[39m=[32m""[39m
                    [36m>[39m
                      [0mRun Check[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:37:15
     35|         render(<DocumentView />);
     36| 
     37|         await waitFor(() => {
       |               ^
     38|             expect(screen.getByText('Test Document')).toBeDefined();
     39|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  1 failed | 1 passed (2)
   Start at  23:57:43
   Duration  1.58s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x12 

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
loadDocument called with doc-1

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
fetchDocument resolved {
  id: [32m'doc-1'[39m,
  title: [32m'Test Document'[39m,
  status: [32m'ANALYZED'[39m,
  createdAt: [32m'2023-01-01T00:00:00Z'[39m
}
setLoading false

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
loadDocument called with doc-1

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
fetchDocument resolved {
  id: [32m'doc-1'[39m,
  title: [32m'Test Document'[39m,
  status: [32m'ANALYZED'[39m,
  createdAt: [32m'2023-01-01T00:00:00Z'[39m
}
setLoading false

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
loadDocument called with doc-1

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
fetchDocument resolved {
  id: [32m'doc-1'[39m,
  title: [32m'Test Document'[39m,
  status: [32m'ANALYZED'[39m,
  createdAt: [32m'2023-01-01T00:00:00Z'[39m
}
setLoading false

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
loadDocument called with doc-1

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
fetchDocument resolved {
  id: [32m'doc-1'[39m,
  title: [32m'Test Document'[39m,
  status: [32m'ANALYZED'[39m,
  createdAt: [32m'2023-01-01T00:00:00Z'[39m
}
setLoading false

 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 1 failed) 1070ms
     Ã— renders document details and download button 1050ms
     âœ“ triggers export on button click 18ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
TestingLibraryElementError: Found multiple elements with the text: Test Document

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h1[39m
  [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h1>[39m

Ignored nodes: comments, script, style
[36m<h3[39m
  [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
  [33mtitle[39m=[32m"Test Document"[39m
[36m>[39m
  [0mTest Document[0m
[36m</h3>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
            [36m>[39m
              [0mTest Document[0m
            [36m</h1>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
            [36m>[39m
              [36m<span>[39m
                [0mUploaded: [0m
                [0m1/1/2023[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
              [36m>[39m
                [0mANALYZED[0m
              [36m</span>[39m
              [36m<button[39m
                [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
              [36m>[39m
                [0mâ¬‡ï¸ Download JSON[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<a[39m
            [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
            [33mhref[39m=[32m"/dashboard"[39m
          [36m>[39m
            [0mâ† Back to Dashboard[0m
          [36m</a>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"h-[600px]"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                    [33mtitle[39m=[32m"Test Document"[39m
                  [36m>[39m
                    [0mTest Document[0m
                  [36m</h3>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                    [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mrel[39m=[32m"noopener noreferrer"[39m
                    [33mtarget[39m=[32m"_blank"[39m
                  [36m>[39m
                    [0mOpen in new tab[0m
                  [36m</a>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                [36m>[39m
                  [36m<iframe[39m
                    [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                    [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                    [33mtitle[39m=[32m"Preview of Test Document"[39m
                  [36m/>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
              [36m>[39m
                [0mMetadata (JSON)[0m
              [36m</h2>[39m
              [36m<pre[39m
                [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
              [36m>[39m
                [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
              [36m</pre>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
            [36m>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"text-2xl"[39m
                [36m>[39m
                  [0mğŸ›¡ï¸[0m
                [36m</span>[39m
                [0m Compliance Analyst[0m
              [36m</h2>[39m
              [36m<div[39m
                [33mclass[39m=[32m"mb-6"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                [36m>[39m
                  [0mSelect ISO Standard[0m
                [36m</label>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex gap-2"[39m
                [36m>[39m
                  [36m<select[39m
                    [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                  [36m>[39m
                    [36m<option[39m
                      [33mvalue[39m=[32m""[39m
                    [36m>[39m
                      [0m-- Select Standard --[0m
                    [36m</option>[39m
                  [36m</select>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                    [33mdisabled[39m=[32m""[39m
                  [36m>[39m
                    [0mRun Check[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-6xl mx-auto bg-white rounded-lg shadow p-6"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"mb-8 border-b pb-4 flex justify-between items-start"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
              [36m>[39m
                [0mTest Document[0m
              [36m</h1>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-4 text-sm text-gray-500"[39m
              [36m>[39m
                [36m<span>[39m
                  [0mUploaded: [0m
                  [0m1/1/2023[0m
                [36m</span>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"[39m
                [36m>[39m
                  [0mANALYZED[0m
                [36m</span>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"text-sm text-blue-600 hover:underline flex items-center gap-1"[39m
                [36m>[39m
                  [0mâ¬‡ï¸ Download JSON[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<a[39m
              [33mclass[39m=[32m"text-blue-600 hover:text-blue-800 text-sm"[39m
              [33mhref[39m=[32m"/dashboard"[39m
            [36m>[39m
              [0mâ† Back to Dashboard[0m
            [36m</a>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-2 gap-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"h-[600px]"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"h-full flex flex-col bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-4 py-2 border-b border-gray-200 bg-gray-50 flex justify-between items-center"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"font-medium text-gray-700 truncate"[39m
                      [33mtitle[39m=[32m"Test Document"[39m
                    [36m>[39m
                      [0mTest Document[0m
                    [36m</h3>[39m
                    [36m<a[39m
                      [33mclass[39m=[32m"text-xs text-blue-600 hover:underline"[39m
                      [33mhref[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mrel[39m=[32m"noopener noreferrer"[39m
                      [33mtarget[39m=[32m"_blank"[39m
                    [36m>[39m
                      [0mOpen in new tab[0m
                    [36m</a>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 bg-gray-100 relative"[39m
                  [36m>[39m
                    [36m<iframe[39m
                      [33mclass[39m=[32m"absolute inset-0 w-full h-full"[39m
                      [33msrc[39m=[32m"http://localhost:3002/documents/doc-1/content"[39m
                      [33mtitle[39m=[32m"Preview of Test Document"[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-4 bg-gray-50"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4"[39m
                [36m>[39m
                  [0mMetadata (JSON)[0m
                [36m</h2>[39m
                [36m<pre[39m
                  [33mclass[39m=[32m"bg-gray-900 text-green-400 p-4 rounded overflow-auto text-sm font-mono max-h-60"[39m
                [36m>[39m
                  [0m{
  "id": "doc-1",
  "title": "Test Document",
  "status": "ANALYZED",
  "createdAt": "2023-01-01T00:00:00Z"
}[0m
                [36m</pre>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"border rounded-lg p-6 bg-white shadow-sm border-blue-100"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold mb-4 flex items-center gap-2"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-2xl"[39m
                  [36m>[39m
                    [0mğŸ›¡ï¸[0m
                  [36m</span>[39m
                  [0m Compliance Analyst[0m
                [36m</h2>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mb-6"[39m
                [36m>[39m
                  [36m<label[39m
                    [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                  [36m>[39m
                    [0mSelect ISO Standard[0m
                  [36m</label>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex gap-2"[39m
                  [36m>[39m
                    [36m<select[39m
                      [33mclass[39m=[32m"flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"[39m
                    [36m>[39m
                      [36m<option[39m
                        [33mvalue[39m=[32m""[39m
                      [36m>[39m
                        [0m-- Select Standard --[0m
                      [36m</option>[39m
                    [36m</select>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors opacity-50 cursor-not-allowed"[39m
                      [33mdisabled[39m=[32m""[39m
                    [36m>[39m
                      [0mRun Check[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/documents/[id]/page.test.tsx:37:15
     35|         render(<DocumentView />);
     36| 
     37|         await waitFor(() => {
       |               ^
     38|             expect(screen.getByText('Test Document')).toBeDefined();
     39|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  1 failed | 1 passed (2)
   Start at  23:58:32
   Duration  2.45s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.test.tsx x13 

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
loadDocument called with doc-1

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
fetchDocument resolved {
  id: [32m'doc-1'[39m,
  title: [32m'Test Document'[39m,
  status: [32m'ANALYZED'[39m,
  createdAt: [32m'2023-01-01T00:00:00Z'[39m
}
setLoading false

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
loadDocument called with doc-1

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
fetchDocument resolved {
  id: [32m'doc-1'[39m,
  title: [32m'Test Document'[39m,
  status: [32m'ANALYZED'[39m,
  createdAt: [32m'2023-01-01T00:00:00Z'[39m
}
setLoading false

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
loadDocument called with doc-1

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
fetchDocument resolved {
  id: [32m'doc-1'[39m,
  title: [32m'Test Document'[39m,
  status: [32m'ANALYZED'[39m,
  createdAt: [32m'2023-01-01T00:00:00Z'[39m
}
setLoading false

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
loadDocument called with doc-1

stdout | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
fetchDocument resolved {
  id: [32m'doc-1'[39m,
  title: [32m'Test Document'[39m,
  status: [32m'ANALYZED'[39m,
  createdAt: [32m'2023-01-01T00:00:00Z'[39m
}
setLoading false

 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 439ms
     âœ“ renders document details and download button  414ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  23:59:37
   Duration  1.03s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x14 

 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 731ms
     âœ“ renders document details and download button  694ms

 Test Files  1 passed (1)
      Tests  2 passed (2)
   Start at  00:00:04
   Duration  1.22s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 âœ“ lib/api.test.ts (4 tests) 194ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 393ms
     âœ“ renders and loads standards  321ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 260ms
 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 835ms
     âœ“ renders document details and download button  807ms
 âœ“ app/app/dashboard/page.test.tsx (3 tests) 201ms

 Test Files  5 passed (5)
      Tests  14 passed (14)
   Start at  00:06:27
   Duration  21.28s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x21 

 âœ“ app/app/dashboard/page.test.tsx (3 tests) 224ms

 Test Files  1 passed (1)
      Tests  3 passed (3)
   Start at  00:06:50
   Duration  668ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x22 

 âœ“ app/app/dashboard/page.test.tsx (3 tests) 189ms

 Test Files  1 passed (1)
      Tests  3 passed (3)
   Start at  00:06:52
   Duration  638ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/SearchBar.tsx x23 

 â¯ app/app/dashboard/page.test.tsx (3 tests | 3 failed) 57ms
     Ã— renders documents and standards 52ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
ReferenceError: useEffect is not defined
 â¯ SearchBar app/components/SearchBar.tsx:11:5
      9|     const router = useRouter();
     10| 
     11|     useEffect(() => {
       |     ^
     12|         const delayDebounceFn = setTimeout(() => {
     13|             if (query.trim()) {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯


 Test Files  1 failed (1)
      Tests  3 failed (3)
   Start at  00:08:37
   Duration  519ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/SearchBar.tsx x24 

 â¯ app/app/dashboard/page.test.tsx (3 tests | 3 failed) 17ms
     Ã— renders documents and standards 12ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
ReferenceError: useEffect is not defined
 â¯ SearchBar app/components/SearchBar.tsx:11:5
      9|     const router = useRouter();
     10| 
     11|     useEffect(() => {
       |     ^
     12|         const delayDebounceFn = setTimeout(() => {
     13|             if (query.trim()) {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯


 Test Files  1 failed (1)
      Tests  3 failed (3)
   Start at  00:08:39
   Duration  350ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/SearchBar.tsx x25 

 âœ“ app/app/dashboard/page.test.tsx (3 tests) 182ms

 Test Files  1 passed (1)
      Tests  3 passed (3)
   Start at  00:08:41
   Duration  438ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x26 

 â¯ app/app/dashboard/page.test.tsx (3 tests | 3 failed) 16ms
     Ã— renders documents and standards 11ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
ReferenceError: Sidebar is not defined
 â¯ Dashboard app/app/dashboard/page.tsx:95:14
     93|     return (
     94|         <div className="flex min-h-screen bg-gray-50">
     95|             <Sidebar />
       |              ^
     96| 
     97|             <div className="flex-1 flex flex-col">
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯


 Test Files  1 failed (1)
      Tests  3 failed (3)
   Start at  00:11:09
   Duration  1.08s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x27 

 â¯ app/app/dashboard/page.test.tsx (3 tests | 3 failed) 22ms
     Ã— renders documents and standards 14ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Error: [vitest] No "usePathname" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ Sidebar app/components/Sidebar.tsx:6:22
      4| 
      5| export default function Sidebar() {
      6|     const pathname = usePathname();
       |                      ^
      7| 
      8|     const menuItems = [
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯


 Test Files  1 failed (1)
      Tests  3 failed (3)
   Start at  00:11:12
   Duration  651ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x28 

 â¯ app/app/dashboard/page.test.tsx (3 tests | 3 failed) 18ms
     Ã— renders documents and standards 14ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Error: [vitest] No "usePathname" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ Sidebar app/components/Sidebar.tsx:6:22
      4| 
      5| export default function Sidebar() {
      6|     const pathname = usePathname();
       |                      ^
      7| 
      8|     const menuItems = [
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯


 Test Files  1 failed (1)
      Tests  3 failed (3)
   Start at  00:11:30
   Duration  718ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x29 

 â¯ app/app/dashboard/page.test.tsx (3 tests | 1 failed) 1161ms
     âœ“ renders documents and standards 130ms
     âœ“ renders dashboard widgets 22ms
     Ã— opens analysis modal and runs check 1008ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
TestingLibraryElementError: Unable to find an element with the text: Analyze. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
            [36m>[39m
              [0mğŸ””[0m
            [36m</button>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mTotal Documents[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0m10[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAnalyzed[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                [36m>[39m
                  [0m5[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAvg. Compliance Score[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                [36m>[39m
                  [0m85[0m
                  [0m%[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr[39m
                          [33mclass[39m=[32m"hover:bg-gray-50 transition-colors"[39m
                        [36m>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex items-center"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex-shrink-0 h-10 w-10 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</div>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"ml-4"[39m
                              [36m>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                                [36m>[39m
                                  [0mDoc 1[0m
                                [36m</div>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                                [36m>[39m
                                  [0mID: [0m
                                  [0m1[0m
                                [36m</div>[39m
                              [36m</div>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                          [36m>[39m
                            [36m<span[39m
                              [33mclass[39m=[32m"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"[39m
                            [36m>[39m
                              [0mPENDING[0m
                            [36m</span>[39m
                          [36m</td>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                          [36m>[39m
                            [0m1/1/2023[0m
                          [36m</td>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex justify-end gap-3"[39m
                            [36m>[39m
                              [36m<a[39m
                                [33mclass[39m=[32m"text-gray-400 hover:text-blue-600 transition-colors"[39m
                                [33mhref[39m=[32m"/app/documents/1"[39m
                                [33mtitle[39m=[32m"View"[39m
                              [36m>[39m
                                [0mğŸ‘ï¸[0m
                              [36m</a>[39m
                              [36m<button[39m
                                [33mclass[39m=[32m"text-gray-400 hover:text-green-600 transition-colors"[39m
                                [33mtitle[39m=[32m"Analyze"[39m
                              [36m>[39m
                                [0mâš¡ï¸[0m
                              [36m</button>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                    [36m>[39m
                      [0mRecent Activity[0m
                    [36m</h3>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"text-xs text-gray-500"[39m
                        [36m>[39m
                          [0mUpdated: [0m
                          [0m1/1/2023[0m
                        [36m</div>[39m
                      [36m</div>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                      [36m>[39m
                        [0mANALYZED[0m
                      [36m</span>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<aside[39m
          [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
          [36m>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
            [36m>[39m
              [36m<span>[39m
                [0mğŸ›¡ï¸[0m
              [36m</span>[39m
              [0m ISO Doc[0m
            [36m</h1>[39m
          [36m</div>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
          [36m>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
              [33mhref[39m=[32m"/app/dashboard"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“Š[0m
              [36m</span>[39m
              [0mDashboard[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/documents"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“[0m
              [36m</span>[39m
              [0mDocuments[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/gap-analysis"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ”[0m
              [36m</span>[39m
              [0mGap Analysis[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/reports"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“‹[0m
              [36m</span>[39m
              [0mReports[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/settings"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mâš™ï¸[0m
              [36m</span>[39m
              [0mSettings[0m
            [36m</a>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
            [36m>[39m
              [36m<h4[39m
                [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
              [36m>[39m
                [0mPro Plan[0m
              [36m</h4>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
              [36m>[39m
                [0mGet access to advanced AI features.[0m
              [36m</p>[39m
              [36m<button[39m
                [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
              [36m>[39m
                [0mUpgrade Now[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</aside>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex-1 flex flex-col"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
              [36m>[39m
                [0mDashboard[0m
              [36m</h2>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500"[39m
              [36m>[39m
                [0mWelcome back, User[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-1/3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative w-full max-w-xl"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"relative"[39m
                [36m>[39m
                  [36m<input[39m
                    [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                    [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                    [33mtype[39m=[32m"text"[39m
                    [33mvalue[39m=[32m""[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-gray-400"[39m
                    [36m>[39m
                      [0mğŸ”[0m
                    [36m</span>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSearch[0m
                  [36m</button>[39m
                [36m</form>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
              [36m>[39m
                [0mU[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</header>[39m
          [36m<main[39m
            [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mTotal Documents[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                  [36m>[39m
                    [0m10[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAnalyzed[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAvg. Compliance Score[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                  [36m>[39m
                    [0m85[0m
                    [0m%[0m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<h3[39m
                          [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                        [36m>[39m
                          [0mRecent Documents[0m
                        [36m</h3>[39m
                        [36m<p[39m
                          [33mclass[39m=[32m"text-sm text-gray-500"[39m
                        [36m>[39m
                          [0mManage and analyze your files[0m
                        [36m</p>[39m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative"[39m
                      [36m>[39m
                        [36m<input[39m
                          [33mclass[39m=[32m"hidden"[39m
                          [33mid[39m=[32m"file-upload"[39m
                          [33mtype[39m=[32m"file"[39m
                        [36m/>[39m
                        [36m<label[39m
                          [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                          [33mfor[39m=[32m"file-upload"[39m
                        [36m>[39m
                          [36m<span>[39m
                            [0mâ˜ï¸[0m
                          [36m</span>[39m
                          [0mUpload New[0m
                        [36m</label>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"overflow-x-auto"[39m
                    [36m>[39m
                      [36m<table[39m
                        [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<thead[39m
                          [33mclass[39m=[32m"bg-gray-50"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDocument[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mStatus[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDate[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mActions[0m
                            [36m</th>[39m
                          [36m</tr>[39m
                        [36m</thead>[39m
                        [36m<tbody[39m
                          [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                        [36m>[39m
                          [36m<tr[39m
                            [33mclass[39m=[32m"hover:bg-gray-50 transition-colors"[39m
                          [36m>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex items-center"[39m
                              [36m>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"flex-shrink-0 h-10 w-10 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600"[39m
                                [36m>[39m
                                  [0mğŸ“„[0m
                                [36m</div>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"ml-4"[39m
                                [36m>[39m
                                  [36m<div[39m
                                    [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                                  [36m>[39m
                                    [0mDoc 1[0m
                                  [36m</div>[39m
                                  [36m<div[39m
                                    [33mclass[39m=[32m"text-xs text-gray-500"[39m
                                  [36m>[39m
                                    [0mID: [0m
                                    [0m1[0m
                                  [36m</div>[39m
                                [36m</div>[39m
                              [36m</div>[39m
                            [36m</td>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"[39m
                              [36m>[39m
                                [0mPENDING[0m
                              [36m</span>[39m
                            [36m</td>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                            [36m>[39m
                              [0m1/1/2023[0m
                            [36m</td>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex justify-end gap-3"[39m
                              [36m>[39m
                                [36m<a[39m
                                  [33mclass[39m=[32m"text-gray-400 hover:text-blue-600 transition-colors"[39m
                                  [33mhref[39m=[32m"/app/documents/1"[39m
                                  [33mtitle[39m=[32m"View"[39m
                                [36m>[39m
                                  [0mğŸ‘ï¸[0m
                                [36m</a>[39m
                                [36m<button[39m
                                  [33mclass[39m=[32m"text-gray-400 hover:text-green-600 transition-colors"[39m
                                  [33mtitle[39m=[32m"Analyze"[39m
                                [36m>[39m
                                  [0mâš¡ï¸[0m
                                [36m</button>[39m
                              [36m</div>[39m
                            [36m</td>[39m
                          [36m</tr>[39m
                        [36m</tbody>[39m
                      [36m</table>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-8"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Activity[0m
                      [36m</h3>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                      [36m>[39m
                        [36m<div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"font-medium text-gray-900"[39m
                          [36m>[39m
                            [0mDoc 1[0m
                          [36m</div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"text-xs text-gray-500"[39m
                          [36m>[39m
                            [0mUpdated: [0m
                            [0m1/1/2023[0m
                          [36m</div>[39m
                        [36m</div>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                        [36m>[39m
                          [0mANALYZED[0m
                        [36m</span>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                    [36m>[39m
                      [0mNeed Help?[0m
                    [36m</h3>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                    [36m>[39m
                      [0mAsk our AI Auditor anything about your compliance status.[0m
                    [36m</p>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                    [36m>[39m
                      [0mStart Chat[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</main>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:86:15
     84|         render(<Dashboard />);
     85| 
     86|         await waitFor(() => {
       |               ^
     87|             expect(screen.getByText('Analyze')).toBeDefined();
     88|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  1 failed | 2 passed (3)
   Start at  00:11:32
   Duration  1.83s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x30 

 â¯ app/app/dashboard/page.test.tsx (3 tests | 1 failed) 1269ms
     âœ“ renders documents and standards 204ms
     âœ“ renders dashboard widgets 51ms
     Ã— opens analysis modal and runs check 1013ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
TestingLibraryElementError: Unable to find an element with the text: Analyze. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
            [36m>[39m
              [0mğŸ””[0m
            [36m</button>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mTotal Documents[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0m10[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAnalyzed[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                [36m>[39m
                  [0m5[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAvg. Compliance Score[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                [36m>[39m
                  [0m85[0m
                  [0m%[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr[39m
                          [33mclass[39m=[32m"hover:bg-gray-50 transition-colors"[39m
                        [36m>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex items-center"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex-shrink-0 h-10 w-10 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</div>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"ml-4"[39m
                              [36m>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                                [36m>[39m
                                  [0mDoc 1[0m
                                [36m</div>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                                [36m>[39m
                                  [0mID: [0m
                                  [0m1[0m
                                [36m</div>[39m
                              [36m</div>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                          [36m>[39m
                            [36m<span[39m
                              [33mclass[39m=[32m"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"[39m
                            [36m>[39m
                              [0mPENDING[0m
                            [36m</span>[39m
                          [36m</td>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                          [36m>[39m
                            [0m1/1/2023[0m
                          [36m</td>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex justify-end gap-3"[39m
                            [36m>[39m
                              [36m<a[39m
                                [33mclass[39m=[32m"text-gray-400 hover:text-blue-600 transition-colors"[39m
                                [33mhref[39m=[32m"/app/documents/1"[39m
                                [33mtitle[39m=[32m"View"[39m
                              [36m>[39m
                                [0mğŸ‘ï¸[0m
                              [36m</a>[39m
                              [36m<button[39m
                                [33mclass[39m=[32m"text-gray-400 hover:text-green-600 transition-colors"[39m
                                [33mtitle[39m=[32m"Analyze"[39m
                              [36m>[39m
                                [0mâš¡ï¸[0m
                              [36m</button>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                    [36m>[39m
                      [0mRecent Activity[0m
                    [36m</h3>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"text-xs text-gray-500"[39m
                        [36m>[39m
                          [0mUpdated: [0m
                          [0m1/1/2023[0m
                        [36m</div>[39m
                      [36m</div>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                      [36m>[39m
                        [0mANALYZED[0m
                      [36m</span>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<aside[39m
          [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
          [36m>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
            [36m>[39m
              [36m<span>[39m
                [0mğŸ›¡ï¸[0m
              [36m</span>[39m
              [0m ISO Doc[0m
            [36m</h1>[39m
          [36m</div>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
          [36m>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
              [33mhref[39m=[32m"/app/dashboard"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“Š[0m
              [36m</span>[39m
              [0mDashboard[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/documents"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“[0m
              [36m</span>[39m
              [0mDocuments[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/gap-analysis"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ”[0m
              [36m</span>[39m
              [0mGap Analysis[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/reports"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“‹[0m
              [36m</span>[39m
              [0mReports[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/settings"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mâš™ï¸[0m
              [36m</span>[39m
              [0mSettings[0m
            [36m</a>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
            [36m>[39m
              [36m<h4[39m
                [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
              [36m>[39m
                [0mPro Plan[0m
              [36m</h4>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
              [36m>[39m
                [0mGet access to advanced AI features.[0m
              [36m</p>[39m
              [36m<button[39m
                [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
              [36m>[39m
                [0mUpgrade Now[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</aside>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex-1 flex flex-col"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
              [36m>[39m
                [0mDashboard[0m
              [36m</h2>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500"[39m
              [36m>[39m
                [0mWelcome back, User[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-1/3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative w-full max-w-xl"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"relative"[39m
                [36m>[39m
                  [36m<input[39m
                    [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                    [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                    [33mtype[39m=[32m"text"[39m
                    [33mvalue[39m=[32m""[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-gray-400"[39m
                    [36m>[39m
                      [0mğŸ”[0m
                    [36m</span>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSearch[0m
                  [36m</button>[39m
                [36m</form>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
              [36m>[39m
                [0mU[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</header>[39m
          [36m<main[39m
            [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mTotal Documents[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                  [36m>[39m
                    [0m10[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAnalyzed[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAvg. Compliance Score[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                  [36m>[39m
                    [0m85[0m
                    [0m%[0m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<h3[39m
                          [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                        [36m>[39m
                          [0mRecent Documents[0m
                        [36m</h3>[39m
                        [36m<p[39m
                          [33mclass[39m=[32m"text-sm text-gray-500"[39m
                        [36m>[39m
                          [0mManage and analyze your files[0m
                        [36m</p>[39m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative"[39m
                      [36m>[39m
                        [36m<input[39m
                          [33mclass[39m=[32m"hidden"[39m
                          [33mid[39m=[32m"file-upload"[39m
                          [33mtype[39m=[32m"file"[39m
                        [36m/>[39m
                        [36m<label[39m
                          [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                          [33mfor[39m=[32m"file-upload"[39m
                        [36m>[39m
                          [36m<span>[39m
                            [0mâ˜ï¸[0m
                          [36m</span>[39m
                          [0mUpload New[0m
                        [36m</label>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"overflow-x-auto"[39m
                    [36m>[39m
                      [36m<table[39m
                        [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<thead[39m
                          [33mclass[39m=[32m"bg-gray-50"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDocument[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mStatus[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDate[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mActions[0m
                            [36m</th>[39m
                          [36m</tr>[39m
                        [36m</thead>[39m
                        [36m<tbody[39m
                          [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                        [36m>[39m
                          [36m<tr[39m
                            [33mclass[39m=[32m"hover:bg-gray-50 transition-colors"[39m
                          [36m>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex items-center"[39m
                              [36m>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"flex-shrink-0 h-10 w-10 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600"[39m
                                [36m>[39m
                                  [0mğŸ“„[0m
                                [36m</div>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"ml-4"[39m
                                [36m>[39m
                                  [36m<div[39m
                                    [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                                  [36m>[39m
                                    [0mDoc 1[0m
                                  [36m</div>[39m
                                  [36m<div[39m
                                    [33mclass[39m=[32m"text-xs text-gray-500"[39m
                                  [36m>[39m
                                    [0mID: [0m
                                    [0m1[0m
                                  [36m</div>[39m
                                [36m</div>[39m
                              [36m</div>[39m
                            [36m</td>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"[39m
                              [36m>[39m
                                [0mPENDING[0m
                              [36m</span>[39m
                            [36m</td>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                            [36m>[39m
                              [0m1/1/2023[0m
                            [36m</td>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex justify-end gap-3"[39m
                              [36m>[39m
                                [36m<a[39m
                                  [33mclass[39m=[32m"text-gray-400 hover:text-blue-600 transition-colors"[39m
                                  [33mhref[39m=[32m"/app/documents/1"[39m
                                  [33mtitle[39m=[32m"View"[39m
                                [36m>[39m
                                  [0mğŸ‘ï¸[0m
                                [36m</a>[39m
                                [36m<button[39m
                                  [33mclass[39m=[32m"text-gray-400 hover:text-green-600 transition-colors"[39m
                                  [33mtitle[39m=[32m"Analyze"[39m
                                [36m>[39m
                                  [0mâš¡ï¸[0m
                                [36m</button>[39m
                              [36m</div>[39m
                            [36m</td>[39m
                          [36m</tr>[39m
                        [36m</tbody>[39m
                      [36m</table>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-8"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Activity[0m
                      [36m</h3>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                      [36m>[39m
                        [36m<div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"font-medium text-gray-900"[39m
                          [36m>[39m
                            [0mDoc 1[0m
                          [36m</div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"text-xs text-gray-500"[39m
                          [36m>[39m
                            [0mUpdated: [0m
                            [0m1/1/2023[0m
                          [36m</div>[39m
                        [36m</div>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                        [36m>[39m
                          [0mANALYZED[0m
                        [36m</span>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                    [36m>[39m
                      [0mNeed Help?[0m
                    [36m</h3>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                    [36m>[39m
                      [0mAsk our AI Auditor anything about your compliance status.[0m
                    [36m</p>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                    [36m>[39m
                      [0mStart Chat[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</main>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:86:15
     84|         render(<Dashboard />);
     85| 
     86|         await waitFor(() => {
       |               ^
     87|             expect(screen.getByText('Analyze')).toBeDefined();
     88|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  1 failed | 2 passed (3)
   Start at  00:11:35
   Duration  1.56s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x31 

 â¯ app/app/dashboard/page.test.tsx (3 tests | 1 failed) 273ms
     âœ“ renders documents and standards 101ms
     âœ“ renders dashboard widgets 126ms
     Ã— opens analysis modal and runs check 45ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
TestingLibraryElementError: Unable to find an element with the text: Analyze. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
            [36m>[39m
              [0mğŸ””[0m
            [36m</button>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mTotal Documents[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0m10[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAnalyzed[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                [36m>[39m
                  [0m5[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAvg. Compliance Score[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                [36m>[39m
                  [0m85[0m
                  [0m%[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr[39m
                          [33mclass[39m=[32m"hover:bg-gray-50 transition-colors"[39m
                        [36m>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex items-center"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex-shrink-0 h-10 w-10 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</div>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"ml-4"[39m
                              [36m>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                                [36m>[39m
                                  [0mDoc 1[0m
                                [36m</div>[39m
                                [36m<div[39m
                                  [33mclass[39m=[32m"text-xs text-gray-500"[39m
                                [36m>[39m
                                  [0mID: [0m
                                  [0m1[0m
                                [36m</div>[39m
                              [36m</div>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                          [36m>[39m
                            [36m<span[39m
                              [33mclass[39m=[32m"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"[39m
                            [36m>[39m
                              [0mPENDING[0m
                            [36m</span>[39m
                          [36m</td>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                          [36m>[39m
                            [0m1/1/2023[0m
                          [36m</td>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex justify-end gap-3"[39m
                            [36m>[39m
                              [36m<a[39m
                                [33mclass[39m=[32m"text-gray-400 hover:text-blue-600 transition-colors"[39m
                                [33mhref[39m=[32m"/app/documents/1"[39m
                                [33mtitle[39m=[32m"View"[39m
                              [36m>[39m
                                [0mğŸ‘ï¸[0m
                              [36m</a>[39m
                              [36m<button[39m
                                [33mclass[39m=[32m"text-gray-400 hover:text-green-600 transition-colors"[39m
                                [33mtitle[39m=[32m"Analyze"[39m
                              [36m>[39m
                                [0mâš¡ï¸[0m
                              [36m</button>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                    [36m>[39m
                      [0mRecent Activity[0m
                    [36m</h3>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"text-xs text-gray-500"[39m
                        [36m>[39m
                          [0mUpdated: [0m
                          [0m1/1/2023[0m
                        [36m</div>[39m
                      [36m</div>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                      [36m>[39m
                        [0mANALYZED[0m
                      [36m</span>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/dashboard/page.test.tsx:91:32
     89| 
     90|         // Click Analyze
     91|         fireEvent.click(screen.getByText('Analyze'));
       |                                ^
     92| 
     93|         // Check modal

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  1 failed (1)
      Tests  1 failed | 2 passed (3)
   Start at  00:12:07
   Duration  880ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x32 

 âœ“ app/app/dashboard/page.test.tsx (3 tests) 228ms

 Test Files  1 passed (1)
      Tests  3 passed (3)
   Start at  00:12:09
   Duration  687ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 274ms
 âœ“ app/app/dashboard/page.test.tsx (3 tests) 826ms
     âœ“ renders documents and standards  527ms
 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 1296ms
     âœ“ renders document details and download button  1249ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 272ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯


 Test Files  1 failed | 4 passed (5)
      Tests  2 failed | 12 passed (14)
   Start at  00:40:06
   Duration  23.14s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x34 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 â¯ app/app/dashboard/page.test.tsx (3 tests | 3 failed) 54ms
     Ã— renders documents and standards 50ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
ReferenceError: stats is not defined
 â¯ Dashboard app/app/dashboard/page.tsx:141:26
    139|                     <div className="max-w-7xl mx-auto space-y-8">
    140|                         {/* Stats Row */}
    141|                         {stats && <StatsWidget stats={stats} />}
       |                          ^
    142| 
    143|                         {/* Staged Documents Review Queue */}
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯


 Test Files  2 failed (2)
      Tests  5 failed | 2 passed (7)
   Start at  00:41:49
   Duration  920ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x35 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 â¯ app/app/dashboard/page.test.tsx (3 tests | 3 failed) 20ms
     Ã— renders documents and standards 14ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
ReferenceError: stats is not defined
 â¯ Dashboard app/app/dashboard/page.tsx:141:26
    139|                     <div className="max-w-7xl mx-auto space-y-8">
    140|                         {/* Stats Row */}
    141|                         {stats && <StatsWidget stats={stats} />}
       |                          ^
    142| 
    143|                         {/* Staged Documents Review Queue */}
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯


 Test Files  2 failed (2)
      Tests  5 failed | 2 passed (7)
   Start at  00:41:51
   Duration  716ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x36 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 âœ“ app/app/dashboard/page.test.tsx (3 tests) 208ms

 Test Files  1 failed | 1 passed (2)
      Tests  2 failed | 5 passed (7)
   Start at  00:42:11
   Duration  1.05s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x37 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 âœ“ app/app/dashboard/page.test.tsx (3 tests) 438ms

 Test Files  1 failed | 1 passed (2)
      Tests  2 failed | 5 passed (7)
   Start at  00:43:45
   Duration  1.10s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x38 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 â¯ app/app/dashboard/page.test.tsx (3 tests | 1 failed) 442ms
     âœ“ renders documents and standards 153ms
     âœ“ renders dashboard widgets 95ms
     Ã— opens analysis modal and runs check 193ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Error: Calling the test function inside another test function is not allowed. Please put it inside "describe" or "suite" so it can be properly collected.
 â¯ app/app/dashboard/page.test.tsx:105:9
    103|             expect(mockPush).toHaveBeenCalledWith('/app/reports/reportâ€¦
    104|         });
    105|         it('shows staged documents and allows approval', async () => {
       |         ^
    106|             const mockDocuments = [
    107|                 { id: '1', title: 'Doc 1', status: 'STAGED', createdAtâ€¦

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  2 failed (2)
      Tests  3 failed | 4 passed (7)
   Start at  00:43:48
   Duration  757ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x39 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 1 error:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.test.tsx:130:0: ERROR: Unexpected "}"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.test.tsx:130:0
  
  Unexpected "}"
  128 |      });
  129 |  });
  130 |  });
      |  ^
  131 |  
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  2 failed (2)
      Tests  2 failed | 2 passed (4)
   Start at  00:44:43
   Duration  272ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x40 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 â¯ app/app/dashboard/page.test.tsx (4 tests | 1 failed) 1358ms
     âœ“ renders documents and standards 167ms
     âœ“ renders dashboard widgets 54ms
     âœ“ opens analysis modal and runs check 110ms
     Ã— shows staged documents and allows approval 1018ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
TestingLibraryElementError: Found multiple elements with the text: Doc 1

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<td[39m
  [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
[36m>[39m
  [0mDoc 1[0m
[36m</td>[39m

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"font-medium text-gray-900"[39m
[36m>[39m
  [0mDoc 1[0m
[36m</div>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
            [36m>[39m
              [0mğŸ””[0m
            [36m</button>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mTotal Documents[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0m10[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAnalyzed[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                [36m>[39m
                  [0m5[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAvg. Compliance Score[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                [36m>[39m
                  [0m85[0m
                  [0m%[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-xl border border-blue-100 p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center mb-4"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold text-blue-900"[39m
                  [36m>[39m
                    [0mReview Uploads[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-blue-700"[39m
                  [36m>[39m
                    [0mThese documents are processed and ready for approval.[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50"[39m
                [36m>[39m
                  [0mApprove All[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-blue-100 overflow-hidden"[39m
              [36m>[39m
                [36m<table[39m
                  [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tbody[39m
                    [33mclass[39m=[32m"divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mDoc 1[0m
                      [36m</td>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-4 text-sm text-gray-500"[39m
                      [36m>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"text-green-600"[39m
                        [36m>[39m
                          [0mReady for Approval[0m
                        [36m</span>[39m
                      [36m</td>[39m
                    [36m</tr>[39m
                  [36m</tbody>[39m
                [36m</table>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                    [36m>[39m
                      [0mRecent Activity[0m
                    [36m</h3>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"text-xs text-gray-500"[39m
                        [36m>[39m
                          [0mUpdated: [0m
                          [0m1/1/2023[0m
                        [36m</div>[39m
                      [36m</div>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                      [36m>[39m
                        [0mANALYZED[0m
                      [36m</span>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<aside[39m
          [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
          [36m>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
            [36m>[39m
              [36m<span>[39m
                [0mğŸ›¡ï¸[0m
              [36m</span>[39m
              [0m ISO Doc[0m
            [36m</h1>[39m
          [36m</div>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
          [36m>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
              [33mhref[39m=[32m"/app/dashboard"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“Š[0m
              [36m</span>[39m
              [0mDashboard[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/documents"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“[0m
              [36m</span>[39m
              [0mDocuments[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/gap-analysis"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ”[0m
              [36m</span>[39m
              [0mGap Analysis[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/reports"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“‹[0m
              [36m</span>[39m
              [0mReports[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/settings"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mâš™ï¸[0m
              [36m</span>[39m
              [0mSettings[0m
            [36m</a>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
            [36m>[39m
              [36m<h4[39m
                [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
              [36m>[39m
                [0mPro Plan[0m
              [36m</h4>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
              [36m>[39m
                [0mGet access to advanced AI features.[0m
              [36m</p>[39m
              [36m<button[39m
                [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
              [36m>[39m
                [0mUpgrade Now[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</aside>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex-1 flex flex-col"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
              [36m>[39m
                [0mDashboard[0m
              [36m</h2>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500"[39m
              [36m>[39m
                [0mWelcome back, User[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-1/3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative w-full max-w-xl"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"relative"[39m
                [36m>[39m
                  [36m<input[39m
                    [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                    [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                    [33mtype[39m=[32m"text"[39m
                    [33mvalue[39m=[32m""[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-gray-400"[39m
                    [36m>[39m
                      [0mğŸ”[0m
                    [36m</span>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSearch[0m
                  [36m</button>[39m
                [36m</form>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
              [36m>[39m
                [0mU[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</header>[39m
          [36m<main[39m
            [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mTotal Documents[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                  [36m>[39m
                    [0m10[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAnalyzed[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAvg. Compliance Score[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                  [36m>[39m
                    [0m85[0m
                    [0m%[0m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-blue-50 rounded-xl border border-blue-100 p-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex justify-between items-center mb-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-blue-900"[39m
                    [36m>[39m
                      [0mReview Uploads[0m
                    [36m</h3>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-sm text-blue-700"[39m
                    [36m>[39m
                      [0mThese documents are processed and ready for approval.[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50"[39m
                  [36m>[39m
                    [0mApprove All[0m
                  [36m</button>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-blue-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<tr>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"px-6 py-4 text-sm text-gray-500"[39m
                        [36m>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"text-green-600"[39m
                          [36m>[39m
                            [0mReady for Approval[0m
                          [36m</span>[39m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<h3[39m
                          [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                        [36m>[39m
                          [0mRecent Documents[0m
                        [36m</h3>[39m
                        [36m<p[39m
                          [33mclass[39m=[32m"text-sm text-gray-500"[39m
                        [36m>[39m
                          [0mManage and analyze your files[0m
                        [36m</p>[39m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative"[39m
                      [36m>[39m
                        [36m<input[39m
                          [33mclass[39m=[32m"hidden"[39m
                          [33mid[39m=[32m"file-upload"[39m
                          [33mmultiple[39m=[32m""[39m
                          [33mtype[39m=[32m"file"[39m
                        [36m/>[39m
                        [36m<label[39m
                          [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                          [33mfor[39m=[32m"file-upload"[39m
                        [36m>[39m
                          [36m<span>[39m
                            [0mâ˜ï¸[0m
                          [36m</span>[39m
                          [0mUpload New[0m
                        [36m</label>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"overflow-x-auto"[39m
                    [36m>[39m
                      [36m<table[39m
                        [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<thead[39m
                          [33mclass[39m=[32m"bg-gray-50"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDocument[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mStatus[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDate[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mActions[0m
                            [36m</th>[39m
                          [36m</tr>[39m
                        [36m</thead>[39m
                        [36m<tbody[39m
                          [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                              [33mcolspan[39m=[32m"4"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                              [36m>[39m
                                [36m<span[39m
                                  [33mclass[39m=[32m"text-4xl"[39m
                                [36m>[39m
                                  [0mğŸ“„[0m
                                [36m</span>[39m
                                [36m<p>[39m
                                  [0mNo documents found[0m
                                [36m</p>[39m
                                [36m<p[39m
                                  [33mclass[39m=[32m"text-sm"[39m
                                [36m>[39m
                                  [0mUpload a document to get started[0m
                                [36m</p>[39m
                              [36m</div>[39m
                            [36m</td>[39m
                          [36m</tr>[39m
                        [36m</tbody>[39m
                      [36m</table>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-8"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Activity[0m
                      [36m</h3>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                      [36m>[39m
                        [36m<div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"font-medium text-gray-900"[39m
                          [36m>[39m
                            [0mDoc 1[0m
                          [36m</div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"text-xs text-gray-500"[39m
                          [36m>[39m
                            [0mUpdated: [0m
                            [0m1/1/2023[0m
                          [36m</div>[39m
                        [36m</div>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                        [36m>[39m
                          [0mANALYZED[0m
                        [36m</span>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                    [36m>[39m
                      [0mNeed Help?[0m
                    [36m</h3>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                    [36m>[39m
                      [0mAsk our AI Auditor anything about your compliance status.[0m
                    [36m</p>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                    [36m>[39m
                      [0mStart Chat[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</main>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:116:15
    114|         render(<Dashboard />);
    115| 
    116|         await waitFor(() => {
       |               ^
    117|             expect(screen.getByText('Review Uploads')).toBeDefined();
    118|             expect(screen.getByText('Doc 1')).toBeDefined();

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  2 failed (2)
      Tests  3 failed | 5 passed (8)
   Start at  00:44:59
   Duration  2.08s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x41 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
stdout | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Fetched docs: [
  {
    id: [32m'1'[39m,
    title: [32m'Doc 1'[39m,
    status: [32m'PENDING'[39m,
    createdAt: [32m'2023-01-01'[39m
  }
]

stdout | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Fetched docs: []

stdout | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Fetched docs: [
  {
    id: [32m'1'[39m,
    title: [32m'Doc 1'[39m,
    status: [32m'PENDING'[39m,
    createdAt: [32m'2023-01-01'[39m
  }
]

stdout | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Fetched docs: [
  {
    id: [32m'1'[39m,
    title: [32m'Doc 1'[39m,
    status: [32m'STAGED'[39m,
    createdAt: [32m'2023-01-01'[39m
  }
]

 â¯ app/app/dashboard/page.test.tsx (4 tests | 1 failed) 1256ms
     âœ“ renders documents and standards 140ms
     âœ“ renders dashboard widgets 26ms
     âœ“ opens analysis modal and runs check 81ms
     Ã— shows staged documents and allows approval 1008ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
TestingLibraryElementError: Found multiple elements with the text: Doc 1

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<td[39m
  [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
[36m>[39m
  [0mDoc 1[0m
[36m</td>[39m

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"font-medium text-gray-900"[39m
[36m>[39m
  [0mDoc 1[0m
[36m</div>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
            [36m>[39m
              [0mğŸ””[0m
            [36m</button>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mTotal Documents[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0m10[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAnalyzed[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                [36m>[39m
                  [0m5[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAvg. Compliance Score[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                [36m>[39m
                  [0m85[0m
                  [0m%[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-xl border border-blue-100 p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center mb-4"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold text-blue-900"[39m
                  [36m>[39m
                    [0mReview Uploads[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-blue-700"[39m
                  [36m>[39m
                    [0mThese documents are processed and ready for approval.[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50"[39m
                [36m>[39m
                  [0mApprove All[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-blue-100 overflow-hidden"[39m
              [36m>[39m
                [36m<table[39m
                  [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tbody[39m
                    [33mclass[39m=[32m"divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mDoc 1[0m
                      [36m</td>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-4 text-sm text-gray-500"[39m
                      [36m>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"text-green-600"[39m
                        [36m>[39m
                          [0mReady for Approval[0m
                        [36m</span>[39m
                      [36m</td>[39m
                    [36m</tr>[39m
                  [36m</tbody>[39m
                [36m</table>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                    [36m>[39m
                      [0mRecent Activity[0m
                    [36m</h3>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"text-xs text-gray-500"[39m
                        [36m>[39m
                          [0mUpdated: [0m
                          [0m1/1/2023[0m
                        [36m</div>[39m
                      [36m</div>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                      [36m>[39m
                        [0mANALYZED[0m
                      [36m</span>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<aside[39m
          [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
          [36m>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
            [36m>[39m
              [36m<span>[39m
                [0mğŸ›¡ï¸[0m
              [36m</span>[39m
              [0m ISO Doc[0m
            [36m</h1>[39m
          [36m</div>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
          [36m>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
              [33mhref[39m=[32m"/app/dashboard"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“Š[0m
              [36m</span>[39m
              [0mDashboard[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/documents"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“[0m
              [36m</span>[39m
              [0mDocuments[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/gap-analysis"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ”[0m
              [36m</span>[39m
              [0mGap Analysis[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/reports"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“‹[0m
              [36m</span>[39m
              [0mReports[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/settings"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mâš™ï¸[0m
              [36m</span>[39m
              [0mSettings[0m
            [36m</a>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
            [36m>[39m
              [36m<h4[39m
                [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
              [36m>[39m
                [0mPro Plan[0m
              [36m</h4>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
              [36m>[39m
                [0mGet access to advanced AI features.[0m
              [36m</p>[39m
              [36m<button[39m
                [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
              [36m>[39m
                [0mUpgrade Now[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</aside>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex-1 flex flex-col"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
              [36m>[39m
                [0mDashboard[0m
              [36m</h2>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500"[39m
              [36m>[39m
                [0mWelcome back, User[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-1/3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative w-full max-w-xl"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"relative"[39m
                [36m>[39m
                  [36m<input[39m
                    [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                    [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                    [33mtype[39m=[32m"text"[39m
                    [33mvalue[39m=[32m""[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-gray-400"[39m
                    [36m>[39m
                      [0mğŸ”[0m
                    [36m</span>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSearch[0m
                  [36m</button>[39m
                [36m</form>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
              [36m>[39m
                [0mU[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</header>[39m
          [36m<main[39m
            [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mTotal Documents[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                  [36m>[39m
                    [0m10[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAnalyzed[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAvg. Compliance Score[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                  [36m>[39m
                    [0m85[0m
                    [0m%[0m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-blue-50 rounded-xl border border-blue-100 p-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex justify-between items-center mb-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-blue-900"[39m
                    [36m>[39m
                      [0mReview Uploads[0m
                    [36m</h3>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-sm text-blue-700"[39m
                    [36m>[39m
                      [0mThese documents are processed and ready for approval.[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50"[39m
                  [36m>[39m
                    [0mApprove All[0m
                  [36m</button>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-blue-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<tr>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"px-6 py-4 text-sm text-gray-500"[39m
                        [36m>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"text-green-600"[39m
                          [36m>[39m
                            [0mReady for Approval[0m
                          [36m</span>[39m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<h3[39m
                          [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                        [36m>[39m
                          [0mRecent Documents[0m
                        [36m</h3>[39m
                        [36m<p[39m
                          [33mclass[39m=[32m"text-sm text-gray-500"[39m
                        [36m>[39m
                          [0mManage and analyze your files[0m
                        [36m</p>[39m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative"[39m
                      [36m>[39m
                        [36m<input[39m
                          [33mclass[39m=[32m"hidden"[39m
                          [33mid[39m=[32m"file-upload"[39m
                          [33mmultiple[39m=[32m""[39m
                          [33mtype[39m=[32m"file"[39m
                        [36m/>[39m
                        [36m<label[39m
                          [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                          [33mfor[39m=[32m"file-upload"[39m
                        [36m>[39m
                          [36m<span>[39m
                            [0mâ˜ï¸[0m
                          [36m</span>[39m
                          [0mUpload New[0m
                        [36m</label>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"overflow-x-auto"[39m
                    [36m>[39m
                      [36m<table[39m
                        [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<thead[39m
                          [33mclass[39m=[32m"bg-gray-50"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDocument[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mStatus[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDate[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mActions[0m
                            [36m</th>[39m
                          [36m</tr>[39m
                        [36m</thead>[39m
                        [36m<tbody[39m
                          [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                              [33mcolspan[39m=[32m"4"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                              [36m>[39m
                                [36m<span[39m
                                  [33mclass[39m=[32m"text-4xl"[39m
                                [36m>[39m
                                  [0mğŸ“„[0m
                                [36m</span>[39m
                                [36m<p>[39m
                                  [0mNo documents found[0m
                                [36m</p>[39m
                                [36m<p[39m
                                  [33mclass[39m=[32m"text-sm"[39m
                                [36m>[39m
                                  [0mUpload a document to get started[0m
                                [36m</p>[39m
                              [36m</div>[39m
                            [36m</td>[39m
                          [36m</tr>[39m
                        [36m</tbody>[39m
                      [36m</table>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-8"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Activity[0m
                      [36m</h3>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                      [36m>[39m
                        [36m<div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"font-medium text-gray-900"[39m
                          [36m>[39m
                            [0mDoc 1[0m
                          [36m</div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"text-xs text-gray-500"[39m
                          [36m>[39m
                            [0mUpdated: [0m
                            [0m1/1/2023[0m
                          [36m</div>[39m
                        [36m</div>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                        [36m>[39m
                          [0mANALYZED[0m
                        [36m</span>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                    [36m>[39m
                      [0mNeed Help?[0m
                    [36m</h3>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                    [36m>[39m
                      [0mAsk our AI Auditor anything about your compliance status.[0m
                    [36m</p>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                    [36m>[39m
                      [0mStart Chat[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</main>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:116:15
    114|         render(<Dashboard />);
    115| 
    116|         await waitFor(() => {
       |               ^
    117|             expect(screen.getByText('Review Uploads')).toBeDefined();
    118|             expect(screen.getByText('Doc 1')).toBeDefined();

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  2 failed (2)
      Tests  3 failed | 5 passed (8)
   Start at  00:45:41
   Duration  2.24s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x42 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 â¯ app/app/dashboard/page.test.tsx (4 tests | 1 failed) 1832ms
     âœ“ renders documents and standards 286ms
     âœ“ renders dashboard widgets 292ms
     âœ“ opens analysis modal and runs check 238ms
     Ã— shows staged documents and allows approval 1015ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
TestingLibraryElementError: Found multiple elements with the text: Doc 1

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<td[39m
  [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
[36m>[39m
  [0mDoc 1[0m
[36m</td>[39m

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"font-medium text-gray-900"[39m
[36m>[39m
  [0mDoc 1[0m
[36m</div>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
            [36m>[39m
              [0mğŸ””[0m
            [36m</button>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mTotal Documents[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0m10[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAnalyzed[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                [36m>[39m
                  [0m5[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAvg. Compliance Score[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                [36m>[39m
                  [0m85[0m
                  [0m%[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-xl border border-blue-100 p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center mb-4"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold text-blue-900"[39m
                  [36m>[39m
                    [0mReview Uploads[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-blue-700"[39m
                  [36m>[39m
                    [0mThese documents are processed and ready for approval.[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50"[39m
                [36m>[39m
                  [0mApprove All[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-blue-100 overflow-hidden"[39m
              [36m>[39m
                [36m<table[39m
                  [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tbody[39m
                    [33mclass[39m=[32m"divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mDoc 1[0m
                      [36m</td>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-4 text-sm text-gray-500"[39m
                      [36m>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"text-green-600"[39m
                        [36m>[39m
                          [0mReady for Approval[0m
                        [36m</span>[39m
                      [36m</td>[39m
                    [36m</tr>[39m
                  [36m</tbody>[39m
                [36m</table>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                    [36m>[39m
                      [0mRecent Activity[0m
                    [36m</h3>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"text-xs text-gray-500"[39m
                        [36m>[39m
                          [0mUpdated: [0m
                          [0m1/1/2023[0m
                        [36m</div>[39m
                      [36m</div>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                      [36m>[39m
                        [0mANALYZED[0m
                      [36m</span>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<aside[39m
          [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
          [36m>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
            [36m>[39m
              [36m<span>[39m
                [0mğŸ›¡ï¸[0m
              [36m</span>[39m
              [0m ISO Doc[0m
            [36m</h1>[39m
          [36m</div>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
          [36m>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
              [33mhref[39m=[32m"/app/dashboard"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“Š[0m
              [36m</span>[39m
              [0mDashboard[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/documents"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“[0m
              [36m</span>[39m
              [0mDocuments[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/gap-analysis"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ”[0m
              [36m</span>[39m
              [0mGap Analysis[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/reports"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“‹[0m
              [36m</span>[39m
              [0mReports[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/settings"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mâš™ï¸[0m
              [36m</span>[39m
              [0mSettings[0m
            [36m</a>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
            [36m>[39m
              [36m<h4[39m
                [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
              [36m>[39m
                [0mPro Plan[0m
              [36m</h4>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
              [36m>[39m
                [0mGet access to advanced AI features.[0m
              [36m</p>[39m
              [36m<button[39m
                [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
              [36m>[39m
                [0mUpgrade Now[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</aside>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex-1 flex flex-col"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
              [36m>[39m
                [0mDashboard[0m
              [36m</h2>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500"[39m
              [36m>[39m
                [0mWelcome back, User[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-1/3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative w-full max-w-xl"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"relative"[39m
                [36m>[39m
                  [36m<input[39m
                    [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                    [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                    [33mtype[39m=[32m"text"[39m
                    [33mvalue[39m=[32m""[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-gray-400"[39m
                    [36m>[39m
                      [0mğŸ”[0m
                    [36m</span>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSearch[0m
                  [36m</button>[39m
                [36m</form>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
              [36m>[39m
                [0mU[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</header>[39m
          [36m<main[39m
            [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mTotal Documents[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                  [36m>[39m
                    [0m10[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAnalyzed[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                  [36m>[39m
                    [0mAvg. Compliance Score[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                  [36m>[39m
                    [0m85[0m
                    [0m%[0m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-blue-50 rounded-xl border border-blue-100 p-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex justify-between items-center mb-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-blue-900"[39m
                    [36m>[39m
                      [0mReview Uploads[0m
                    [36m</h3>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-sm text-blue-700"[39m
                    [36m>[39m
                      [0mThese documents are processed and ready for approval.[0m
                    [36m</p>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50"[39m
                  [36m>[39m
                    [0mApprove All[0m
                  [36m</button>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-blue-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<table[39m
                    [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tbody[39m
                      [33mclass[39m=[32m"divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<tr>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</td>[39m
                        [36m<td[39m
                          [33mclass[39m=[32m"px-6 py-4 text-sm text-gray-500"[39m
                        [36m>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"text-green-600"[39m
                          [36m>[39m
                            [0mReady for Approval[0m
                          [36m</span>[39m
                        [36m</td>[39m
                      [36m</tr>[39m
                    [36m</tbody>[39m
                  [36m</table>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<h3[39m
                          [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                        [36m>[39m
                          [0mRecent Documents[0m
                        [36m</h3>[39m
                        [36m<p[39m
                          [33mclass[39m=[32m"text-sm text-gray-500"[39m
                        [36m>[39m
                          [0mManage and analyze your files[0m
                        [36m</p>[39m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative"[39m
                      [36m>[39m
                        [36m<input[39m
                          [33mclass[39m=[32m"hidden"[39m
                          [33mid[39m=[32m"file-upload"[39m
                          [33mmultiple[39m=[32m""[39m
                          [33mtype[39m=[32m"file"[39m
                        [36m/>[39m
                        [36m<label[39m
                          [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                          [33mfor[39m=[32m"file-upload"[39m
                        [36m>[39m
                          [36m<span>[39m
                            [0mâ˜ï¸[0m
                          [36m</span>[39m
                          [0mUpload New[0m
                        [36m</label>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"overflow-x-auto"[39m
                    [36m>[39m
                      [36m<table[39m
                        [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<thead[39m
                          [33mclass[39m=[32m"bg-gray-50"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDocument[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mStatus[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDate[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mActions[0m
                            [36m</th>[39m
                          [36m</tr>[39m
                        [36m</thead>[39m
                        [36m<tbody[39m
                          [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                              [33mcolspan[39m=[32m"4"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                              [36m>[39m
                                [36m<span[39m
                                  [33mclass[39m=[32m"text-4xl"[39m
                                [36m>[39m
                                  [0mğŸ“„[0m
                                [36m</span>[39m
                                [36m<p>[39m
                                  [0mNo documents found[0m
                                [36m</p>[39m
                                [36m<p[39m
                                  [33mclass[39m=[32m"text-sm"[39m
                                [36m>[39m
                                  [0mUpload a document to get started[0m
                                [36m</p>[39m
                              [36m</div>[39m
                            [36m</td>[39m
                          [36m</tr>[39m
                        [36m</tbody>[39m
                      [36m</table>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-8"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Activity[0m
                      [36m</h3>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                      [36m>[39m
                        [36m<div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"font-medium text-gray-900"[39m
                          [36m>[39m
                            [0mDoc 1[0m
                          [36m</div>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"text-xs text-gray-500"[39m
                          [36m>[39m
                            [0mUpdated: [0m
                            [0m1/1/2023[0m
                          [36m</div>[39m
                        [36m</div>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                        [36m>[39m
                          [0mANALYZED[0m
                        [36m</span>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                    [36m>[39m
                      [0mNeed Help?[0m
                    [36m</h3>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                    [36m>[39m
                      [0mAsk our AI Auditor anything about your compliance status.[0m
                    [36m</p>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                    [36m>[39m
                      [0mStart Chat[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</main>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:116:15

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  2 failed (2)
      Tests  3 failed | 5 passed (8)
   Start at  00:46:19
   Duration  2.60s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x43 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 â¯ app/app/dashboard/page.test.tsx (4 tests | 1 failed) 228ms
     âœ“ renders documents and standards 63ms
     âœ“ renders dashboard widgets 51ms
     âœ“ opens analysis modal and runs check 82ms
     Ã— shows staged documents and allows approval 27ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
TestingLibraryElementError: Found multiple elements with the text: Doc 1

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<td[39m
  [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
[36m>[39m
  [0mDoc 1[0m
[36m</td>[39m

Ignored nodes: comments, script, style
[36m<div[39m
  [33mclass[39m=[32m"font-medium text-gray-900"[39m
[36m>[39m
  [0mDoc 1[0m
[36m</div>[39m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600"[39m
            [36m>[39m
              [0mğŸ””[0m
            [36m</button>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mTotal Documents[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0m10[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAnalyzed[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-blue-600"[39m
                [36m>[39m
                  [0m5[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white p-6 rounded-lg shadow-sm border border-gray-100"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-sm font-medium text-gray-500 mb-1"[39m
                [36m>[39m
                  [0mAvg. Compliance Score[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-3xl font-bold text-green-600"[39m
                [36m>[39m
                  [0m85[0m
                  [0m%[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-xl border border-blue-100 p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-center mb-4"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold text-blue-900"[39m
                  [36m>[39m
                    [0mReview Uploads[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-blue-700"[39m
                  [36m>[39m
                    [0mThese documents are processed and ready for approval.[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition disabled:opacity-50"[39m
                [36m>[39m
                  [0mApprove All[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-blue-100 overflow-hidden"[39m
              [36m>[39m
                [36m<table[39m
                  [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tbody[39m
                    [33mclass[39m=[32m"divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-4 text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mDoc 1[0m
                      [36m</td>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-4 text-sm text-gray-500"[39m
                      [36m>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"text-green-600"[39m
                        [36m>[39m
                          [0mReady for Approval[0m
                        [36m</span>[39m
                      [36m</td>[39m
                    [36m</tr>[39m
                  [36m</tbody>[39m
                [36m</table>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"px-6 py-4 border-b border-gray-100"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                    [36m>[39m
                      [0mRecent Activity[0m
                    [36m</h3>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"divide-y divide-gray-100"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-4 hover:bg-gray-50 transition-colors flex justify-between items-center"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"font-medium text-gray-900"[39m
                        [36m>[39m
                          [0mDoc 1[0m
                        [36m</div>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"text-xs text-gray-500"[39m
                        [36m>[39m
                          [0mUpdated: [0m
                          [0m1/1/2023[0m
                        [36m</div>[39m
                      [36m</div>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"[39m
                      [36m>[39m
                        [0mANALYZED[0m
                      [36m</span>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getElementError node_modules/@testing-library/dom/dist/query-helpers.js:20:35
 â¯ getMultipleElementsFoundError node_modules/@testing-library/dom/dist/query-helpers.js:23:10
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:55:13
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/dashboard/page.test.tsx:117:23
    115| 
    116|         expect(await screen.findByText('Review Uploads')).toBeDefined(â€¦
    117|         expect(screen.getByText('Doc 1')).toBeDefined();
       |                       ^
    118|         expect(screen.getByText('Ready for Approval')).toBeDefined();
    119| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  2 failed (2)
      Tests  3 failed | 5 passed (8)
   Start at  00:46:23
   Duration  605ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x44 

 â¯ lib/api.test.ts (4 tests | 2 failed) 84ms
       âœ“ should fetch documents successfully 59ms
       âœ“ should throw error on failure 9ms
       Ã— should upload document successfully 8ms
       Ã— should throw error on upload failure 5ms
 âœ“ app/app/dashboard/page.test.tsx (4 tests) 346ms

 Test Files  1 failed | 1 passed (2)
      Tests  2 failed | 6 passed (8)
   Start at  00:47:06
   Duration  930ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 â¯ lib/api.test.ts (4 tests | 2 failed) 207ms
       âœ“ should fetch documents successfully 75ms
       âœ“ should throw error on failure 31ms
       Ã— should upload document successfully 84ms
       Ã— should throw error on upload failure 8ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 1199ms
     âœ“ renders loading state initially  312ms
     âœ“ renders report data successfully  713ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 2410ms
     âœ“ renders and loads standards  964ms
     Ã— runs gap analysis and displays results 1439ms
 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 4662ms
     âœ“ renders document details and download button  4372ms
 âœ“ app/app/dashboard/page.test.tsx (4 tests) 1295ms
     âœ“ renders documents and standards  653ms
     âœ“ opens analysis modal and runs check  305ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/3]â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
TestingLibraryElementError: Unable to find an element with the text: Security Policy. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"max-w-6xl mx-auto"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mGap Analysis[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mIdentify missing required documents for ISO compliance.[0m
          [36m</p>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white rounded-lg shadow p-6 mb-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-4 items-end"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex-1"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [36m>[39m
                [0mSelect ISO Standard[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"iso-1"[39m
                [36m>[39m
                  [0mISO 27001[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"[39m
            [36m>[39m
              [0mRun Gap Analysis[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-6xl mx-auto"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"mb-8"[39m
          [36m>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
            [36m>[39m
              [0mGap Analysis[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-gray-600"[39m
            [36m>[39m
              [0mIdentify missing required documents for ISO compliance.[0m
            [36m</p>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-white rounded-lg shadow p-6 mb-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex gap-4 items-end"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex-1"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                [36m>[39m
                  [0mSelect ISO Standard[0m
                [36m</label>[39m
                [36m<select[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border"[39m
                [36m>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"iso-1"[39m
                  [36m>[39m
                    [0mISO 27001[0m
                  [36m</option>[39m
                [36m</select>[39m
              [36m</div>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"[39m
              [36m>[39m
                [0mRun Gap Analysis[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/gap-analysis/page.test.tsx:62:15
     60|         fireEvent.click(screen.getByText('Run Gap Analysis'));
     61| 
     62|         await waitFor(() => {
       |               ^
     63|             expect(screen.getByText('Security Policy')).toBeDefined();
     64|             expect(screen.getByText('MISSING')).toBeDefined();

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/3]â¯


 Test Files  2 failed | 3 passed (5)
      Tests  3 failed | 12 passed (15)
   Start at  00:52:33
   Duration  44.06s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x46 

 â¯ lib/api.test.ts (4 tests | 2 failed) 207ms
       âœ“ should fetch documents successfully 75ms
       âœ“ should throw error on failure 31ms
       Ã— should upload document successfully 84ms
       Ã— should throw error on upload failure 8ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 2410ms
     âœ“ renders and loads standards  964ms
     Ã— runs gap analysis and displays results 1439ms
 âœ“ app/app/dashboard/page.test.tsx (4 tests) 687ms
     âœ“ renders documents and standards  440ms

 Test Files  2 failed | 1 passed (3)
      Tests  3 failed | 7 passed (10)
   Start at  00:53:01
   Duration  2.79s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x47 

 â¯ lib/api.test.ts (4 tests | 2 failed) 207ms
       âœ“ should fetch documents successfully 75ms
       âœ“ should throw error on failure 31ms
       Ã— should upload document successfully 84ms
       Ã— should throw error on upload failure 8ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 2410ms
     âœ“ renders and loads standards  964ms
     Ã— runs gap analysis and displays results 1439ms
 âœ“ app/app/dashboard/page.test.tsx (4 tests) 351ms

 Test Files  2 failed | 1 passed (3)
      Tests  3 failed | 7 passed (10)
   Start at  00:53:06
   Duration  1.35s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x48 

 â¯ lib/api.test.ts (4 tests | 2 failed) 207ms
       âœ“ should fetch documents successfully 75ms
       âœ“ should throw error on failure 31ms
       Ã— should upload document successfully 84ms
       Ã— should throw error on upload failure 8ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 2410ms
     âœ“ renders and loads standards  964ms
     Ã— runs gap analysis and displays results 1439ms
 âœ“ app/app/dashboard/page.test.tsx (4 tests) 281ms

 Test Files  2 failed | 1 passed (3)
      Tests  3 failed | 7 passed (10)
   Start at  00:53:09
   Duration  946ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x49 

 â¯ lib/api.test.ts (4 tests | 2 failed) 207ms
       âœ“ should fetch documents successfully 75ms
       âœ“ should throw error on failure 31ms
       Ã— should upload document successfully 84ms
       Ã— should throw error on upload failure 8ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 2410ms
     âœ“ renders and loads standards  964ms
     Ã— runs gap analysis and displays results 1439ms
 âœ“ app/app/dashboard/page.test.tsx (4 tests) 2372ms
     âœ“ renders documents and standards  1645ms
     âœ“ opens analysis modal and runs check  414ms

 Test Files  2 failed | 1 passed (3)
      Tests  3 failed | 7 passed (10)
   Start at  00:53:26
   Duration  3.77s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x50 

 â¯ lib/api.test.ts (4 tests | 2 failed) 207ms
       âœ“ should fetch documents successfully 75ms
       âœ“ should throw error on failure 31ms
       Ã— should upload document successfully 84ms
       Ã— should throw error on upload failure 8ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 2410ms
     âœ“ renders and loads standards  964ms
     Ã— runs gap analysis and displays results 1439ms
 â¯ app/app/dashboard/page.test.tsx (4 tests | 1 failed) 1442ms
     âœ“ renders documents and standards  352ms
     âœ“ renders dashboard widgets 229ms
     âœ“ opens analysis modal and runs check  789ms
     Ã— shows staged documents and allows approval 64ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Error: Calling the test function inside another test function is not allowed. Please put it inside "describe" or "suite" so it can be properly collected.
 â¯ app/app/dashboard/page.test.tsx:129:9
    127|             expect(commitDocuments).toHaveBeenCalledWith(['1']);
    128|         });
    129|         it('allows rejecting staged documents', async () => {
       |         ^
    130|             const mockDocuments = [
    131|                 { id: '1', title: 'Doc 1', status: 'STAGED', createdAtâ€¦

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  3 failed (3)
      Tests  4 failed | 6 passed (10)
   Start at  00:53:34
   Duration  4.46s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x51 

 â¯ lib/api.test.ts (4 tests | 2 failed) 207ms
       âœ“ should fetch documents successfully 75ms
       âœ“ should throw error on failure 31ms
       Ã— should upload document successfully 84ms
       Ã— should throw error on upload failure 8ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 2410ms
     âœ“ renders and loads standards  964ms
     Ã— runs gap analysis and displays results 1439ms
 â¯ app/app/dashboard/page.test.tsx (4 tests | 1 failed) 1143ms
     âœ“ renders documents and standards  972ms
     âœ“ renders dashboard widgets 39ms
     âœ“ opens analysis modal and runs check 101ms
     Ã— shows staged documents and allows approval 28ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Error: Calling the test function inside another test function is not allowed. Please put it inside "describe" or "suite" so it can be properly collected.
 â¯ app/app/dashboard/page.test.tsx:129:9
    127|             expect(commitDocuments).toHaveBeenCalledWith(['1']);
    128|         });
    129|         it('allows rejecting staged documents', async () => {
       |         ^
    130|             const mockDocuments = [
    131|                 { id: '1', title: 'Doc 1', status: 'STAGED', createdAtâ€¦

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  3 failed (3)
      Tests  4 failed | 6 passed (10)
   Start at  00:53:41
   Duration  2.93s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x52 

 â¯ lib/api.test.ts (4 tests | 2 failed) 207ms
       âœ“ should fetch documents successfully 75ms
       âœ“ should throw error on failure 31ms
       Ã— should upload document successfully 84ms
       Ã— should throw error on upload failure 8ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 2410ms
     âœ“ renders and loads standards  964ms
     Ã— runs gap analysis and displays results 1439ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 1 error:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.test.tsx:155:0: ERROR: Unexpected "}"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.test.tsx:155:0
  
  Unexpected "}"
  153 |      });
  154 |  });
  155 |  });
      |  ^
  156 |  
  157 |  
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  3 failed (3)
      Tests  3 failed | 3 passed (6)
   Start at  00:54:16
   Duration  781ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x53 

 â¯ lib/api.test.ts (4 tests | 2 failed) 207ms
       âœ“ should fetch documents successfully 75ms
       âœ“ should throw error on failure 31ms
       Ã— should upload document successfully 84ms
       Ã— should throw error on upload failure 8ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 2410ms
     âœ“ renders and loads standards  964ms
     Ã— runs gap analysis and displays results 1439ms
 âœ“ app/app/dashboard/page.test.tsx (5 tests) 555ms

 Test Files  2 failed | 1 passed (3)
      Tests  3 failed | 8 passed (11)
   Start at  00:54:55
   Duration  1.85s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 â¯ lib/api.test.ts (4 tests | 2 failed) 27ms
       âœ“ should fetch documents successfully 5ms
       âœ“ should throw error on failure 13ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 3ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 1354ms
     âœ“ renders report data successfully  857ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 1030ms
     âœ“ renders and loads standards  640ms
     âœ“ runs gap analysis and displays results  388ms
 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 3768ms
     âœ“ renders document details and download button  3416ms
     âœ“ triggers export on button click  349ms
 âœ“ app/app/dashboard/page.test.tsx (5 tests) 1403ms
     âœ“ renders documents and standards  775ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯


 Test Files  1 failed | 4 passed (5)
      Tests  2 failed | 14 passed (16)
   Start at  01:04:04
   Duration  40.43s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x55 

 â¯ lib/api.test.ts (4 tests | 2 failed) 27ms
       âœ“ should fetch documents successfully 5ms
       âœ“ should throw error on failure 13ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 3ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

 âœ“ app/app/dashboard/page.test.tsx (5 tests) 731ms

 Test Files  1 failed | 1 passed (2)
      Tests  2 failed | 7 passed (9)
   Start at  01:04:46
   Duration  1.93s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x56 

 â¯ lib/api.test.ts (4 tests | 2 failed) 27ms
       âœ“ should fetch documents successfully 5ms
       âœ“ should throw error on failure 13ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 3ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications Error: [vitest] No "fetchNotifications" export is defined on the "@/lib/api" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:310:17[90m)[39m
    at Object.get [90m(file:///Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mvitest[24m/dist/chunks/startModuleRunner.W28wBIgJ.js:383:16[90m)[39m
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:10:32[90m)[39m
    at [90m/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:19:9
    at Object.react_stack_bottom_frame [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:25989:20[90m)[39m
    at runWithFiberInDEV [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:874:13[90m)[39m
    at commitHookEffectListMount [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13249:29[90m)[39m
    at commitHookPassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:13336:11[90m)[39m
    at commitPassiveMountOnFiber [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15484:13[90m)[39m
    at recursivelyTraversePassiveMountEffects [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mnode_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15439:11[90m)[39m {
  codeFrame: [32m'vi.mock(import("@/lib/api"), async (importOriginal) => {\n'[39m +
    [32m'  const actual = await importOriginal()\n'[39m +
    [32m'  return {\n'[39m +
    [32m'    ...actual,\n'[39m +
    [32m'    // your mocked methods\n'[39m +
    [32m'  }\n'[39m +
    [32m'})'[39m
}

 âœ“ app/app/dashboard/page.test.tsx (5 tests) 1064ms
     âœ“ renders documents and standards  399ms
     âœ“ opens analysis modal and runs check  375ms

 Test Files  1 failed | 1 passed (2)
      Tests  2 failed | 7 passed (9)
   Start at  01:04:50
   Duration  2.28s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x57 

 â¯ lib/api.test.ts (4 tests | 2 failed) 27ms
       âœ“ should fetch documents successfully 5ms
       âœ“ should throw error on failure 13ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 3ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

 âœ“ app/app/dashboard/page.test.tsx (5 tests) 2421ms
     âœ“ renders documents and standards  1315ms
     âœ“ renders dashboard widgets  340ms
     âœ“ opens analysis modal and runs check  568ms

 Test Files  1 failed | 1 passed (2)
      Tests  2 failed | 7 passed (9)
   Start at  01:05:01
   Duration  5.94s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x58 

 â¯ lib/api.test.ts (4 tests | 2 failed) 27ms
       âœ“ should fetch documents successfully 5ms
       âœ“ should throw error on failure 13ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 3ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/dashboard/page.test.tsx (6 tests | 1 failed) 2224ms
     âœ“ renders documents and standards  453ms
     âœ“ renders dashboard widgets  348ms
     âœ“ opens analysis modal and runs check 240ms
     âœ“ shows staged documents and allows approval 61ms
     âœ“ allows rejecting staged documents 105ms
     Ã— shows notifications 1016ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed (2)
      Tests  3 failed | 7 passed (10)
     Errors  1 error
   Start at  01:05:10
   Duration  3.80s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x59 

 â¯ lib/api.test.ts (4 tests | 2 failed) 27ms
       âœ“ should fetch documents successfully 5ms
       âœ“ should throw error on failure 13ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 3ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/dashboard/page.test.tsx (6 tests | 1 failed) 1707ms
     âœ“ renders documents and standards 253ms
     âœ“ renders dashboard widgets 18ms
     âœ“ opens analysis modal and runs check  353ms
     âœ“ shows staged documents and allows approval 42ms
     âœ“ allows rejecting staged documents 33ms
     Ã— shows notifications 1005ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed (2)
      Tests  3 failed | 7 passed (10)
     Errors  1 error
   Start at  01:05:17
   Duration  3.79s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x60 

 â¯ lib/api.test.ts (4 tests | 2 failed) 27ms
       âœ“ should fetch documents successfully 5ms
       âœ“ should throw error on failure 13ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 3ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/dashboard/page.test.tsx (6 tests | 1 failed) 1863ms
     âœ“ renders documents and standards  477ms
     âœ“ renders dashboard widgets 77ms
     âœ“ opens analysis modal and runs check 227ms
     âœ“ shows staged documents and allows approval 51ms
     âœ“ allows rejecting staged documents 25ms
     Ã— shows notifications 1006ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed (2)
      Tests  3 failed | 7 passed (10)
     Errors  1 error
   Start at  01:05:31
   Duration  2.90s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 â¯ lib/api.test.ts (4 tests | 2 failed) 908ms
       âœ“ should fetch documents successfully  467ms
       âœ“ should throw error on failure 21ms
       Ã— should upload document successfully 385ms
       Ã— should throw error on upload failure 5ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 4049ms
     âœ“ renders loading state initially  1448ms
     âœ“ renders report data successfully  2153ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 1723ms
     âœ“ renders and loads standards  1146ms
     âœ“ runs gap analysis and displays results  575ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 4229ms
     âœ“ renders document details and download button  3837ms
     âœ“ triggers export on button click  390ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/dashboard/page.test.tsx (6 tests | 1 failed) 5660ms
     âœ“ renders documents and standards  1598ms
     âœ“ renders dashboard widgets  408ms
     âœ“ opens analysis modal and runs check  1511ms
     âœ“ shows staged documents and allows approval  773ms
     âœ“ allows rejecting staged documents 263ms
     Ã— shows notifications 1067ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/3]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/3]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed | 3 passed (5)
      Tests  3 failed | 14 passed (17)
     Errors  1 error
   Start at  01:10:06
   Duration  72.02s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/hooks.ts x62 

 â¯ lib/api.test.ts (4 tests | 2 failed) 908ms
       âœ“ should fetch documents successfully  467ms
       âœ“ should throw error on failure 21ms
       Ã— should upload document successfully 385ms
       Ã— should throw error on upload failure 5ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/dashboard/page.test.tsx (6 tests | 1 failed) 2660ms
     âœ“ renders documents and standards  523ms
     âœ“ renders dashboard widgets 52ms
     âœ“ opens analysis modal and runs check  333ms
     âœ“ shows staged documents and allows approval  412ms
     âœ“ allows rejecting staged documents  321ms
     Ã— shows notifications 1017ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed (2)
      Tests  3 failed | 7 passed (10)
     Errors  1 error
   Start at  01:11:04
   Duration  5.73s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 â¯ lib/api.test.ts (4 tests | 2 failed) 90ms
       âœ“ should fetch documents successfully 77ms
       âœ“ should throw error on failure 1ms
       Ã— should upload document successfully 5ms
       Ã— should throw error on upload failure 4ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at processTimers (node:internal/timers:516:9)[39m

 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 1670ms
     âœ“ renders and loads standards  430ms
     Ã— runs gap analysis and displays results 1180ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 1532ms
     âœ“ renders report data successfully  1101ms
     âœ“ renders error state on failure  302ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 4047ms
     âœ“ renders document details and download button  4001ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/dashboard/page.test.tsx (6 tests | 1 failed) 5795ms
     âœ“ renders documents and standards  2503ms
     âœ“ renders dashboard widgets  989ms
     âœ“ opens analysis modal and runs check  885ms
     âœ“ shows staged documents and allows approval 132ms
     âœ“ allows rejecting staged documents 206ms
     Ã— shows notifications 1069ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 4 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/4]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/4]â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
TestingLibraryElementError: Unable to find an element with the text: Security Policy. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"max-w-6xl mx-auto"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
          [36m>[39m
            [0mGap Analysis[0m
          [36m</h1>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-gray-600"[39m
          [36m>[39m
            [0mIdentify missing required documents for ISO compliance.[0m
          [36m</p>[39m
        [36m</header>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white rounded-lg shadow p-6 mb-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-4 items-end"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex-1"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
              [36m>[39m
                [0mSelect ISO Standard[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"iso-1"[39m
                [36m>[39m
                  [0mISO 27001[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"[39m
            [36m>[39m
              [0mRun Gap Analysis[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50 p-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-6xl mx-auto"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"mb-8"[39m
          [36m>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-3xl font-bold text-gray-900"[39m
            [36m>[39m
              [0mGap Analysis[0m
            [36m</h1>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-gray-600"[39m
            [36m>[39m
              [0mIdentify missing required documents for ISO compliance.[0m
            [36m</p>[39m
          [36m</header>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-white rounded-lg shadow p-6 mb-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex gap-4 items-end"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex-1"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-2"[39m
                [36m>[39m
                  [0mSelect ISO Standard[0m
                [36m</label>[39m
                [36m<select[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border"[39m
                [36m>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"iso-1"[39m
                  [36m>[39m
                    [0mISO 27001[0m
                  [36m</option>[39m
                [36m</select>[39m
              [36m</div>[39m
              [36m<button[39m
                [33mclass[39m=[32m"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"[39m
              [36m>[39m
                [0mRun Gap Analysis[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/gap-analysis/page.test.tsx:62:15
     60|         fireEvent.click(screen.getByText('Run Gap Analysis'));
     61| 
     62|         await waitFor(() => {
       |               ^
     63|             expect(screen.getByText('Security Policy')).toBeDefined();
     64|             expect(screen.getByText('MISSING')).toBeDefined();

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/4]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  3 failed | 2 passed (5)
      Tests  4 failed | 13 passed (17)
     Errors  1 error
   Start at  01:11:27
   Duration  35.90s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/Header.tsx x64 

 â¯ lib/api.test.ts (4 tests | 2 failed) 90ms
       âœ“ should fetch documents successfully 77ms
       âœ“ should throw error on failure 1ms
       Ã— should upload document successfully 5ms
       Ã— should throw error on upload failure 4ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 1670ms
     âœ“ renders and loads standards  430ms
     Ã— runs gap analysis and displays results 1180ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/dashboard/page.test.tsx (6 tests | 1 failed) 5485ms
     âœ“ renders documents and standards  2031ms
     âœ“ renders dashboard widgets  544ms
     âœ“ opens analysis modal and runs check  1045ms
     âœ“ shows staged documents and allows approval 62ms
     âœ“ allows rejecting staged documents  557ms
     Ã— shows notifications 1172ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  3 failed (3)
      Tests  4 failed | 8 passed (12)
     Errors  1 error
   Start at  01:12:00
   Duration  9.69s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/Header.tsx x65 

 â¯ lib/api.test.ts (4 tests | 2 failed) 90ms
       âœ“ should fetch documents successfully 77ms
       âœ“ should throw error on failure 1ms
       Ã— should upload document successfully 5ms
       Ã— should throw error on upload failure 4ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 1670ms
     âœ“ renders and loads standards  430ms
     Ã— runs gap analysis and displays results 1180ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/dashboard/page.test.tsx (6 tests | 1 failed) 3775ms
     âœ“ renders documents and standards  1364ms
     âœ“ renders dashboard widgets 55ms
     âœ“ opens analysis modal and runs check  721ms
     âœ“ shows staged documents and allows approval  597ms
     âœ“ allows rejecting staged documents 22ms
     Ã— shows notifications 1014ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  3 failed (3)
      Tests  4 failed | 8 passed (12)
     Errors  1 error
   Start at  01:12:15
   Duration  6.78s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x66 

 â¯ lib/api.test.ts (4 tests | 2 failed) 90ms
       âœ“ should fetch documents successfully 77ms
       âœ“ should throw error on failure 1ms
       Ã— should upload document successfully 5ms
       Ã— should throw error on upload failure 4ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 1670ms
     âœ“ renders and loads standards  430ms
     Ã— runs gap analysis and displays results 1180ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 â¯ app/app/dashboard/page.test.tsx (6 tests | 1 failed) 2559ms
     âœ“ renders documents and standards 93ms
     âœ“ renders dashboard widgets  886ms
     âœ“ opens analysis modal and runs check  333ms
     âœ“ shows staged documents and allows approval 42ms
     âœ“ allows rejecting staged documents 192ms
     Ã— shows notifications 1012ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  3 failed (3)
      Tests  4 failed | 8 passed (12)
     Errors  1 error
   Start at  01:12:38
   Duration  8.24s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.test.tsx x67 

 â¯ lib/api.test.ts (4 tests | 2 failed) 90ms
       âœ“ should fetch documents successfully 77ms
       âœ“ should throw error on failure 1ms
       Ã— should upload document successfully 5ms
       Ã— should throw error on upload failure 4ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 1 failed) 1670ms
     âœ“ renders and loads standards  430ms
     Ã— runs gap analysis and displays results 1180ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 1815ms
     âœ“ renders documents and standards  316ms
     âœ“ renders dashboard widgets 32ms
     âœ“ opens analysis modal and runs check  353ms
     âœ“ shows staged documents and allows approval 41ms
     âœ“ allows rejecting staged documents 47ms
     Ã— shows notifications 1018ms
     Ã— shows upload progress 7ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/dashboard/page.test.tsx:202:30
    200|         // Trigger upload
    201|         const file = new File(['hello'], 'hello.png', { type: 'image/pâ€¦
    202|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
    203|         Object.defineProperty(input, 'files', { value: [file] });
    204|         fireEvent.change(input);

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  3 failed (3)
      Tests  5 failed | 8 passed (13)
     Errors  1 error
   Start at  01:13:10
   Duration  2.63s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 â¯ lib/api.test.ts (4 tests | 2 failed) 30ms
       âœ“ should fetch documents successfully 5ms
       âœ“ should throw error on failure 11ms
       Ã— should upload document successfully 10ms
       Ã— should throw error on upload failure 1ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 2172ms
     âœ“ renders loading state initially  595ms
     âœ“ renders report data successfully  1395ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 2436ms
     âœ“ renders and loads standards  1308ms
     âœ“ runs gap analysis and displays results  901ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 3753ms
     âœ“ renders document details and download button  3499ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 2234ms
     âœ“ renders documents and standards  512ms
     âœ“ renders dashboard widgets 131ms
     âœ“ opens analysis modal and runs check 285ms
     âœ“ shows staged documents and allows approval 180ms
     âœ“ allows rejecting staged documents 109ms
     Ã— shows notifications 1009ms
     Ã— shows upload progress 7ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 4 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/dashboard/page.test.tsx:202:30
    200|         // Trigger upload
    201|         const file = new File(['hello'], 'hello.png', { type: 'image/pâ€¦
    202|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
    203|         Object.defineProperty(input, 'files', { value: [file] });
    204|         fireEvent.change(input);

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/4]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/4]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/4]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed | 3 passed (5)
      Tests  4 failed | 14 passed (18)
     Errors  1 error
   Start at  01:48:51
   Duration  34.92s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 â¯ lib/api.test.ts (4 tests | 2 failed) 16ms
       âœ“ should fetch documents successfully 9ms
       âœ“ should throw error on failure 1ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 4ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 509ms
     âœ“ renders report data successfully  340ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 554ms
     âœ“ renders and loads standards  338ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 1223ms
     âœ“ renders document details and download button  1200ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 2473ms
     âœ“ renders documents and standards  688ms
     âœ“ renders dashboard widgets 264ms
     âœ“ opens analysis modal and runs check 261ms
     âœ“ shows staged documents and allows approval 183ms
     âœ“ allows rejecting staged documents 23ms
     Ã— shows notifications 1006ms
     Ã— shows upload progress 7ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 4 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/dashboard/page.test.tsx:202:30
    200|         // Trigger upload
    201|         const file = new File(['hello'], 'hello.png', { type: 'image/pâ€¦
    202|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
    203|         Object.defineProperty(input, 'files', { value: [file] });
    204|         fireEvent.change(input);

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/4]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/4]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/4]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed | 3 passed (5)
      Tests  4 failed | 14 passed (18)
     Errors  1 error
   Start at  01:53:03
   Duration  21.37s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x23 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 2473ms
     âœ“ renders documents and standards  688ms
     âœ“ renders dashboard widgets 264ms
     âœ“ opens analysis modal and runs check 261ms
     âœ“ shows staged documents and allows approval 183ms
     âœ“ allows rejecting staged documents 23ms
     Ã— shows notifications 1006ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 2 failed) 16ms
       âœ“ should fetch documents successfully 9ms
       âœ“ should throw error on failure 1ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 4ms
 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 228ms

 Test Files  2 failed | 1 passed (3)
      Tests  4 failed | 9 passed (13)
   Start at  01:53:27
   Duration  389ms

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x24 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 2473ms
     âœ“ renders documents and standards  688ms
     âœ“ renders dashboard widgets 264ms
     âœ“ opens analysis modal and runs check 261ms
     âœ“ shows staged documents and allows approval 183ms
     âœ“ allows rejecting staged documents 23ms
     Ã— shows notifications 1006ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 2 failed) 16ms
       âœ“ should fetch documents successfully 9ms
       âœ“ should throw error on failure 1ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 4ms
â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯â¯ Unhandled Error â¯â¯â¯â¯â¯â¯â¯
Error: [vitest-pool-runner]: Timeout waiting for worker to respond
 â¯ Timeout.<anonymous> node_modules/vitest/dist/chunks/cli-api.CbjxIXjQ.js:7341:58
 â¯ listOnTimeout node:internal/timers:581:17
 â¯ processTimers node:internal/timers:519:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed | 1 passed (3)
      Tests  4 failed | 9 passed (13)
     Errors  1 error
   Start at  01:55:42
   Duration  389ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  package.json 

 â¯ lib/api.test.ts (4 tests | 2 failed) 479ms
       âœ“ should fetch documents successfully 51ms
       âœ“ should throw error on failure 66ms
       Ã— should upload document successfully 342ms
       Ã— should throw error on upload failure 4ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 1840ms
     âœ“ renders loading state initially  914ms
     âœ“ renders report data successfully  896ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 677ms
     âœ“ runs gap analysis and displays results  411ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

 âœ“ app/app/page.test.tsx (1 test) 1196ms
     âœ“ renders a heading  1195ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 1460ms
     âœ“ renders document details and download button  1297ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 2212ms
     âœ“ renders documents and standards  639ms
     âœ“ renders dashboard widgets 125ms
     âœ“ opens analysis modal and runs check  343ms
     âœ“ shows staged documents and allows approval 22ms
     âœ“ allows rejecting staged documents 41ms
     Ã— shows notifications 1008ms
     Ã— shows upload progress 10ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 4 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/dashboard/page.test.tsx:202:30
    200|         // Trigger upload
    201|         const file = new File(['hello'], 'hello.png', { type: 'image/pâ€¦
    202|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
    203|         Object.defineProperty(input, 'files', { value: [file] });
    204|         fireEvent.change(input);

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/4]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/4]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/4]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed | 4 passed (6)
      Tests  4 failed | 15 passed (19)
     Errors  1 error
   Start at  02:16:16
   Duration  41.07s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 3 failed) 358ms
       Ã— should fetch documents successfully 352ms
       âœ“ should throw error on failure 3ms
       Ã— should upload document successfully 1ms
       Ã— should throw error on upload failure 0ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 410ms
     âœ“ renders report data successfully  357ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 756ms
     âœ“ renders and loads standards  431ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 2756ms
     âœ“ renders document details and download button  2729ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at processTimers (node:internal/timers:516:9)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 4537ms
     âœ“ renders documents and standards  1387ms
     âœ“ renders dashboard widgets  1171ms
     âœ“ opens analysis modal and runs check  530ms
     âœ“ shows staged documents and allows approval 117ms
     âœ“ allows rejecting staged documents 108ms
     Ã— shows notifications 1024ms
     Ã— shows upload progress 25ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 5 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/5]â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/dashboard/page.test.tsx:202:30
    200|         // Trigger upload
    201|         const file = new File(['hello'], 'hello.png', { type: 'image/pâ€¦
    202|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
    203|         Object.defineProperty(input, 'files', { value: [file] });
    204|         fireEvent.change(input);

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/5]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/5]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/5]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/5]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed | 3 passed (5)
      Tests  5 failed | 13 passed (18)
     Errors  1 error
   Start at  02:19:01
   Duration  26.58s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 3 failed) 31ms
       Ã— should fetch documents successfully 21ms
       âœ“ should throw error on failure 6ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 0ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:60:5)[39m
[90m    at listOnTimeout (node:internal/timers:545:9)[39m
[90m    at processTimers (node:internal/timers:519:7)[39m

 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 521ms
     âœ“ runs gap analysis and displays results  350ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 1370ms
     âœ“ renders loading state initially  462ms
     âœ“ renders report data successfully  894ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 2939ms
     âœ“ renders document details and download button  2707ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 4746ms
     âœ“ renders documents and standards  2035ms
     âœ“ renders dashboard widgets  652ms
     âœ“ opens analysis modal and runs check  431ms
     âœ“ shows staged documents and allows approval 284ms
     âœ“ allows rejecting staged documents 223ms
     Ã— shows notifications 1104ms
     Ã— shows upload progress 16ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 5 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/5]â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/dashboard/page.test.tsx:202:30
    200|         // Trigger upload
    201|         const file = new File(['hello'], 'hello.png', { type: 'image/pâ€¦
    202|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
    203|         Object.defineProperty(input, 'files', { value: [file] });
    204|         fireEvent.change(input);

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/5]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/5]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/5]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/5]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  2 failed | 3 passed (5)
      Tests  5 failed | 13 passed (18)
     Errors  1 error
   Start at  02:19:55
   Duration  43.20s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  tests/auth.spec.ts x1 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 4746ms
     âœ“ renders documents and standards  2035ms
     âœ“ renders dashboard widgets  652ms
     âœ“ opens analysis modal and runs check  431ms
     âœ“ shows staged documents and allows approval 284ms
     âœ“ allows rejecting staged documents 223ms
     Ã— shows notifications 1104ms
     Ã— shows upload progress 16ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 31ms
       Ã— should fetch documents successfully 21ms
       âœ“ should throw error on failure 6ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 0ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  tests/auth.spec.ts [ tests/auth.spec.ts ]
Error: No test suite found in file /Users/isak/Downloads/iso-doc-platform/frontend/tests/auth.spec.ts
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  3 failed (3)
      Tests  5 failed | 6 passed (11)
   Start at  02:20:35
   Duration  292ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  tests/auth.spec.ts x2 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 4746ms
     âœ“ renders documents and standards  2035ms
     âœ“ renders dashboard widgets  652ms
     âœ“ opens analysis modal and runs check  431ms
     âœ“ shows staged documents and allows approval 284ms
     âœ“ allows rejecting staged documents 223ms
     Ã— shows notifications 1104ms
     Ã— shows upload progress 16ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 31ms
       Ã— should fetch documents successfully 21ms
       âœ“ should throw error on failure 6ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 0ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  tests/auth.spec.ts [ tests/auth.spec.ts ]
Error: Playwright Test did not expect test() to be called here.
Most common reasons include:
- You are calling test() in a configuration file.
- You are calling test() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.
 â¯ TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:75:13
 â¯ TestTypeImpl._createTest node_modules/playwright/lib/common/testType.js:88:24
 â¯ node_modules/playwright/lib/transform/transform.js:275:12
 â¯ tests/auth.spec.ts:3:1
      1| import { test, expect } from '@playwright/test';
      2| 
      3| test('authentication flow', async ({ page }) => {
       | ^
      4|     // 1. Go to dashboard (should redirect to login)
      5|     await page.goto('http://localhost:3000/dashboard');

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  3 failed (3)
      Tests  5 failed | 6 passed (11)
   Start at  02:20:38
   Duration  99ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  tests/auth.spec.ts x3 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 2 failed) 4746ms
     âœ“ renders documents and standards  2035ms
     âœ“ renders dashboard widgets  652ms
     âœ“ opens analysis modal and runs check  431ms
     âœ“ shows staged documents and allows approval 284ms
     âœ“ allows rejecting staged documents 223ms
     Ã— shows notifications 1104ms
     Ã— shows upload progress 16ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 31ms
       Ã— should fetch documents successfully 21ms
       âœ“ should throw error on failure 6ms
       Ã— should upload document successfully 2ms
       Ã— should throw error on upload failure 0ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  tests/auth.spec.ts [ tests/auth.spec.ts ]
Error: Playwright Test did not expect test() to be called here.
Most common reasons include:
- You are calling test() in a configuration file.
- You are calling test() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.
 â¯ TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:75:13
 â¯ TestTypeImpl._createTest node_modules/playwright/lib/common/testType.js:88:24
 â¯ node_modules/playwright/lib/transform/transform.js:275:12
 â¯ tests/auth.spec.ts:3:1
      1| import { test, expect } from '@playwright/test';
      2| 
      3| test('authentication flow', async ({ page }) => {
       | ^
      4|     // 1. Go to dashboard (should redirect to login)
      5|     await page.goto('http://localhost:3000/dashboard');

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  3 failed (3)
      Tests  5 failed | 6 passed (11)
   Start at  02:20:53
   Duration  606ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  package.json 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 3 failed) 2999ms
       Ã— should fetch documents successfully 1428ms
       âœ“ should throw error on failure  1002ms
       Ã— should upload document successfully 377ms
       Ã— should throw error on upload failure 38ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m

 âœ“ app/app/page.test.tsx (1 test) 1456ms
     âœ“ renders a heading  1434ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 833ms
     âœ“ renders report data successfully  674ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
Failed to load notifications TypeError: Cannot read properties of undefined (reading 'filter')
    at loadNotifications [90m(/Users/isak/Downloads/iso-doc-platform/frontend/[39mlib/hooks.ts:12:33[90m)[39m

stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
An error occurred in the <ActivityWidget> component.

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://react.dev/link/error-boundaries to learn more about error boundaries.


stderr | app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
An update to DocumentView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to DocumentView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to DocumentView inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 1 failed) 6159ms
     Ã— renders document details and download button 5398ms
     âœ“ triggers export on button click  665ms
stderr | app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Dashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/dashboard/page.test.tsx (7 tests | 3 failed) 5875ms
     âœ“ renders documents and standards  1308ms
     Ã— renders dashboard widgets 1822ms
     âœ“ opens analysis modal and runs check  761ms
     âœ“ shows staged documents and allows approval  431ms
     âœ“ allows rejecting staged documents  362ms
     Ã— shows notifications 1037ms
     Ã— shows upload progress 126ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 370ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  tests/auth.spec.ts [ tests/auth.spec.ts ]
Error: Playwright Test did not expect test() to be called here.
Most common reasons include:
- You are calling test() in a configuration file.
- You are calling test() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.
 â¯ TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:75:13
 â¯ TestTypeImpl._createTest node_modules/playwright/lib/common/testType.js:88:24
 â¯ node_modules/playwright/lib/transform/transform.js:275:12
 â¯ tests/auth.spec.ts:3:1
      1| import { test, expect } from '@playwright/test';
      2| 
      3| test('authentication flow', async ({ page }) => {
       | ^
      4|     // 1. Go to dashboard (should redirect to login)
      5|     await page.goto('http://localhost:3000/dashboard');

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/8]â¯


â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
TestingLibraryElementError: Unable to find an element with the text: 85%. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<aside[39m
          [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
          [36m>[39m
            [36m<h1[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
            [36m>[39m
              [36m<span>[39m
                [0mğŸ›¡ï¸[0m
              [36m</span>[39m
              [0m ISO Doc[0m
            [36m</h1>[39m
          [36m</div>[39m
          [36m<nav[39m
            [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
          [36m>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
              [33mhref[39m=[32m"/app/dashboard"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“Š[0m
              [36m</span>[39m
              [0mDashboard[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/documents"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“[0m
              [36m</span>[39m
              [0mDocuments[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/gap-analysis"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ”[0m
              [36m</span>[39m
              [0mGap Analysis[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/reports"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mğŸ“‹[0m
              [36m</span>[39m
              [0mReports[0m
            [36m</a>[39m
            [36m<a[39m
              [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
              [33mhref[39m=[32m"/app/settings"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-xl"[39m
              [36m>[39m
                [0mâš™ï¸[0m
              [36m</span>[39m
              [0mSettings[0m
            [36m</a>[39m
          [36m</nav>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
            [36m>[39m
              [36m<h4[39m
                [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
              [36m>[39m
                [0mPro Plan[0m
              [36m</h4>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
              [36m>[39m
                [0mGet access to advanced AI features.[0m
              [36m</p>[39m
              [36m<button[39m
                [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
              [36m>[39m
                [0mUpgrade Now[0m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</aside>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex-1 flex flex-col"[39m
        [36m>[39m
          [36m<header[39m
            [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h2[39m
                [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
              [36m>[39m
                [0mDashboard[0m
              [36m</h2>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500"[39m
              [36m>[39m
                [0mWelcome back, User[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-1/3"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative w-full max-w-xl"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"relative"[39m
                [36m>[39m
                  [36m<input[39m
                    [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                    [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                    [33mtype[39m=[32m"text"[39m
                    [33mvalue[39m=[32m""[39m
                  [36m/>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-gray-400"[39m
                    [36m>[39m
                      [0mğŸ”[0m
                    [36m</span>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSearch[0m
                  [36m</button>[39m
                [36m</form>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-4"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
                [36m>[39m
                  [0mğŸ””[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
              [36m>[39m
                [0mU[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</header>[39m
          [36m<main[39m
            [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<h3[39m
                          [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                        [36m>[39m
                          [0mRecent Documents[0m
                        [36m</h3>[39m
                        [36m<p[39m
                          [33mclass[39m=[32m"text-sm text-gray-500"[39m
                        [36m>[39m
                          [0mManage and analyze your files[0m
                        [36m</p>[39m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative"[39m
                      [36m>[39m
                        [36m<input[39m
                          [33mclass[39m=[32m"hidden"[39m
                          [33mid[39m=[32m"file-upload"[39m
                          [33mmultiple[39m=[32m""[39m
                          [33mtype[39m=[32m"file"[39m
                        [36m/>[39m
                        [36m<label[39m
                          [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                          [33mfor[39m=[32m"file-upload"[39m
                        [36m>[39m
                          [36m<span>[39m
                            [0mâ˜ï¸[0m
                          [36m</span>[39m
                          [0mUpload New[0m
                        [36m</label>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"overflow-x-auto"[39m
                    [36m>[39m
                      [36m<table[39m
                        [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<thead[39m
                          [33mclass[39m=[32m"bg-gray-50"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDocument[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mStatus[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mDate[0m
                            [36m</th>[39m
                            [36m<th[39m
                              [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                            [36m>[39m
                              [0mActions[0m
                            [36m</th>[39m
                          [36m</tr>[39m
                        [36m</thead>[39m
                        [36m<tbody[39m
                          [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                        [36m>[39m
                          [36m<tr>[39m
                            [36m<td[39m
                              [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                              [33mcolspan[39m=[32m"4"[39m
                            [36m>[39m
                              [36m<div[39m
                                [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                              [36m>[39m
                                [36m<span[39m
                                  [33mclass[39m=[32m"text-4xl"[39m
                                [36m>[39m
                                  [0mğŸ“„[0m
                                [36m</span>[39m
                                [36m<p>[39m
                                  [0mNo documents found[0m
                                [36m</p>[39m
                                [36m<p[39m
                                  [33mclass[39m=[32m"text-sm"[39m
                                [36m>[39m
                                  [0mUpload a document to get started[0m
                                [36m</p>[39m
                              [36m</div>[39m
                            [36m</td>[39m
                          [36m</tr>[39m
                        [36m</tbody>[39m
                      [36m</table>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"space-y-8"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                  [36m>[39m
                    [36m<h3[39m
                      [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                    [36m>[39m
                      [0mNeed Help?[0m
                    [36m</h3>[39m
                    [36m<p[39m
                      [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                    [36m>[39m
                      [0mAsk our AI Auditor anything about your compliance status.[0m
                    [36m</p>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                    [36m>[39m
                      [0mStart Chat[0m
                    [36m</button>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</main>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:70:15
     68|         render(<Dashboard />);
     69| 
     70|         await waitFor(() => {
       |               ^
     71|             expect(screen.getByText('85%')).toBeDefined();
     72|             expect(screen.getByText('Total Documents')).toBeDefined();

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/8]â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
TestingLibraryElementError: Unable to find an element with the text: 1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div />[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ app/app/dashboard/page.test.tsx:168:15
    166|         render(<Dashboard />);
    167| 
    168|         await waitFor(() => {
       |               ^
    169|             expect(screen.getByText('1')).toBeDefined(); // Unread couâ€¦
    170|         });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/8]â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 lg:grid-cols-3 gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2 space-y-6"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"text-lg font-semibold text-gray-900"[39m
                      [36m>[39m
                        [0mRecent Documents[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mManage and analyze your files[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"relative"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"hidden"[39m
                        [33mid[39m=[32m"file-upload"[39m
                        [33mmultiple[39m=[32m""[39m
                        [33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                        [33mfor[39m=[32m"file-upload"[39m
                      [36m>[39m
                        [36m<span>[39m
                          [0mâ˜ï¸[0m
                        [36m</span>[39m
                        [0mUpload New[0m
                      [36m</label>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"overflow-x-auto"[39m
                  [36m>[39m
                    [36m<table[39m
                      [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                    [36m>[39m
                      [36m<thead[39m
                        [33mclass[39m=[32m"bg-gray-50"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDocument[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mStatus[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mDate[0m
                          [36m</th>[39m
                          [36m<th[39m
                            [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                          [36m>[39m
                            [0mActions[0m
                          [36m</th>[39m
                        [36m</tr>[39m
                      [36m</thead>[39m
                      [36m<tbody[39m
                        [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                      [36m>[39m
                        [36m<tr>[39m
                          [36m<td[39m
                            [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                            [33mcolspan[39m=[32m"4"[39m
                          [36m>[39m
                            [36m<div[39m
                              [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                            [36m>[39m
                              [36m<span[39m
                                [33mclass[39m=[32m"text-4xl"[39m
                              [36m>[39m
                                [0mğŸ“„[0m
                              [36m</span>[39m
                              [36m<p>[39m
                                [0mNo documents found[0m
                              [36m</p>[39m
                              [36m<p[39m
                                [33mclass[39m=[32m"text-sm"[39m
                              [36m>[39m
                                [0mUpload a document to get started[0m
                              [36m</p>[39m
                            [36m</div>[39m
                          [36m</td>[39m
                        [36m</tr>[39m
                      [36m</tbody>[39m
                    [36m</table>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"space-y-8"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 text-white"[39m
                [36m>[39m
                  [36m<h3[39m
                    [33mclass[39m=[32m"text-lg font-semibold mb-2"[39m
                  [36m>[39m
                    [0mNeed Help?[0m
                  [36m</h3>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-blue-100 text-sm mb-4"[39m
                  [36m>[39m
                    [0mAsk our AI Auditor anything about your compliance status.[0m
                  [36m</p>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"w-full bg-white text-blue-600 py-2 rounded-lg font-medium hover:bg-blue-50 transition"[39m
                  [36m>[39m
                    [0mStart Chat[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/dashboard/page.test.tsx:202:30
    200|         // Trigger upload
    201|         const file = new File(['hello'], 'hello.png', { type: 'image/pâ€¦
    202|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
    203|         Object.defineProperty(input, 'files', { value: [file] });
    204|         fireEvent.change(input);

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/8]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/8]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/8]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/8]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 â¯ app/app/documents/[id]/page.test.tsx:24:5
     22|     });
     23| 
     24|     it('renders document details and download button', async () => {
       |     ^
     25|         const mockDocument = {
     26|             id: 'doc-1',

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/8]â¯

â¯â¯â¯â¯â¯â¯ Unhandled Errors â¯â¯â¯â¯â¯â¯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

â¯â¯â¯â¯â¯ Uncaught Exception â¯â¯â¯â¯â¯
TypeError: Cannot read properties of undefined (reading 'length')
 â¯ ActivityWidget app/components/ActivityWidget.tsx:14:27
     12|             </div>
     13|             <div className="divide-y divide-gray-100">
     14|                 {activity.length === 0 ? (
       |                           ^
     15|                     <div className="p-6 text-center text-gray-500">No â€¦
     16|                 ) : (
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41
 â¯ renderRootSync node_modules/react-dom/cjs/react-dom-client.development.js:17450:11
 â¯ performWorkOnRoot node_modules/react-dom/cjs/react-dom-client.development.js:16583:35

This error originated in "app/app/dashboard/page.test.tsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "shows notifications". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯


 Test Files  4 failed | 3 passed (7)
      Tests  7 failed | 12 passed (19)
     Errors  1 error
   Start at  02:21:06
   Duration  74.40s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
Test removed... [ tests/auth.spec.ts ]

c[3J RERUN  app/app/dashboard/page.tsx x74 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2999ms
       Ã— should fetch documents successfully 1428ms
       âœ“ should throw error on failure  1002ms
       Ã— should upload document successfully 377ms
       Ã— should throw error on upload failure 38ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 1 failed) 6159ms
     Ã— renders document details and download button 5398ms
     âœ“ triggers export on button click  665ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 285ms
     Ã— renders documents and standards 225ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 3ms
     Ã— allows rejecting staged documents 28ms
     Ã— shows notifications 11ms
     Ã— shows upload progress 11ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:38:5
     36|     const [stats, setStats] = useState<any>(null);
     37| 
     38|     useCopilotReadable({
       |     ^
     39|         description: 'Dashboard document lists visible to the user',
     40|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  3 failed (3)
      Tests  11 failed | 2 passed (13)
   Start at  02:26:09
   Duration  9.86s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x75 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2999ms
       Ã— should fetch documents successfully 1428ms
       âœ“ should throw error on failure  1002ms
       Ã— should upload document successfully 377ms
       Ã— should throw error on upload failure 38ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 1 failed) 6159ms
     Ã— renders document details and download button 5398ms
     âœ“ triggers export on button click  665ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 568ms
     Ã— renders documents and standards 414ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 71ms
     Ã— shows staged documents and allows approval 13ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:38:5
     36|     const [stats, setStats] = useState<any>(null);
     37| 
     38|     useCopilotReadable({
       |     ^
     39|         description: 'Dashboard document lists visible to the user',
     40|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  3 failed (3)
      Tests  11 failed | 2 passed (13)
   Start at  02:27:05
   Duration  8.90s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x29 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 568ms
     Ã— renders documents and standards 414ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 71ms
     Ã— shows staged documents and allows approval 13ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2999ms
       Ã— should fetch documents successfully 1428ms
       âœ“ should throw error on failure  1002ms
       Ã— should upload document successfully 377ms
       Ã— should throw error on upload failure 38ms
 âœ“ app/app/documents/[id]/page.test.tsx (2 tests) 1090ms
     âœ“ renders document details and download button  1075ms

 Test Files  2 failed | 1 passed (3)
      Tests  10 failed | 3 passed (13)
   Start at  02:27:39
   Duration  4.12s

 PASS  Waiting for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x30 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 568ms
     Ã— renders documents and standards 414ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 71ms
     Ã— shows staged documents and allows approval 13ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2999ms
       Ã— should fetch documents successfully 1428ms
       âœ“ should throw error on failure  1002ms
       Ã— should upload document successfully 377ms
       Ã— should throw error on upload failure 38ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 69ms
     Ã— triggers export on button click 5ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:33:5
     31|     const [suggestedOwner, setSuggestedOwner] = useState<string | nullâ€¦
     32| 
     33|     useCopilotReadable({
       |     ^
     34|         description: 'Document metadata',
     35|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  3 failed (3)
      Tests  12 failed | 1 passed (13)
   Start at  02:27:49
   Duration  4.52s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x31 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 568ms
     Ã— renders documents and standards 414ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 71ms
     Ã— shows staged documents and allows approval 13ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2999ms
       Ã— should fetch documents successfully 1428ms
       âœ“ should throw error on failure  1002ms
       Ã— should upload document successfully 377ms
       Ã— should throw error on upload failure 38ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 29ms
     Ã— renders document details and download button 23ms
     Ã— triggers export on button click 4ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:33:5
     31|     const [suggestedOwner, setSuggestedOwner] = useState<string | nullâ€¦
     32| 
     33|     useCopilotReadable({
       |     ^
     34|         description: 'Document metadata',
     35|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  3 failed (3)
      Tests  12 failed | 1 passed (13)
   Start at  02:28:22
   Duration  3.27s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x32 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 568ms
     Ã— renders documents and standards 414ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 71ms
     Ã— shows staged documents and allows approval 13ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2999ms
       Ã— should fetch documents successfully 1428ms
       âœ“ should throw error on failure  1002ms
       Ã— should upload document successfully 377ms
       Ã— should throw error on upload failure 38ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 50ms
     Ã— renders document details and download button 48ms
     Ã— triggers export on button click 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:33:5
     31|     const [suggestedOwner, setSuggestedOwner] = useState<string | nullâ€¦
     32| 
     33|     useCopilotReadable({
       |     ^
     34|         description: 'Document metadata',
     35|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  3 failed (3)
      Tests  12 failed | 1 passed (13)
   Start at  02:28:50
   Duration  3.32s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  package.json 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 3 failed) 476ms
       Ã— should fetch documents successfully 135ms
       âœ“ should throw error on failure 132ms
       Ã— should upload document successfully 182ms
       Ã— should throw error on upload failure 0ms
 âœ“ app/app/page.test.tsx (1 test) 2212ms
     âœ“ renders a heading  2209ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 357ms
     âœ“ renders and loads standards  321ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 577ms
     âœ“ renders report data successfully  420ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 25ms
     Ã— renders documents and standards 19ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 63ms
     Ã— renders document details and download button 52ms
     Ã— triggers export on button click 10ms

â¯â¯â¯â¯â¯â¯ Failed Tests 12 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:38:5
     36|     const [stats, setStats] = useState<any>(null);
     37| 
     38|     useCopilotReadable({
       |     ^
     39|         description: 'Dashboard document lists visible to the user',
     40|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/12]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/12]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/12]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/12]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:33:5
     31|     const [suggestedOwner, setSuggestedOwner] = useState<string | nullâ€¦
     32| 
     33|     useCopilotReadable({
       |     ^
     34|         description: 'Document metadata',
     35|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/12]â¯


 Test Files  3 failed | 3 passed (6)
      Tests  12 failed | 7 passed (19)
   Start at  02:28:56
   Duration  63.96s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x34 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 25ms
     Ã— renders documents and standards 19ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 476ms
       Ã— should fetch documents successfully 135ms
       âœ“ should throw error on failure 132ms
       Ã— should upload document successfully 182ms
       Ã— should throw error on upload failure 0ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 16ms
     Ã— renders document details and download button 11ms
     Ã— triggers export on button click 4ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:33:5
     31|     const [suggestedOwner, setSuggestedOwner] = useState<string | nullâ€¦
     32| 
     33|     useCopilotReadable({
       |     ^
     34|         description: 'Document metadata',
     35|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  3 failed (3)
      Tests  12 failed | 1 passed (13)
   Start at  02:29:31
   Duration  1.18s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  package.json 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 3 failed) 301ms
       Ã— should fetch documents successfully 72ms
       âœ“ should throw error on failure 182ms
       Ã— should upload document successfully 45ms
       Ã— should throw error on upload failure 0ms
 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 1030ms
     âœ“ renders and loads standards  407ms
     âœ“ runs gap analysis and displays results  620ms
 âœ“ app/app/page.test.tsx (1 test) 3394ms
     âœ“ renders a heading  3390ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 1039ms
     âœ“ renders report data successfully  774ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 36ms
     Ã— renders documents and standards 19ms
     Ã— renders dashboard widgets 4ms
     Ã— opens analysis modal and runs check 4ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 17ms
     Ã— renders document details and download button 13ms
     Ã— triggers export on button click 3ms

â¯â¯â¯â¯â¯â¯ Failed Tests 12 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:38:5
     36|     const [stats, setStats] = useState<any>(null);
     37| 
     38|     useCopilotReadable({
       |     ^
     39|         description: 'Dashboard document lists visible to the user',
     40|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/12]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/12]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/12]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/12]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:33:5
     31|     const [suggestedOwner, setSuggestedOwner] = useState<string | nullâ€¦
     32| 
     33|     useCopilotReadable({
       |     ^
     34|         description: 'Document metadata',
     35|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/12]â¯


 Test Files  3 failed | 3 passed (6)
      Tests  12 failed | 7 passed (19)
   Start at  02:42:49
   Duration  59.86s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

 âœ“ app/app/gap-analysis/page.test.tsx (2 tests) 163ms
stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 âœ“ app/app/reports/[id]/page.test.tsx (3 tests) 481ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 59ms
     Ã— renders document details and download button 13ms
     Ã— triggers export on button click 45ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 128ms
     Ã— renders documents and standards 24ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 84ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 11ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯ Failed Tests 12 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:38:5
     36|     const [stats, setStats] = useState<any>(null);
     37| 
     38|     useCopilotReadable({
       |     ^
     39|         description: 'Dashboard document lists visible to the user',
     40|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/12]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/12]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/12]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/12]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:33:5
     31|     const [suggestedOwner, setSuggestedOwner] = useState<string | nullâ€¦
     32| 
     33|     useCopilotReadable({
       |     ^
     34|         description: 'Document metadata',
     35|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/12]â¯


 Test Files  3 failed | 2 passed (5)
      Tests  12 failed | 6 passed (18)
   Start at  02:58:37
   Duration  31.57s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x37 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 128ms
     Ã— renders documents and standards 24ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 84ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 11ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 16ms
     Ã— renders document details and download button 14ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:34:5
     32|     const [suggestedOwner, setSuggestedOwner] = useState<string | nullâ€¦
     33| 
     34|     useCopilotReadable({
       |     ^
     35|         description: 'Document metadata',
     36|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  3 failed (3)
      Tests  12 failed | 1 passed (13)
   Start at  02:59:57
   Duration  2.81s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/gap-analysis/page.tsx x19 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 128ms
     Ã— renders documents and standards 24ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 84ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 11ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 16ms
     Ã— renders document details and download button 14ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 87ms
     Ã— renders and loads standards 73ms
     Ã— runs gap analysis and displays results 4ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > renders and loads standards
 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ GapAnalysisPage app/app/gap-analysis/page.tsx:15:5
     13|     const [report, setReport] = useState<any>(null);
     14| 
     15|     useCopilotReadable({
       |     ^
     16|         description: 'Available ISO standards for gap analysis',
     17|         value: standards,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  4 failed (4)
      Tests  14 failed | 1 passed (15)
   Start at  03:05:18
   Duration  1.60s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/gap-analysis/page.tsx x20 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 128ms
     Ã— renders documents and standards 24ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 84ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 11ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 16ms
     Ã— renders document details and download button 14ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 42ms
     Ã— renders and loads standards 34ms
     Ã— runs gap analysis and displays results 6ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > renders and loads standards
 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ GapAnalysisPage app/app/gap-analysis/page.tsx:15:5
     13|     const [report, setReport] = useState<any>(null);
     14| 
     15|     useCopilotReadable({
       |     ^
     16|         description: 'Available ISO standards for gap analysis',
     17|         value: standards,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  4 failed (4)
      Tests  14 failed | 1 passed (15)
   Start at  03:05:24
   Duration  1.18s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/reports/[id]/page.tsx x23 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 128ms
     Ã— renders documents and standards 24ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 84ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 11ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 16ms
     Ã— renders document details and download button 14ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 42ms
     Ã— renders and loads standards 34ms
     Ã— runs gap analysis and displays results 6ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 3 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders loading state initially
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders report data successfully
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders error state on failure
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ ComplianceReportPage app/app/reports/[id]/page.tsx:51:5
     49|     }
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Aktiv compliance-rapport med detaljerte resultatâ€¦
     53|         value: report,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯


 Test Files  5 failed (5)
      Tests  17 failed | 1 passed (18)
   Start at  03:05:29
   Duration  1.31s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/gap-analysis/page.tsx x21 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 128ms
     Ã— renders documents and standards 24ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 84ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 11ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 16ms
     Ã— renders document details and download button 14ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > renders and loads standards
 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ GapAnalysisPage app/app/gap-analysis/page.tsx:13:5
     11|     const [report, setReport] = useState<any>(null);
     12| 
     13|     useCopilotReadable({
       |     ^
     14|         description: 'Available ISO standards for gap analysis',
     15|         value: standards,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  5 failed (5)
      Tests  17 failed | 1 passed (18)
   Start at  03:05:43
   Duration  1.68s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x79 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 16ms
     Ã— renders document details and download button 14ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 189ms
     Ã— renders documents and standards 177ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:38:5
     36|     const [stats, setStats] = useState<any>(null);
     37| 
     38|     useCopilotReadable({
       |     ^
     39|         description: 'Dashboard document lists visible to the user',
     40|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  5 failed (5)
      Tests  17 failed | 1 passed (18)
   Start at  03:09:02
   Duration  6.13s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x38 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 189ms
     Ã— renders documents and standards 177ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 18ms
     Ã— renders document details and download button 15ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:34:5
     32|     const [suggestedOwner, setSuggestedOwner] = useState<string | nullâ€¦
     33| 
     34|     useCopilotReadable({
       |     ^
     35|         description: 'Document metadata',
     36|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  5 failed (5)
      Tests  17 failed | 1 passed (18)
   Start at  03:09:15
   Duration  4.47s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x39 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 189ms
     Ã— renders documents and standards 177ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 44ms
     Ã— renders document details and download button 41ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:42:5
     40|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     41| 
     42|     useCopilotReadable({
       |     ^
     43|         description: 'Document metadata',
     44|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  5 failed (5)
      Tests  17 failed | 1 passed (18)
   Start at  03:14:01
   Duration  1.61s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x40 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 189ms
     Ã— renders documents and standards 177ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:42:5
     40|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     41| 
     42|     useCopilotReadable({
       |     ^
     43|         description: 'Document metadata',
     44|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  5 failed (5)
      Tests  17 failed | 1 passed (18)
   Start at  03:14:14
   Duration  2.83s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/page.test.tsx x1 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 189ms
     Ã— renders documents and standards 177ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 4 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentsPage app/app/documents/page.tsx:21:5
     19|     const [uploading, setUploading] = useState(false);
     20| 
     21|     useCopilotReadable({
       |     ^
     22|         description: 'List of all documents',
     23|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:14:20
   Duration  2.23s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x41 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 189ms
     Ã— renders documents and standards 177ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 17ms
     Ã— renders document details and download button 15ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:42:5
     40|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     41| 
     42|     useCopilotReadable({
       |     ^
     43|         description: 'Document metadata',
     44|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:14:31
   Duration  1.87s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x80 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 17ms
     Ã— renders document details and download button 15ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 40ms
     Ã— renders documents and standards 21ms
     Ã— renders dashboard widgets 4ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 6ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:38:5
     36|     const [stats, setStats] = useState<any>(null);
     37| 
     38|     useCopilotReadable({
       |     ^
     39|         description: 'Dashboard document lists visible to the user',
     40|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:16:45
   Duration  4.59s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x81 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 17ms
     Ã— renders document details and download button 15ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 28ms
     Ã— renders documents and standards 18ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:38:5
     36|     const [stats, setStats] = useState<any>(null);
     37| 
     38|     useCopilotReadable({
       |     ^
     39|         description: 'Dashboard document lists visible to the user',
     40|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:16:53
   Duration  3.74s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x42 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 28ms
     Ã— renders documents and standards 18ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 2ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 36ms
     Ã— renders document details and download button 33ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:42:5
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:17:53
   Duration  1.48s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x43 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 28ms
     Ã— renders documents and standards 18ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 2ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 17ms
     Ã— renders document details and download button 14ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:50:5
     48|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     49| 
     50|     useCopilotReadable({
       |     ^
     51|         description: 'Document metadata',
     52|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:17:56
   Duration  961ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x44 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 28ms
     Ã— renders documents and standards 18ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 2ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 45ms
     Ã— renders document details and download button 42ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:50:5
     48|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     49| 
     50|     useCopilotReadable({
       |     ^
     51|         description: 'Document metadata',
     52|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:17:59
   Duration  1.03s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x45 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 28ms
     Ã— renders documents and standards 18ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 2ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:50:5
     48|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     49| 
     50|     useCopilotReadable({
       |     ^
     51|         description: 'Document metadata',
     52|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:18:21
   Duration  1.62s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x82 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 4 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:245:50: ERROR: Unexpected closing "tr" tag does not match opening "td" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:246:46: ERROR: The character "}" is not valid inside a JSX element
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:247:42: ERROR: Unexpected closing "tbody" tag does not match opening "tr" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:248:44: ERROR: Unterminated regular expression
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:245:50
  
  Unexpected closing "tr" tag does not match opening "td" tag
  243 |                                                              )}
  244 |                                                          </td>
  245 |                                                  </tr>
      |                                                    ^
  246 |                                              ))}
  247 |                                          </tbody>
  
  The character "}" is not valid inside a JSX element
  244 |                                                          </td>
  245 |                                                  </tr>
  246 |                                              ))}
      |                                                ^
  247 |                                          </tbody>
  248 |                                      </table>
  
  Unexpected closing "tbody" tag does not match opening "tr" tag
  245 |                                                  </tr>
  246 |                                              ))}
  247 |                                          </tbody>
      |                                            ^
  248 |                                      </table>
  249 |                                  </div>
  
  Unterminated regular expression
  246 |                                              ))}
  247 |                                          </tbody>
  248 |                                      </table>
      |                                              ^
  249 |                                  </div>
  250 |                              </div>
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  6 failed (6)
      Tests  14 failed | 1 passed (15)
   Start at  03:19:39
   Duration  475ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x83 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 4 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:266:50: ERROR: Unexpected closing "tr" tag does not match opening "td" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:267:46: ERROR: The character "}" is not valid inside a JSX element
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:268:42: ERROR: Unexpected closing "tbody" tag does not match opening "tr" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:269:44: ERROR: Unterminated regular expression
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:266:50
  
  Unexpected closing "tr" tag does not match opening "td" tag
  264 |                                                              )}
  265 |                                                          </td>
  266 |                                                  </tr>
      |                                                    ^
  267 |                                              ))}
  268 |                                          </tbody>
  
  The character "}" is not valid inside a JSX element
  265 |                                                          </td>
  266 |                                                  </tr>
  267 |                                              ))}
      |                                                ^
  268 |                                          </tbody>
  269 |                                      </table>
  
  Unexpected closing "tbody" tag does not match opening "tr" tag
  266 |                                                  </tr>
  267 |                                              ))}
  268 |                                          </tbody>
      |                                            ^
  269 |                                      </table>
  270 |                                  </div>
  
  Unterminated regular expression
  267 |                                              ))}
  268 |                                          </tbody>
  269 |                                      </table>
      |                                              ^
  270 |                                  </div>
  271 |                              </div>
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  6 failed (6)
      Tests  14 failed | 1 passed (15)
   Start at  03:20:53
   Duration  235ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x84 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 4 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:296:50: ERROR: Unexpected closing "tr" tag does not match opening "td" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:297:46: ERROR: The character "}" is not valid inside a JSX element
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:298:42: ERROR: Unexpected closing "tbody" tag does not match opening "tr" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:299:44: ERROR: Unterminated regular expression
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:296:50
  
  Unexpected closing "tr" tag does not match opening "td" tag
  294 |                                                              )}
  295 |                                                          </td>
  296 |                                                  </tr>
      |                                                    ^
  297 |                                              ))}
  298 |                                          </tbody>
  
  The character "}" is not valid inside a JSX element
  295 |                                                          </td>
  296 |                                                  </tr>
  297 |                                              ))}
      |                                                ^
  298 |                                          </tbody>
  299 |                                      </table>
  
  Unexpected closing "tbody" tag does not match opening "tr" tag
  296 |                                                  </tr>
  297 |                                              ))}
  298 |                                          </tbody>
      |                                            ^
  299 |                                      </table>
  300 |                                  </div>
  
  Unterminated regular expression
  297 |                                              ))}
  298 |                                          </tbody>
  299 |                                      </table>
      |                                              ^
  300 |                                  </div>
  301 |                              </div>
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  6 failed (6)
      Tests  14 failed | 1 passed (15)
   Start at  03:20:59
   Duration  353ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x85 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 4 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:301:50: ERROR: Unexpected closing "tr" tag does not match opening "td" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:302:46: ERROR: The character "}" is not valid inside a JSX element
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:303:42: ERROR: Unexpected closing "tbody" tag does not match opening "tr" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:304:44: ERROR: Unterminated regular expression
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/dashboard/page.tsx:301:50
  
  Unexpected closing "tr" tag does not match opening "td" tag
  299 |                                                              )}
  300 |                                                          </td>
  301 |                                                  </tr>
      |                                                    ^
  302 |                                              ))}
  303 |                                          </tbody>
  
  The character "}" is not valid inside a JSX element
  300 |                                                          </td>
  301 |                                                  </tr>
  302 |                                              ))}
      |                                                ^
  303 |                                          </tbody>
  304 |                                      </table>
  
  Unexpected closing "tbody" tag does not match opening "tr" tag
  301 |                                                  </tr>
  302 |                                              ))}
  303 |                                          </tbody>
      |                                            ^
  304 |                                      </table>
  305 |                                  </div>
  
  Unterminated regular expression
  302 |                                              ))}
  303 |                                          </tbody>
  304 |                                      </table>
      |                                              ^
  305 |                                  </div>
  306 |                              </div>
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  6 failed (6)
      Tests  14 failed | 1 passed (15)
   Start at  03:21:03
   Duration  313ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x86 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 28ms
     Ã— renders documents and standards 20ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:50:5
     48|     const [formSavedAt, setFormSavedAt] = useState<Record<string, striâ€¦
     49| 
     50|     useCopilotReadable({
       |     ^
     51|         description: 'Dashboard document lists visible to the user',
     52|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:21:47
   Duration  3.34s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x87 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 68ms
     Ã— renders documents and standards 46ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 5ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 5ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:50:5
     48|     const [formSavedAt, setFormSavedAt] = useState<Record<string, striâ€¦
     49| 
     50|     useCopilotReadable({
       |     ^
     51|         description: 'Dashboard document lists visible to the user',
     52|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:22:04
   Duration  3.10s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x88 

 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 19ms
     Ã— renders document list 13ms
     Ã— handles file upload 1ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 229ms
     Ã— renders documents and standards 193ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:50:5
     48|     const [formSavedAt, setFormSavedAt] = useState<Record<string, striâ€¦
     49| 
     50|     useCopilotReadable({
       |     ^
     51|         description: 'Dashboard document lists visible to the user',
     52|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:22:14
   Duration  4.42s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/page.test.tsx x2 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 229ms
     Ã— renders documents and standards 193ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 573ms
       Ã— should fetch documents successfully 30ms
       âœ“ should throw error on failure 258ms
       Ã— should upload document successfully 162ms
       Ã— should throw error on upload failure 122ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 25ms
     Ã— renders loading state initially 14ms
     Ã— renders report data successfully 4ms
     Ã— renders error state on failure 5ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 27ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 46ms
     Ã— renders and loads standards 43ms
     Ã— runs gap analysis and displays results 2ms
stderr | app/app/documents/page.test.tsx > Documents Page > handles file upload
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to DocumentsPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to DocumentsPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/documents/page.test.tsx (4 tests | 1 failed) 508ms
     âœ“ renders document list 291ms
     Ã— handles file upload 92ms
     âœ“ allows deleting a document 44ms
     âœ“ shows staged documents separately 64ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-between items-center"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0mDocuments[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500"[39m
                [36m>[39m
                  [0mManage all your uploaded files[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mid[39m=[32m"file-upload"[39m
                  [33mmultiple[39m=[32m""[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                  [33mfor[39m=[32m"file-upload"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mâ˜ï¸[0m
                  [36m</span>[39m
                  [0mUpload New[0m
                [36m</label>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"overflow-x-auto"[39m
              [36m>[39m
                [36m<table[39m
                  [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<thead[39m
                    [33mclass[39m=[32m"bg-gray-50"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mDocument[0m
                      [36m</th>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mStatus[0m
                      [36m</th>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mDate[0m
                      [36m</th>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mActions[0m
                      [36m</th>[39m
                    [36m</tr>[39m
                  [36m</thead>[39m
                  [36m<tbody[39m
                    [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                        [33mcolspan[39m=[32m"4"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                        [36m>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"text-4xl"[39m
                          [36m>[39m
                            [0mğŸ“„[0m
                          [36m</span>[39m
                          [36m<p>[39m
                            [0mNo active documents found[0m
                          [36m</p>[39m
                        [36m</div>[39m
                      [36m</td>[39m
                    [36m</tr>[39m
                  [36m</tbody>[39m
                [36m</table>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/documents/page.test.tsx:61:30
     59| 
     60|         const file = new File(['dummy'], 'test.pdf', { type: 'applicatâ€¦
     61|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
     62|         
     63|         Object.defineProperty(input, 'files', { value: [file] });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  6 failed (6)
      Tests  18 failed | 4 passed (22)
   Start at  03:27:06
   Duration  1.31s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 3 failed) 281ms
       Ã— should fetch documents successfully 191ms
       âœ“ should throw error on failure 87ms
       Ã— should upload document successfully 1ms
       Ã— should throw error on upload failure 0ms
stderr | app/app/documents/page.test.tsx > Documents Page > handles file upload
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Header inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to DocumentsPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to DocumentsPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/documents/page.test.tsx (4 tests | 2 failed) 8158ms
     Ã— renders document list 5813ms
     Ã— handles file upload 548ms
     âœ“ allows deleting a document  674ms
     âœ“ shows staged documents separately  973ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 612ms
     Ã— renders loading state initially 584ms
     Ã— renders report data successfully 1ms
     Ã— renders error state on failure 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 239ms
     Ã— renders and loads standards 173ms
     Ã— runs gap analysis and displays results 53ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 26ms
     Ã— renders document details and download button 20ms
     Ã— triggers export on button click 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 451ms
     Ã— renders documents and standards 33ms
     Ã— renders dashboard widgets 188ms
     Ã— opens analysis modal and runs check 225ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯ Failed Tests 19 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:50:5
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/19]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/19]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/19]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/19]â¯

 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders loading state initially
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders report data successfully
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders error state on failure
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ ComplianceReportPage app/app/reports/[id]/page.tsx:51:5
     49|     }
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Aktiv compliance-rapport med detaljerte resultatâ€¦
     53|         value: report,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/19]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:50:5
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/19]â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > renders and loads standards
 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ GapAnalysisPage app/app/gap-analysis/page.tsx:13:5
     11|     const [report, setReport] = useState<any>(null);
     12| 
     13|     useCopilotReadable({
       |     ^
     14|         description: 'Available ISO standards for gap analysis',
     15|         value: standards,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/19]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 â¯ app/app/documents/page.test.tsx:34:5
     32|     });
     33| 
     34|     it('renders document list', async () => {
       |     ^
     35|         const mockDocuments = [
     36|             { id: '1', title: 'Doc 1', status: 'ANALYZED', createdAt: â€¦

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/19]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-between items-center"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0mDocuments[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500"[39m
                [36m>[39m
                  [0mManage all your uploaded files[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mid[39m=[32m"file-upload"[39m
                  [33mmultiple[39m=[32m""[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                  [33mfor[39m=[32m"file-upload"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mâ˜ï¸[0m
                  [36m</span>[39m
                  [0mUpload New[0m
                [36m</label>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"overflow-x-auto"[39m
              [36m>[39m
                [36m<table[39m
                  [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<thead[39m
                    [33mclass[39m=[32m"bg-gray-50"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mDocument[0m
                      [36m</th>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mStatus[0m
                      [36m</th>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mDate[0m
                      [36m</th>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mActions[0m
                      [36m</th>[39m
                    [36m</tr>[39m
                  [36m</thead>[39m
                  [36m<tbody[39m
                    [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                        [33mcolspan[39m=[32m"4"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                        [36m>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"text-4xl"[39m
                          [36m>[39m
                            [0mğŸ“„[0m
                          [36m</span>[39m
                          [36m<p>[39m
                            [0mNo active documents found[0m
                          [36m</p>[39m
                        [36m</div>[39m
                      [36m</td>[39m
                    [36m</tr>[39m
                  [36m</tbody>[39m
                [36m</table>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/documents/page.test.tsx:61:30
     59| 
     60|         const file = new File(['dummy'], 'test.pdf', { type: 'applicatâ€¦
     61|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
     62|         
     63|         Object.defineProperty(input, 'files', { value: [file] });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[9/19]â¯


 Test Files  6 failed (6)
      Tests  19 failed | 3 passed (22)
   Start at  03:27:34
   Duration  111.02s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 3 failed) 2206ms
       Ã— should fetch documents successfully 1255ms
       âœ“ should throw error on failure  361ms
       Ã— should upload document successfully 128ms
       Ã— should throw error on upload failure 283ms
stderr | app/app/documents/page.test.tsx > Documents Page > allows deleting a document
An update to ForwardRef(LinkComponent) inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | app/app/documents/page.test.tsx > Documents Page > allows deleting a document
An update to ForwardRef(LinkComponent) inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | app/app/documents/page.test.tsx > Documents Page > allows deleting a document
An update to ForwardRef(LinkComponent) inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | app/app/documents/page.test.tsx > Documents Page > allows deleting a document
An update to ForwardRef(LinkComponent) inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | app/app/documents/page.test.tsx > Documents Page > allows deleting a document
An update to ForwardRef(LinkComponent) inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ app/app/documents/page.test.tsx (4 tests | 2 failed) 12649ms
     Ã— renders document list 9145ms
     Ã— handles file upload 234ms
     âœ“ allows deleting a document  2848ms
     âœ“ shows staged documents separately  348ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 269ms
     Ã— renders loading state initially 266ms
     Ã— renders report data successfully 1ms
     Ã— renders error state on failure 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 31ms
     Ã— renders documents and standards 23ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 336ms
     Ã— renders document details and download button 25ms
     Ã— triggers export on button click 306ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 34ms
     Ã— renders and loads standards 22ms
     Ã— runs gap analysis and displays results 1ms

â¯â¯â¯â¯â¯â¯ Failed Tests 19 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:51:5
     49|     const [formSavedAt, setFormSavedAt] = useState<Record<string, striâ€¦
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Dashboard document lists visible to the user',
     53|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/19]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/19]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/19]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/19]â¯

 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders loading state initially
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders report data successfully
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders error state on failure
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ ComplianceReportPage app/app/reports/[id]/page.tsx:51:5
     49|     }
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Aktiv compliance-rapport med detaljerte resultatâ€¦
     53|         value: report,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/19]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:51:5
     49|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Document metadata',
     53|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/19]â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > renders and loads standards
 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ GapAnalysisPage app/app/gap-analysis/page.tsx:13:5
     11|     const [report, setReport] = useState<any>(null);
     12| 
     13|     useCopilotReadable({
       |     ^
     14|         description: 'Available ISO standards for gap analysis',
     15|         value: standards,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/19]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".
 â¯ app/app/documents/page.test.tsx:34:5
     32|     });
     33| 
     34|     it('renders document list', async () => {
       |     ^
     35|         const mockDocuments = [
     36|             { id: '1', title: 'Doc 1', status: 'ANALYZED', createdAt: â€¦

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/19]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
TestingLibraryElementError: Unable to find a label with the text of: Upload New

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<aside[39m
        [33mclass[39m=[32m"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-6 border-b border-gray-100"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-2xl font-bold text-blue-600 flex items-center gap-2"[39m
          [36m>[39m
            [36m<span>[39m
              [0mğŸ›¡ï¸[0m
            [36m</span>[39m
            [0m ISO Doc[0m
          [36m</h1>[39m
        [36m</div>[39m
        [36m<nav[39m
          [33mclass[39m=[32m"flex-1 p-4 space-y-1"[39m
        [36m>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/dashboard"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“Š[0m
            [36m</span>[39m
            [0mDashboard[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors bg-blue-50 text-blue-700 font-medium"[39m
            [33mhref[39m=[32m"/app/documents"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“[0m
            [36m</span>[39m
            [0mDocuments[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/gap-analysis"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ”[0m
            [36m</span>[39m
            [0mGap Analysis[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/reports"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mğŸ“‹[0m
            [36m</span>[39m
            [0mReports[0m
          [36m</a>[39m
          [36m<a[39m
            [33mclass[39m=[32m"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900"[39m
            [33mhref[39m=[32m"/app/settings"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-xl"[39m
            [36m>[39m
              [0mâš™ï¸[0m
            [36m</span>[39m
            [0mSettings[0m
          [36m</a>[39m
        [36m</nav>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-4 border-t border-gray-100"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-blue-50 rounded-lg p-4"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"text-sm font-semibold text-blue-800 mb-1"[39m
            [36m>[39m
              [0mPro Plan[0m
            [36m</h4>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-blue-600 mb-3"[39m
            [36m>[39m
              [0mGet access to advanced AI features.[0m
            [36m</p>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full bg-blue-600 text-white text-xs font-medium py-2 rounded hover:bg-blue-700 transition"[39m
            [36m>[39m
              [0mUpgrade Now[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</aside>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 flex flex-col"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white border-b border-gray-200 px-8 py-4 flex justify-between items-center sticky top-0 z-10"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-xl font-semibold text-gray-800"[39m
            [36m>[39m
              [0mDashboard[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-500"[39m
            [36m>[39m
              [0mWelcome back, User[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-1/3"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative w-full max-w-xl"[39m
            [36m>[39m
              [36m<form[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full border border-gray-300 rounded-lg py-2 px-4 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500"[39m
                  [33mplaceholder[39m=[32m"Search documents (e.g. 'password policy')..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-400"[39m
                  [36m>[39m
                    [0mğŸ”[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"absolute inset-y-0 right-0 px-4 text-white bg-blue-600 rounded-r-lg hover:bg-blue-700 disabled:opacity-50"[39m
                  [33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</button>[39m
              [36m</form>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center gap-4"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"p-2 text-gray-400 hover:text-gray-600 relative"[39m
              [36m>[39m
                [0mğŸ””[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold"[39m
            [36m>[39m
              [0mU[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"flex-1 p-8 overflow-y-auto"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto space-y-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-between items-center"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0mDocuments[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500"[39m
                [36m>[39m
                  [0mManage all your uploaded files[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mid[39m=[32m"file-upload"[39m
                  [33mmultiple[39m=[32m""[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition cursor-pointer shadow-sm "[39m
                  [33mfor[39m=[32m"file-upload"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mâ˜ï¸[0m
                  [36m</span>[39m
                  [0mUpload New[0m
                [36m</label>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"overflow-x-auto"[39m
              [36m>[39m
                [36m<table[39m
                  [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<thead[39m
                    [33mclass[39m=[32m"bg-gray-50"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mDocument[0m
                      [36m</th>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mStatus[0m
                      [36m</th>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mDate[0m
                      [36m</th>[39m
                      [36m<th[39m
                        [33mclass[39m=[32m"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [36m>[39m
                        [0mActions[0m
                      [36m</th>[39m
                    [36m</tr>[39m
                  [36m</thead>[39m
                  [36m<tbody[39m
                    [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                  [36m>[39m
                    [36m<tr>[39m
                      [36m<td[39m
                        [33mclass[39m=[32m"px-6 py-12 text-center text-gray-500"[39m
                        [33mcolspan[39m=[32m"4"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
                        [36m>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"text-4xl"[39m
                          [36m>[39m
                            [0mğŸ“„[0m
                          [36m</span>[39m
                          [36m<p>[39m
                            [0mNo active documents found[0m
                          [36m</p>[39m
                        [36m</div>[39m
                      [36m</td>[39m
                    [36m</tr>[39m
                  [36m</tbody>[39m
                [36m</table>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 â¯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 â¯ getAllByLabelText node_modules/@testing-library/dom/dist/queries/label-text.js:111:38
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 â¯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 â¯ app/app/documents/page.test.tsx:61:30
     59| 
     60|         const file = new File(['dummy'], 'test.pdf', { type: 'applicatâ€¦
     61|         const input = screen.getByLabelText('Upload New') as HTMLInputâ€¦
       |                              ^
     62|         
     63|         Object.defineProperty(input, 'files', { value: [file] });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[9/19]â¯


 Test Files  6 failed (6)
      Tests  19 failed | 3 passed (22)
   Start at  03:28:17
   Duration  215.26s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2206ms
       Ã— should fetch documents successfully 1255ms
       âœ“ should throw error on failure  361ms
       Ã— should upload document successfully 128ms
       Ã— should throw error on upload failure 283ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 269ms
     Ã— renders loading state initially 266ms
     Ã— renders report data successfully 1ms
     Ã— renders error state on failure 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 34ms
     Ã— renders and loads standards 22ms
     Ã— runs gap analysis and displays results 1ms
 â¯ app/app/documents/page.test.tsx (4 tests | 2 failed) 12649ms
     Ã— renders document list 9145ms
     Ã— handles file upload 234ms
     âœ“ allows deleting a document  2848ms
     âœ“ shows staged documents separately  348ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 888ms
     Ã— renders document details and download button 863ms
     Ã— triggers export on button click 19ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 127ms
     Ã— renders documents and standards 84ms
     Ã— renders dashboard widgets 9ms
     Ã— opens analysis modal and runs check 7ms
     Ã— shows staged documents and allows approval 7ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 13ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 9 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:51:5
     49|     const [formSavedAt, setFormSavedAt] = useState<Record<string, striâ€¦
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Dashboard document lists visible to the user',
     53|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/9]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:51:5
     49|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Document metadata',
     53|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/9]â¯


 Test Files  6 failed (6)
      Tests  19 failed | 3 passed (22)
   Start at  03:29:30
   Duration  23.00s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/page.test.tsx x5 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 127ms
     Ã— renders documents and standards 84ms
     Ã— renders dashboard widgets 9ms
     Ã— opens analysis modal and runs check 7ms
     Ã— shows staged documents and allows approval 7ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 13ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2206ms
       Ã— should fetch documents successfully 1255ms
       âœ“ should throw error on failure  361ms
       Ã— should upload document successfully 128ms
       Ã— should throw error on upload failure 283ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 269ms
     Ã— renders loading state initially 266ms
     Ã— renders report data successfully 1ms
     Ã— renders error state on failure 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 888ms
     Ã— renders document details and download button 863ms
     Ã— triggers export on button click 19ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 34ms
     Ã— renders and loads standards 22ms
     Ã— runs gap analysis and displays results 1ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 66ms
     Ã— renders document list 23ms
     Ã— handles file upload 15ms
     Ã— allows deleting a document 24ms
     Ã— shows staged documents separately 3ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 4 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
ConfigurationError: Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'
 â¯ new CopilotKitError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:170:5
 â¯ new ConfigurationError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:315:5
 â¯ validateProps node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:651:11
 â¯ CopilotKitInternal node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:207:3
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:30:20
   Duration  3.60s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/Sidebar.tsx 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2206ms
       Ã— should fetch documents successfully 1255ms
       âœ“ should throw error on failure  361ms
       Ã— should upload document successfully 128ms
       Ã— should throw error on upload failure 283ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 269ms
     Ã— renders loading state initially 266ms
     Ã— renders report data successfully 1ms
     Ã— renders error state on failure 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 888ms
     Ã— renders document details and download button 863ms
     Ã— triggers export on button click 19ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 34ms
     Ã— renders and loads standards 22ms
     Ã— runs gap analysis and displays results 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 321ms
     Ã— renders documents and standards 180ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 86ms
     Ã— shows staged documents and allows approval 3ms
     Ã— allows rejecting staged documents 6ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 37ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 233ms
     Ã— renders document list 77ms
     Ã— handles file upload 146ms
     Ã— allows deleting a document 6ms
     Ã— shows staged documents separately 3ms

â¯â¯â¯â¯â¯â¯ Failed Tests 11 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:51:5
     49|     const [formSavedAt, setFormSavedAt] = useState<Record<string, striâ€¦
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Dashboard document lists visible to the user',
     53|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/11]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
ConfigurationError: Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'
 â¯ new CopilotKitError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:170:5
 â¯ new ConfigurationError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:315:5
 â¯ validateProps node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:651:11
 â¯ CopilotKitInternal node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:207:3
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/11]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  03:57:44
   Duration  11.34s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 314ms
     Ã— renders and loads standards 308ms
     Ã— runs gap analysis and displays results 4ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 232ms
     Ã— renders document list 152ms
     Ã— handles file upload 3ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 6ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 110ms
     Ã— renders documents and standards 39ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 49ms
     Ã— allows rejecting staged documents 8ms
     Ã— shows notifications 7ms
     Ã— shows upload progress 3ms

â¯â¯â¯â¯â¯â¯ Failed Tests 21 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:51:5
     49|     const [formSavedAt, setFormSavedAt] = useState<Record<string, striâ€¦
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Dashboard document lists visible to the user',
     53|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/21]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/21]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:42:19
     40| 
     41|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     42|             await uploadDocument(file);
       |                   ^
     43| 
     44|             expect(global.fetch).toHaveBeenCalledWith(

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/21]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
TypeError: (0 , __vite_ssr_import_0__.uploadDocument) is not a function
 â¯ lib/api.test.ts:59:26
     57| 
     58|             const file = new File(['content'], 'test.txt', { type: 'teâ€¦
     59|             await expect(uploadDocument(file)).rejects.toThrow('Failedâ€¦
       |                          ^
     60|         });
     61|     });

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/21]â¯

 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders loading state initially
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders report data successfully
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders error state on failure
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ ComplianceReportPage app/app/reports/[id]/page.tsx:51:5
     49|     }
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Aktiv compliance-rapport med detaljerte resultatâ€¦
     53|         value: report,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/21]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:51:5
     49|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Document metadata',
     53|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/21]â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > renders and loads standards
 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ GapAnalysisPage app/app/gap-analysis/page.tsx:13:5
     11|     const [report, setReport] = useState<any>(null);
     12| 
     13|     useCopilotReadable({
       |     ^
     14|         description: 'Available ISO standards for gap analysis',
     15|         value: standards,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/21]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
ConfigurationError: Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'
 â¯ new CopilotKitError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:170:5
 â¯ new ConfigurationError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:315:5
 â¯ validateProps node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:651:11
 â¯ CopilotKitInternal node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:207:3
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[8/21]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  04:18:17
   Duration  194.00s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/gap-analysis/page.tsx x25 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 110ms
     Ã— renders documents and standards 39ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 49ms
     Ã— allows rejecting staged documents 8ms
     Ã— shows notifications 7ms
     Ã— shows upload progress 3ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 232ms
     Ã— renders document list 152ms
     Ã— handles file upload 3ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 6ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > renders and loads standards
 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ GapAnalysisPage app/app/gap-analysis/page.tsx:16:5
     14|     const [fullReport, setFullReport] = useState<any>(null);
     15| 
     16|     useCopilotReadable({
       |     ^
     17|         description: 'Available ISO standards for gap analysis',
     18|         value: standards,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  04:20:22
   Duration  9.83s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x94 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 232ms
     Ã— renders document list 152ms
     Ã— handles file upload 3ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 6ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 525ms
     Ã— renders documents and standards 466ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 40ms
     Ã— shows staged documents and allows approval 3ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:51:5
     49|     const [formSavedAt, setFormSavedAt] = useState<Record<string, striâ€¦
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Dashboard document lists visible to the user',
     53|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  04:22:50
   Duration  5.51s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x95 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 232ms
     Ã— renders document list 152ms
     Ã— handles file upload 3ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 6ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 111ms
     Ã— renders documents and standards 67ms
     Ã— renders dashboard widgets 31ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 3ms
     Ã— shows upload progress 4ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:52:5
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  04:22:59
   Duration  5.54s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x96 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 232ms
     Ã— renders document list 152ms
     Ã— handles file upload 3ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 6ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 434ms
     Ã— renders documents and standards 259ms
     Ã— renders dashboard widgets 27ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 18ms
     Ã— allows rejecting staged documents 10ms
     Ã— shows notifications 12ms
     Ã— shows upload progress 102ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ Dashboard app/app/dashboard/page.tsx:52:5
     50|     const [previewUrl, setPreviewUrl] = useState<string | null>(null);
     51| 
     52|     useCopilotReadable({
       |     ^
     53|         description: 'Dashboard document lists visible to the user',
     54|         value: {
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  04:23:07
   Duration  5.90s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x97 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 232ms
     Ã— renders document list 152ms
     Ã— handles file upload 3ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 6ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 61ms
     Ã— renders documents and standards 14ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 39ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ Dashboard app/app/dashboard/page.tsx:12:26
     10| 
     11| export default function Dashboard() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  04:41:42
   Duration  5.86s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/Sidebar.tsx 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 85ms
     Ã— renders documents and standards 72ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 3ms

â¯â¯â¯â¯â¯â¯ Failed Tests 11 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ Dashboard app/app/dashboard/page.tsx:12:26
     10| 
     11| export default function Dashboard() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/11]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
ConfigurationError: Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'
 â¯ new CopilotKitError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:170:5
 â¯ new ConfigurationError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:315:5
 â¯ validateProps node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:651:11
 â¯ CopilotKitInternal node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:207:3
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/11]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  04:41:59
   Duration  11.06s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x99 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 1244ms
     Ã— renders documents and standards 32ms
     Ã— renders dashboard widgets 4ms
     Ã— opens analysis modal and runs check 4ms
     Ã— shows staged documents and allows approval 814ms
     Ã— allows rejecting staged documents 38ms
     Ã— shows notifications 271ms
     Ã— shows upload progress 75ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  10:57:28
   Duration  32.50s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/ComplianceTab.tsx x100 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 72ms
     Ã— renders documents and standards 57ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 3ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 3ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:01:17
   Duration  5.33s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/GapAnalysisTab.tsx x101 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 202ms
     Ã— renders documents and standards 16ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 129ms
     Ã— allows rejecting staged documents 40ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:01:26
   Duration  3.49s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x102 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 131ms
     Ã— renders documents and standards 86ms
     Ã— renders dashboard widgets 24ms
     Ã— opens analysis modal and runs check 9ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:32:17
   Duration  9.02s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x103 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 45ms
     Ã— renders documents and standards 28ms
     Ã— renders dashboard widgets 4ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 3ms
     Ã— shows upload progress 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:32:40
   Duration  5.00s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x104 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 120ms
     Ã— renders documents and standards 12ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 52ms
     Ã— shows staged documents and allows approval 13ms
     Ã— allows rejecting staged documents 15ms
     Ã— shows notifications 22ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:32:51
   Duration  23.84s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x105 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 430ms
     Ã— renders documents and standards 409ms
     Ã— renders dashboard widgets 6ms
     Ã— opens analysis modal and runs check 4ms
     Ã— shows staged documents and allows approval 3ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:33:23
   Duration  8.39s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x106 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 252ms
     Ã— renders document details and download button 139ms
     Ã— triggers export on button click 14ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 551ms
     Ã— renders documents and standards 529ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 6ms
     Ã— allows rejecting staged documents 5ms
     Ã— shows notifications 4ms
     Ã— shows upload progress 4ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:34:55
   Duration  10.39s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x50 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 551ms
     Ã— renders documents and standards 529ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 6ms
     Ã— allows rejecting staged documents 5ms
     Ã— shows notifications 4ms
     Ã— shows upload progress 4ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx [ app/app/documents/[id]/page.test.tsx ]
Error: Transform failed with 1 error:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/documents/[id]/page.tsx:600:15: ERROR: Unterminated regular expression
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/documents/[id]/page.tsx:600:15
  
  Unterminated regular expression
  598 |              </div>
  599 |          </div>
  600 |          </div >
      |                 ^
  601 |      );
  602 |  }
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  6 failed (6)
      Tests  19 failed | 1 passed (20)
   Start at  11:36:30
   Duration  617ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x107 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (0 test)
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 561ms
     Ã— renders documents and standards 26ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 517ms
     Ã— shows staged documents and allows approval 4ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 3ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  19 failed | 1 passed (20)
   Start at  11:37:24
   Duration  21.08s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x108 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (0 test)
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 991ms
     Ã— renders documents and standards 584ms
     Ã— renders dashboard widgets 206ms
     Ã— opens analysis modal and runs check 8ms
     Ã— shows staged documents and allows approval 22ms
     Ã— allows rejecting staged documents 45ms
     Ã— shows notifications 36ms
     Ã— shows upload progress 7ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  19 failed | 1 passed (20)
   Start at  11:37:51
   Duration  22.53s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x51 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 991ms
     Ã— renders documents and standards 584ms
     Ã— renders dashboard widgets 206ms
     Ã— opens analysis modal and runs check 8ms
     Ã— shows staged documents and allows approval 22ms
     Ã— allows rejecting staged documents 45ms
     Ã— shows notifications 36ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx [ app/app/documents/[id]/page.test.tsx ]
Error: Transform failed with 1 error:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/documents/[id]/page.tsx:250:4: ERROR: Unexpected "}"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/documents/[id]/page.tsx:250:4
  
  Unexpected "}"
  248 |                  </div>
  249 |              ),
  250 |      });
      |      ^
  251 |  
  252 |      useCopilotAction({
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  6 failed (6)
      Tests  19 failed | 1 passed (20)
   Start at  11:38:18
   Duration  1.01s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x52 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 991ms
     Ã— renders documents and standards 584ms
     Ã— renders dashboard widgets 206ms
     Ã— opens analysis modal and runs check 8ms
     Ã— shows staged documents and allows approval 22ms
     Ã— allows rejecting staged documents 45ms
     Ã— shows notifications 36ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx [ app/app/documents/[id]/page.test.tsx ]
Error: Transform failed with 1 error:
/Users/isak/Downloads/iso-doc-platform/frontend/app/app/documents/[id]/page.tsx:303:4: ERROR: Unexpected "}"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/app/documents/[id]/page.tsx:303:4
  
  Unexpected "}"
  301 |                  </div>
  302 |              ),
  303 |      });
      |      ^
  304 |  
  305 |      const allowedFields: Array<keyof RemediationForm> = ['owner', 'dueDate', 'status', 'summary', 'nextSteps'];
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  6 failed (6)
      Tests  19 failed | 1 passed (20)
   Start at  11:39:11
   Duration  169ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x53 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 991ms
     Ã— renders documents and standards 584ms
     Ã— renders dashboard widgets 206ms
     Ã— opens analysis modal and runs check 8ms
     Ã— shows staged documents and allows approval 22ms
     Ã— allows rejecting staged documents 45ms
     Ã— shows notifications 36ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 91ms
     Ã— renders document details and download button 86ms
     Ã— triggers export on button click 3ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:52:5
     50|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     51| 
     52|     useCopilotReadable({
       |     ^
     53|         description: 'Document metadata',
     54|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:39:50
   Duration  19.12s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x54 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 991ms
     Ã— renders documents and standards 584ms
     Ã— renders dashboard widgets 206ms
     Ã— opens analysis modal and runs check 8ms
     Ã— shows staged documents and allows approval 22ms
     Ã— allows rejecting staged documents 45ms
     Ã— shows notifications 36ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 109ms
     Ã— renders document details and download button 95ms
     Ã— triggers export on button click 11ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:52:5
     50|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     51| 
     52|     useCopilotReadable({
       |     ^
     53|         description: 'Document metadata',
     54|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:40:48
   Duration  6.04s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x55 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 991ms
     Ã— renders documents and standards 584ms
     Ã— renders dashboard widgets 206ms
     Ã— opens analysis modal and runs check 8ms
     Ã— shows staged documents and allows approval 22ms
     Ã— allows rejecting staged documents 45ms
     Ã— shows notifications 36ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 205ms
     Ã— renders document details and download button 192ms
     Ã— triggers export on button click 9ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:52:5
     50|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     51| 
     52|     useCopilotReadable({
       |     ^
     53|         description: 'Document metadata',
     54|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:42:16
   Duration  7.46s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x56 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 991ms
     Ã— renders documents and standards 584ms
     Ã— renders dashboard widgets 206ms
     Ã— opens analysis modal and runs check 8ms
     Ã— shows staged documents and allows approval 22ms
     Ã— allows rejecting staged documents 45ms
     Ã— shows notifications 36ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 87ms
     Ã— renders document details and download button 72ms
     Ã— triggers export on button click 9ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:52:5
     50|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     51| 
     52|     useCopilotReadable({
       |     ^
     53|         description: 'Document metadata',
     54|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:42:34
   Duration  7.71s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/PersistentCopilot.tsx x57 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 991ms
     Ã— renders documents and standards 584ms
     Ã— renders dashboard widgets 206ms
     Ã— opens analysis modal and runs check 8ms
     Ã— shows staged documents and allows approval 22ms
     Ã— allows rejecting staged documents 45ms
     Ã— shows notifications 36ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 69ms
     Ã— renders document details and download button 49ms
     Ã— triggers export on button click 3ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:52:5
     50|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     51| 
     52|     useCopilotReadable({
       |     ^
     53|         description: 'Document metadata',
     54|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:52:36
   Duration  8.31s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/PersistentCopilot.tsx x58 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 991ms
     Ã— renders documents and standards 584ms
     Ã— renders dashboard widgets 206ms
     Ã— opens analysis modal and runs check 8ms
     Ã— shows staged documents and allows approval 22ms
     Ã— allows rejecting staged documents 45ms
     Ã— shows notifications 36ms
     Ã— shows upload progress 7ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 133ms
     Ã— renders document details and download button 119ms
     Ã— triggers export on button click 6ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ DocumentView app/app/documents/[id]/page.tsx:52:5
     50|     const [formSavedAt, setFormSavedAt] = useState<string | null>(nullâ€¦
     51| 
     52|     useCopilotReadable({
       |     ^
     53|         description: 'Document metadata',
     54|         value: document,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  11:52:58
   Duration  6.33s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x109 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 133ms
     Ã— renders document details and download button 119ms
     Ã— triggers export on button click 6ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 19ms
     Ã— renders documents and standards 11ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:04:31
   Duration  7.35s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/documents/[id]/page.tsx x59 

 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 19ms
     Ã— renders documents and standards 11ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms
 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 11ms
     Ã— renders document details and download button 9ms
     Ã— triggers export on button click 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: [vitest] No "useRouter" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DocumentPage app/app/documents/[id]/page.tsx:9:20
      7| export default function DocumentPage() {
      8|     const params = useParams();
      9|     const router = useRouter();
       |                    ^
     10|     const id = params?.id as string;
     11| 
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:05:57
   Duration  1.92s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentDetailView.tsx 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 34ms
     Ã— renders document details and download button 31ms
     Ã— triggers export on button click 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 149ms
     Ã— renders documents and standards 136ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 3ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 9 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/9]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: [vitest] No "useRouter" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DocumentPage app/app/documents/[id]/page.tsx:9:20
      7| export default function DocumentPage() {
      8|     const params = useParams();
      9|     const router = useRouter();
       |                    ^
     10|     const id = params?.id as string;
     11| 
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/9]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:06:44
   Duration  74.74s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x111 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 34ms
     Ã— renders document details and download button 31ms
     Ã— triggers export on button click 2ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 44ms
     Ã— renders documents and standards 27ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 4ms
     Ã— shows notifications 3ms
     Ã— shows upload progress 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:07:29
   Duration  5.72s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x112 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 34ms
     Ã— renders document details and download button 31ms
     Ã— triggers export on button click 2ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 73ms
     Ã— renders documents and standards 13ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 51ms
     Ã— shows notifications 4ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:07:42
   Duration  5.93s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentDetailView.tsx 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 64ms
     Ã— renders document details and download button 61ms
     Ã— triggers export on button click 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 110ms
     Ã— renders documents and standards 13ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 89ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 9 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/9]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: [vitest] No "useRouter" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DocumentPage app/app/documents/[id]/page.tsx:9:20
      7| export default function DocumentPage() {
      8|     const params = useParams();
      9|     const router = useRouter();
       |                    ^
     10|     const id = params?.id as string;
     11| 
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/9]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:08:19
   Duration  24.27s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentDetailView.tsx 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 87ms
     Ã— renders documents and standards 16ms
     Ã— renders dashboard widgets 61ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 4ms
     Ã— shows upload progress 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 9 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/9]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: [vitest] No "useRouter" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DocumentPage app/app/documents/[id]/page.tsx:9:20
      7| export default function DocumentPage() {
      8|     const params = useParams();
      9|     const router = useRouter();
       |                    ^
     10|     const id = params?.id as string;
     11| 
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/9]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:08:39
   Duration  20.59s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x115 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms

â¯â¯â¯â¯â¯â¯ Failed Suites 1 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx [ app/app/dashboard/page.test.tsx ]
Error: Transform failed with 2 errors:
/Users/isak/Downloads/iso-doc-platform/frontend/app/components/DocumentsTab.tsx:189:50: ERROR: Unexpected closing "td" tag does not match opening "span" tag
/Users/isak/Downloads/iso-doc-platform/frontend/app/components/DocumentsTab.tsx:190:52: ERROR: Expected ")" but found "className"
  Plugin: vite:esbuild
  File: /Users/isak/Downloads/iso-doc-platform/frontend/app/components/DocumentsTab.tsx:189:50
  
  Unexpected closing "td" tag does not match opening "span" tag
  187 |                                                      Ready for Approval
  188 |                                                      {new Date(doc.createdAt).toLocaleDateString()}
  189 |                                                  </td>
      |                                                    ^
  190 |                                                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-me...
  191 |                                                      <div className="flex justify-end gap-3">
  
  Expected ")" but found "className"
  188 |                                                      {new Date(doc.createdAt).toLocaleDateString()}
  189 |                                                  </td>
  190 |                                                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-me...
      |                                                      ^
  191 |                                                      <div className="flex justify-end gap-3">
  192 |                                                          <button onClick={() => openDocument(doc.id)} className="text-...
  
 â¯ failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 â¯ node_modules/esbuild/lib/main.js:736:50
 â¯ responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 â¯ handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 â¯ Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯


 Test Files  6 failed (6)
      Tests  14 failed | 1 passed (15)
   Start at  12:14:18
   Duration  1.13s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x116 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 63ms
     Ã— renders documents and standards 46ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 6ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:14:56
   Duration  13.70s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x117 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 166ms
     Ã— renders documents and standards 18ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 3ms
     Ã— allows rejecting staged documents 127ms
     Ã— shows notifications 9ms
     Ã— shows upload progress 4ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:15:33
   Duration  16.01s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x118 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 178ms
     Ã— renders documents and standards 18ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 4ms
     Ã— shows notifications 144ms
     Ã— shows upload progress 3ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:15:57
   Duration  15.69s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/IDE/ComplianceTools.tsx x119 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 29ms
     Ã— renders documents and standards 21ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:16:57
   Duration  5.13s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/IDE/ComplianceTools.tsx x120 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 38ms
     Ã— renders documents and standards 22ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 8ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:17:13
   Duration  5.44s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x121 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 94ms
     Ã— renders documents and standards 67ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 16ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:22:42
   Duration  5.39s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x122 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 24ms
     Ã— renders documents and standards 17ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:22:56
   Duration  7.28s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/IDE/IDELayout.tsx x123 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 22ms
     Ã— renders documents and standards 15ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:23:16
   Duration  6.47s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/IDE/IDELayout.tsx x124 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 76ms
     Ã— renders document details and download button 8ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 23ms
     Ã— renders documents and standards 17ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:23:53
   Duration  8.11s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/PersistentCopilot.tsx 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 125ms
     Ã— renders document list 118ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 3ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 187ms
     Ã— renders document details and download button 138ms
     Ã— triggers export on button click 1ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 48ms
     Ã— renders documents and standards 36ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 3ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 9 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: [vitest] No "useRouter" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DocumentPage app/app/documents/[id]/page.tsx:9:20
      7| export default function DocumentPage() {
      8|     const params = useParams();
      9|     const router = useRouter();
       |                    ^
     10|     const id = params?.id as string;
     11| 
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/9]â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/9]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:26:36
   Duration  31.83s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/Sidebar.tsx 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 187ms
     Ã— renders document details and download button 138ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 385ms
     Ã— renders document list 45ms
     Ã— handles file upload 105ms
     Ã— allows deleting a document 8ms
     Ã— shows staged documents separately 62ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 132ms
     Ã— renders documents and standards 16ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 105ms
     Ã— allows rejecting staged documents 5ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯ Failed Tests 11 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardContent app/app/dashboard/page.tsx:12:26
     10| 
     11| function DashboardContent() {
     12|     const searchParams = useSearchParams();
       |                          ^
     13|     const router = useRouter();
     14|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/11]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
ConfigurationError: Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'
 â¯ new CopilotKitError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:170:5
 â¯ new ConfigurationError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:315:5
 â¯ validateProps node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:651:11
 â¯ CopilotKitInternal node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:207:3
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/11]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:26:59
   Duration  14.00s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x127 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 187ms
     Ã— renders document details and download button 138ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 385ms
     Ã— renders document list 45ms
     Ã— handles file upload 105ms
     Ã— allows deleting a document 8ms
     Ã— shows staged documents separately 62ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 461ms
     Ã— renders documents and standards 220ms
     Ã— renders dashboard widgets 7ms
     Ã— opens analysis modal and runs check 6ms
     Ã— shows staged documents and allows approval 3ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 209ms
     Ã— shows upload progress 2ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:29:35
   Duration  9.52s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x128 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 187ms
     Ã— renders document details and download button 138ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 385ms
     Ã— renders document list 45ms
     Ã— handles file upload 105ms
     Ã— allows deleting a document 8ms
     Ã— shows staged documents separately 62ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 482ms
     Ã— renders documents and standards 117ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 6ms
     Ã— shows staged documents and allows approval 187ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 166ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:30:05
   Duration  14.02s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/DocumentsTab.tsx x129 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 187ms
     Ã— renders document details and download button 138ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 385ms
     Ã— renders document list 45ms
     Ã— handles file upload 105ms
     Ã— allows deleting a document 8ms
     Ã— shows staged documents separately 62ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 85ms
     Ã— renders documents and standards 20ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 53ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 3ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:30:25
   Duration  21.30s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/IDE/IDELayout.tsx x130 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 187ms
     Ã— renders document details and download button 138ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 385ms
     Ã— renders document list 45ms
     Ã— handles file upload 105ms
     Ã— allows deleting a document 8ms
     Ã— shows staged documents separately 62ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 430ms
     Ã— renders documents and standards 413ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 5ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:31:04
   Duration  12.17s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/IDE/IDELayout.tsx x131 

 â¯ lib/api.test.ts (4 tests | 3 failed) 2000ms
       Ã— should fetch documents successfully 1267ms
       âœ“ should throw error on failure 277ms
       Ã— should upload document successfully 126ms
       Ã— should throw error on upload failure 262ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 829ms
     Ã— renders loading state initially 659ms
     Ã— renders report data successfully 2ms
     Ã— renders error state on failure 166ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 187ms
     Ã— renders document details and download button 138ms
     Ã— triggers export on button click 1ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 155ms
     Ã— renders and loads standards 38ms
     Ã— runs gap analysis and displays results 5ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 385ms
     Ã— renders document list 45ms
     Ã— handles file upload 105ms
     Ã— allows deleting a document 8ms
     Ã— shows staged documents separately 62ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 267ms
     Ã— renders documents and standards 59ms
     Ã— renders dashboard widgets 17ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 183ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  21 failed | 1 passed (22)
   Start at  12:31:24
   Duration  10.11s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

stderr | lib/api.test.ts > API Client > uploadDocument > should upload document successfully
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

stderr | lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 2 failed) 3500ms
       Ã— should fetch documents successfully 1650ms
       âœ“ should throw error on failure  1138ms
       Ã— should upload document successfully 537ms
       âœ“ should throw error on upload failure 32ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 1238ms
     Ã— renders and loads standards 1079ms
     Ã— runs gap analysis and displays results 88ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 977ms
     Ã— renders loading state initially 966ms
     Ã— renders report data successfully 5ms
     Ã— renders error state on failure 1ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 795ms
     Ã— renders document list 619ms
     Ã— handles file upload 35ms
     Ã— allows deleting a document 10ms
     Ã— shows staged documents separately 4ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 1190ms
     Ã— renders document details and download button 1184ms
     Ã— triggers export on button click 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 423ms
     Ã— renders documents and standards 80ms
     Ã— renders dashboard widgets 3ms
     Ã— opens analysis modal and runs check 2ms
     Ã— shows staged documents and allows approval 5ms
     Ã— allows rejecting staged documents 6ms
     Ã— shows notifications 289ms
     Ã— shows upload progress 36ms

â¯â¯â¯â¯â¯â¯ Failed Tests 20 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/20]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/20]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: res.json is not a function
 â¯ uploadDocuments lib/api.ts:134:16
    132|         throw new Error('Failed to upload documents');
    133|     }
    134|     return res.json();
       |                ^
    135| }
    136| 
 â¯ lib/api.test.ts:42:13

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/20]â¯

 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders loading state initially
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders report data successfully
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders error state on failure
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ ComplianceReportPage app/app/reports/[id]/page.tsx:51:5
     49|     }
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Aktiv compliance-rapport med detaljerte resultatâ€¦
     53|         value: report,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/20]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: [vitest] No "useRouter" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DocumentPage app/app/documents/[id]/page.tsx:9:20
      7| export default function DocumentPage() {
      8|     const params = useParams();
      9|     const router = useRouter();
       |                    ^
     10|     const id = params?.id as string;
     11| 
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/20]â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > renders and loads standards
 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ GapAnalysisPage app/app/gap-analysis/page.tsx:16:5
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/20]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
ConfigurationError: Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'
 â¯ new CopilotKitError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:170:5
 â¯ new ConfigurationError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:315:5
 â¯ validateProps node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:651:11
 â¯ CopilotKitInternal node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:207:3
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/20]â¯


 Test Files  6 failed (6)
      Tests  20 failed | 2 passed (22)
   Start at  12:31:44
   Duration  197.94s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/Sidebar.tsx 

 â¯ lib/api.test.ts (4 tests | 2 failed) 3500ms
       Ã— should fetch documents successfully 1650ms
       âœ“ should throw error on failure  1138ms
       Ã— should upload document successfully 537ms
       âœ“ should throw error on upload failure 32ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 977ms
     Ã— renders loading state initially 966ms
     Ã— renders report data successfully 5ms
     Ã— renders error state on failure 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 1190ms
     Ã— renders document details and download button 1184ms
     Ã— triggers export on button click 2ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 1238ms
     Ã— renders and loads standards 1079ms
     Ã— runs gap analysis and displays results 88ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 881ms
     Ã— renders document list 647ms
     Ã— handles file upload 29ms
     Ã— allows deleting a document 183ms
     Ã— shows staged documents separately 8ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 383ms
     Ã— renders documents and standards 359ms
     Ã— renders dashboard widgets 7ms
     Ã— opens analysis modal and runs check 3ms
     Ã— shows staged documents and allows approval 2ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 6ms
     Ã— shows upload progress 2ms

â¯â¯â¯â¯â¯â¯ Failed Tests 11 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/11]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
ConfigurationError: Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'
 â¯ new CopilotKitError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:170:5
 â¯ new ConfigurationError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:315:5
 â¯ validateProps node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:651:11
 â¯ CopilotKitInternal node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:207:3
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/11]â¯


 Test Files  6 failed (6)
      Tests  20 failed | 2 passed (22)
   Start at  12:33:26
   Duration  44.32s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/GlobalTools.tsx x134 

 â¯ lib/api.test.ts (4 tests | 2 failed) 3500ms
       Ã— should fetch documents successfully 1650ms
       âœ“ should throw error on failure  1138ms
       Ã— should upload document successfully 537ms
       âœ“ should throw error on upload failure 32ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 977ms
     Ã— renders loading state initially 966ms
     Ã— renders report data successfully 5ms
     Ã— renders error state on failure 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 1190ms
     Ã— renders document details and download button 1184ms
     Ã— triggers export on button click 2ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 1238ms
     Ã— renders and loads standards 1079ms
     Ã— runs gap analysis and displays results 88ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 881ms
     Ã— renders document list 647ms
     Ã— handles file upload 29ms
     Ã— allows deleting a document 183ms
     Ã— shows staged documents separately 8ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 1073ms
     Ã— renders documents and standards 815ms
     Ã— renders dashboard widgets 25ms
     Ã— opens analysis modal and runs check 16ms
     Ã— shows staged documents and allows approval 15ms
     Ã— allows rejecting staged documents 25ms
     Ã— shows notifications 163ms
     Ã— shows upload progress 6ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  20 failed | 2 passed (22)
   Start at  12:34:59
   Duration  35.87s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/GlobalTools.tsx x135 

 â¯ lib/api.test.ts (4 tests | 2 failed) 3500ms
       Ã— should fetch documents successfully 1650ms
       âœ“ should throw error on failure  1138ms
       Ã— should upload document successfully 537ms
       âœ“ should throw error on upload failure 32ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 977ms
     Ã— renders loading state initially 966ms
     Ã— renders report data successfully 5ms
     Ã— renders error state on failure 1ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 1190ms
     Ã— renders document details and download button 1184ms
     Ã— triggers export on button click 2ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 1238ms
     Ã— renders and loads standards 1079ms
     Ã— runs gap analysis and displays results 88ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 881ms
     Ã— renders document list 647ms
     Ã— handles file upload 29ms
     Ã— allows deleting a document 183ms
     Ã— shows staged documents separately 8ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 385ms
     Ã— renders documents and standards 91ms
     Ã— renders dashboard widgets 246ms
     Ã— opens analysis modal and runs check 28ms
     Ã— shows staged documents and allows approval 5ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 2ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  20 failed | 2 passed (22)
   Start at  12:36:10
   Duration  23.62s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  lib/api.ts 

stderr | lib/api.test.ts > API Client > fetchDocuments > should throw error on failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

stderr | lib/api.test.ts > API Client > uploadDocument > should upload document successfully
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

stderr | lib/api.test.ts > API Client > uploadDocument > should throw error on upload failure
[next-auth][error][CLIENT_FETCH_ERROR] 
https://next-auth.js.org/errors#client_fetch_error res.json is not a function {
  error: {
    message: [32m'res.json is not a function'[39m,
    stack: [32m'TypeError: res.json is not a function\n'[39m +
      [32m'    at _callee$ (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/next-auth/client/_utils.js:53:22)\n'[39m +
      [32m'    at /Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorRuntime.js:52:18\n'[39m +
      [32m'    at Generator.<anonymous> (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regenerator.js:52:51)\n'[39m +
      [32m'    at Generator.next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/regeneratorDefine.js:11:21)\n'[39m +
      [32m'    at asyncGeneratorStep (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n'[39m +
      [32m'    at _next (/Users/isak/Downloads/iso-doc-platform/frontend/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)'[39m,
    name: [32m'TypeError'[39m
  },
  url: [32m'/api/auth/session'[39m,
  message: [32m'res.json is not a function'[39m
}

 â¯ lib/api.test.ts (4 tests | 2 failed) 668ms
       Ã— should fetch documents successfully 270ms
       âœ“ should throw error on failure 47ms
       Ã— should upload document successfully 261ms
       âœ“ should throw error on upload failure 41ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 954ms
     Ã— renders loading state initially 904ms
     Ã— renders report data successfully 17ms
     Ã— renders error state on failure 13ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 1967ms
     Ã— renders document list 1123ms
     Ã— handles file upload 610ms
     Ã— allows deleting a document 106ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 1014ms
     Ã— renders and loads standards 950ms
     Ã— runs gap analysis and displays results 33ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 41ms
     Ã— renders document details and download button 24ms
     Ã— triggers export on button click 16ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 74ms
     Ã— renders documents and standards 30ms
     Ã— renders dashboard widgets 2ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 6ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯ Failed Tests 20 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/20]â¯

 FAIL  lib/api.test.ts > API Client > fetchDocuments > should fetch documents successfully
AssertionError: expected "vi.fn()" to be called with arguments: [ StringContaining "/documents" ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "/api/auth/session",[90m
[31m+   {[90m
[31m+     "headers": {[90m
[31m+       "Content-Type": "application/json",[90m
[31m+     },[90m
[31m+   },[90m
[2m  ][22m

[1m  2nd vi.fn() call:

[22m[2m  [[22m
[32m-   StringContaining "/documents",[90m
[31m+   "http://localhost:4000/documents",[90m
[31m+   {[90m
[31m+     "headers": {},[90m
[31m+   },[90m
[2m  ][22m
[39m[90m

Number of calls: [1m2[22m
[39m
 â¯ lib/api.test.ts:23:34
     21|             const docs = await fetchDocuments();
     22|             expect(docs).toEqual(mockDocs);
     23|             expect(global.fetch).toHaveBeenCalledWith(expect.stringConâ€¦
       |                                  ^
     24|         });
     25| 

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/20]â¯

 FAIL  lib/api.test.ts > API Client > uploadDocument > should upload document successfully
TypeError: res.json is not a function
 â¯ uploadDocuments lib/api.ts:134:16
    132|         throw new Error('Failed to upload documents');
    133|     }
    134|     return res.json();
       |                ^
    135| }
    136| 
 â¯ lib/api.test.ts:42:13

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/20]â¯

 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders loading state initially
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders report data successfully
 FAIL  app/app/reports/[id]/page.test.tsx > ComplianceReportPage > renders error state on failure
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ ComplianceReportPage app/app/reports/[id]/page.tsx:51:5
     49|     }
     50| 
     51|     useCopilotReadable({
       |     ^
     52|         description: 'Aktiv compliance-rapport med detaljerte resultatâ€¦
     53|         value: report,
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/20]â¯

 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > renders document details and download button
 FAIL  app/app/documents/[id]/page.test.tsx > DocumentView Page > triggers export on button click
Error: [vitest] No "useRouter" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DocumentPage app/app/documents/[id]/page.tsx:9:20
      7| export default function DocumentPage() {
      8|     const params = useParams();
      9|     const router = useRouter();
       |                    ^
     10|     const id = params?.id as string;
     11| 
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/20]â¯

 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > renders and loads standards
 FAIL  app/app/gap-analysis/page.test.tsx > GapAnalysisPage > runs gap analysis and displays results
Error: Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!
 â¯ useCopilotContext node_modules/@copilotkit/react-core/dist/chunk-EUX2P2E7.mjs:96:11
 â¯ useCopilotReadable node_modules/@copilotkit/react-core/dist/chunk-HDOG2RTM.mjs:18:41
 â¯ GapAnalysisPage app/app/gap-analysis/page.tsx:16:5
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/20]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
ConfigurationError: Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'
 â¯ new CopilotKitError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:170:5
 â¯ new ConfigurationError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:315:5
 â¯ validateProps node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:651:11
 â¯ CopilotKitInternal node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:207:3
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/20]â¯


 Test Files  6 failed (6)
      Tests  20 failed | 2 passed (22)
   Start at  12:44:47
   Duration  161.99s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x137 

 â¯ lib/api.test.ts (4 tests | 2 failed) 668ms
       Ã— should fetch documents successfully 270ms
       âœ“ should throw error on failure 47ms
       Ã— should upload document successfully 261ms
       âœ“ should throw error on upload failure 41ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 954ms
     Ã— renders loading state initially 904ms
     Ã— renders report data successfully 17ms
     Ã— renders error state on failure 13ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 41ms
     Ã— renders document details and download button 24ms
     Ã— triggers export on button click 16ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 1014ms
     Ã— renders and loads standards 950ms
     Ã— runs gap analysis and displays results 33ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 1967ms
     Ã— renders document list 1123ms
     Ã— handles file upload 610ms
     Ã— allows deleting a document 106ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 431ms
     Ã— renders documents and standards 86ms
     Ã— renders dashboard widgets 305ms
     Ã— opens analysis modal and runs check 12ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 9ms
     Ã— shows notifications 9ms
     Ã— shows upload progress 7ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:16:26
     14| 
     15| function DashboardInner() {
     16|     const searchParams = useSearchParams();
       |                          ^
     17|     const router = useRouter();
     18|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  20 failed | 2 passed (22)
   Start at  12:46:50
   Duration  9.23s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/app/dashboard/page.tsx x138 

 â¯ lib/api.test.ts (4 tests | 2 failed) 668ms
       Ã— should fetch documents successfully 270ms
       âœ“ should throw error on failure 47ms
       Ã— should upload document successfully 261ms
       âœ“ should throw error on upload failure 41ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 954ms
     Ã— renders loading state initially 904ms
     Ã— renders report data successfully 17ms
     Ã— renders error state on failure 13ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 41ms
     Ã— renders document details and download button 24ms
     Ã— triggers export on button click 16ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 1014ms
     Ã— renders and loads standards 950ms
     Ã— runs gap analysis and displays results 33ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 1967ms
     Ã— renders document list 1123ms
     Ã— handles file upload 610ms
     Ã— allows deleting a document 106ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 127ms
     Ã— renders documents and standards 96ms
     Ã— renders dashboard widgets 17ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 2ms
     Ã— shows notifications 4ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯â¯ Failed Tests 7 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:17:26
     15| 
     16| function DashboardInner() {
     17|     const searchParams = useSearchParams();
       |                          ^
     18|     const router = useRouter();
     19|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯


 Test Files  6 failed (6)
      Tests  20 failed | 2 passed (22)
   Start at  12:47:09
   Duration  15.41s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/Sidebar.tsx 

 â¯ lib/api.test.ts (4 tests | 2 failed) 668ms
       Ã— should fetch documents successfully 270ms
       âœ“ should throw error on failure 47ms
       Ã— should upload document successfully 261ms
       âœ“ should throw error on upload failure 41ms
 â¯ app/app/reports/[id]/page.test.tsx (3 tests | 3 failed) 954ms
     Ã— renders loading state initially 904ms
     Ã— renders report data successfully 17ms
     Ã— renders error state on failure 13ms
 â¯ app/app/documents/[id]/page.test.tsx (2 tests | 2 failed) 41ms
     Ã— renders document details and download button 24ms
     Ã— triggers export on button click 16ms
 â¯ app/app/gap-analysis/page.test.tsx (2 tests | 2 failed) 1014ms
     Ã— renders and loads standards 950ms
     Ã— runs gap analysis and displays results 33ms
 â¯ app/app/documents/page.test.tsx (4 tests | 4 failed) 20ms
     Ã— renders document list 14ms
     Ã— handles file upload 2ms
     Ã— allows deleting a document 2ms
     Ã— shows staged documents separately 2ms
 â¯ app/app/dashboard/page.test.tsx (7 tests | 7 failed) 16ms
     Ã— renders documents and standards 9ms
     Ã— renders dashboard widgets 1ms
     Ã— opens analysis modal and runs check 1ms
     Ã— shows staged documents and allows approval 1ms
     Ã— allows rejecting staged documents 1ms
     Ã— shows notifications 1ms
     Ã— shows upload progress 1ms

â¯â¯â¯â¯â¯â¯ Failed Tests 11 â¯â¯â¯â¯â¯â¯â¯

 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders documents and standards
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > renders dashboard widgets
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > opens analysis modal and runs check
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows staged documents and allows approval
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > allows rejecting staged documents
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows notifications
 FAIL  app/app/dashboard/page.test.tsx > Dashboard Page > shows upload progress
Error: [vitest] No "useSearchParams" export is defined on the "next/navigation" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

vi.mock(import("next/navigation"), async (importOriginal) => {
  const actual = await importOriginal()
  return {
    ...actual,
    // your mocked methods
  }
})

 â¯ DashboardInner app/app/dashboard/page.tsx:17:26
     15| 
     16| function DashboardInner() {
     17|     const searchParams = useSearchParams();
       |                          ^
     18|     const router = useRouter();
     19|     const tabParam = searchParams.get('tab');
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22
 â¯ workLoopSync node_modules/react-dom/cjs/react-dom-client.development.js:17469:41

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/11]â¯

 FAIL  app/app/documents/page.test.tsx > Documents Page > renders document list
 FAIL  app/app/documents/page.test.tsx > Documents Page > handles file upload
 FAIL  app/app/documents/page.test.tsx > Documents Page > allows deleting a document
 FAIL  app/app/documents/page.test.tsx > Documents Page > shows staged documents separately
ConfigurationError: Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'
 â¯ new CopilotKitError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:170:5
 â¯ new ConfigurationError node_modules/@copilotkit/shared/dist/chunk-XLQ2EIPH.mjs:315:5
 â¯ validateProps node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:651:11
 â¯ CopilotKitInternal node_modules/@copilotkit/react-core/dist/chunk-CI4KD357.mjs:207:3
 â¯ Object.react_stack_bottom_frame node_modules/react-dom/cjs/react-dom-client.development.js:25904:20
 â¯ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:7662:22
 â¯ updateFunctionComponent node_modules/react-dom/cjs/react-dom-client.development.js:10166:19
 â¯ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:11778:18
 â¯ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:874:13
 â¯ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:17641:22

â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/11]â¯


 Test Files  6 failed (6)
      Tests  20 failed | 2 passed (22)
   Start at  12:47:47
   Duration  11.48s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
